<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Controladores - OpenXava</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
    <link rel="stylesheet" href="highlight/highlight.css">
    
    <link rel="stylesheet" href="highlight/highlightjs-copy.css"><script src="highlight/highlight.js"></script>
    
    <script src="highlight/highlightjs-copy.js"></script><script>window.addEventListener('DOMContentLoaded',function(){hljs.addPlugin(new CopyButtonPlugin({ autohide: false }));hljs.highlightAll();});</script>
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
      <h1 id="toc0"><a name="Controladores"></a> <span id="breadcrumbs"> <span

            id="openxava"> <a href="https://www.openxava.org/"> <span>o</span>pen<span>x</span>ava
              </a> </span> / <a href="index_es.html">documentación</a> / </span>
        Controladores</h1>
      <strong>Guía de referencia</strong>: <a class="wiki_link" href="model_es.html">Modelo</a>
      | <a class="wiki_link" href="view_es.html">Vista</a> | <a class="wiki_link"

        href="tab_es.html">Datos tabulares</a> | <a class="wiki_link" href="mapping_es.html">Mapeo
        objeto/relacional</a> | <strong>Controladores</strong> | <a class="wiki_link"

        href="application_es.html">Aplicación</a> | <a class="wiki_link" href="customizing_es.html">Personalización</a>
      <hr>
      <div id="toc">
        <h1 class="nopad">Tabla de contenidos</h1>
        <div style="margin-left: 1em;"><a href="#Controladores">Controladores</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Variable%20de%20entorno">Variable
            de entorno</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Objetos+de+sesion">Objetos
            de sesión</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-El%20controlador%20y%20sus%20acciones">El
            controlador y sus acciones</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Subcontrolador%20%28nuevo%20en%20v4.8%29">Subcontrolador
            (nuevo en v4.8)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Inyeccion+de+dependencias">Inyección
            de dependencias</a></div>
        <div style="margin-left: 3em;"><a href="#Controladores-Inyeccion+de+dependencias-@Inject+%28JSR-330%29+%28nuevo+en+v4m2%29">@Inject
            (JSR-330) (nuevo en v4m2)</a></div>
        <div style="margin-left: 3em;"><a href="#Controladores-Inyeccion+de+dependencias-Usar++para+inyeccion+de+dependencias">Usar
            un módulo con una acción</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Herencia%20de%20controladores">Herencia
            de controladores</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Acciones%20en%20modo%20lista">Acciones
            en modo lista</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Acciones%20opcionales">Acciones opcionales (nuevo en v5.9)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Sobreescribir+busqueda+por+defecto">Sobreescribir
            búsqueda por defecto</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Inicializando+un+modulo+con+una+accion">Inicializando
            un módulo con una acción</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Llamar+a+otro+modulo">Llamar
            a otro módulo</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Mostrar%20una%20vista%20nueva%20%28nuevo%20en%20v4m2%29">Mostrar
            una vista nueva (nuevo en v4m2)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Cambiar%20el%20modelo%20de%20la%20vista%20actual">Cambiar
            el modelo de la vista actual</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Ir+a+una+pagina+JSP">Ir
            a una página JSP</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Generar%20un%20informe%20propio%20con%20JasperReports">Generar
            un informe propio con JasperReports</a></div>
        <div style="margin-left: 2em;"><a href="#cargar-fichero-ajax">Cargar y
            procesar un fichero desde el cliente (AJAX) (new in v6.2)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Cargar%20y%20procesar%20un%20fichero%20desde%20el%20cliente%20%28formulario%20multipart%29">Cargar
            y procesar un fichero desde el cliente (formulario multipart)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Sobreescribir%20los%20controladores%20por%20defecto%20%28nuevo%20en%20v2.0.3%29">Sobreescribir
            los controladores por defecto (nuevo en v2.0.3)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Mostrar+un+dialogo+modal+%28nuevo+en+v4m2%29">Mostrar
            un diálogo modal (nuevo en v4m2)</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Mostrar+un+dialogo+modal+%28solo+en+v4m1%29">Mostrar
            un diálogo modal (solo en v4m1)</a></div>
        <div style="margin-left: 2em;"><a href="#sobrescribir-accion-de-ir-a-lista">Sobrescribir
            acción de ir a lista</a></div>
        <div style="margin-left: 2em;"><a href="#Controladores-Todos%20los%20tipos%20de%20acciones">Todos
            los tipos de acciones</a></div>
      </div>
      Los controladores sirven para definir las acciones (botones, vínculos,
      imágenes) que el usuario final puede pulsar. Los controladores se definen
      en un archivo llamado <em>controladores.xml</em> que ha de estar en el
      directorio <i>src/main/resources/xava</i> de nuestro proyecto (en el
      directorio <i>xava</i> con v6 o anteriores). No definimos las acciones
      junto con las entidades porque hay muchas acciones de uso genérico que
      pueden ser aplicadas a cualquier entidad.<br>
      En <i>openxava/src/main/resources/xava</i> (en <em>OpenXava/xava</em>
      para v6 o anterior) tenemos un <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-controllers.xml"><em>default-controllers.xml</em></a>
      que contiene un grupo de componente de uso genérico que podemos usar en
      nuestras aplicaciones. Además, tienes muchos ejemplos en la aplicación de
      pruebas, en <a href="https://github.com/openxava/openxava/blob/master/openxavatest/src/main/resources/xava/controllers.xml"><i>openxavatest/src/main/resources/xava/controllers.xml</i></a>
      (en <i>OpenXavaTest/xava</i> para v6 o anterior).<br>
      El archivo <em>controladores.xml</em> contiene un elemento de tipo <em>&lt;controladores/&gt;</em>
      con la sintaxis:<br>
<pre><code class="language-xml">&lt;controladores&gt;
    &lt;var-entorno ... /&gt; ...    &lt;!-- 1 --&gt;
    &lt;objeto ... /&gt; ...         &lt;!-- 2 --&gt;
    &lt;controlador ... /&gt; ...    &lt;!-- 3 --&gt;
&lt;/controladores&gt;</code></pre>
      <ol>
        <li><strong>var-entorno</strong> (varias, opcional): Variable que
          contienen información de configuración. Estas variables pueden ser
          accedidas desde las acciones y filtros, y su valor puede ser
          sobreescrito para cada módulo.</li>
        <li><strong>objeto</strong> (varios, opcional): Define objetos Java de
          sesión, es decir objetos que se crean y existen durante toda la sesión
          del usuario.</li>
        <li><strong>controlador</strong> (varios, opcional): Los controladores
          son agrupaciones de acciones <i>(controlador es opcional desde
            v6.4.2, antes era obligado)</i>.</li>
      </ol>
      <h2 id="toc1"><a name="Controladores-Variable de entorno"></a>Variable de
        entorno</h2>
      Las variables de entorno contienen información de configuración. Estas
      variables pueden ser accedidas desde las acciones y los filtros, y su
      valor puede ser sobrescrito en cada módulo. Su sintaxis es:<br>
<pre><code class="language-xml">&lt;var-entorno
    nombre="nombre"            &lt;!-- 1 --&gt;
    valor="valor"              &lt;!-- 2 --&gt;
/&gt;</code></pre>
      <ol>
        <li><strong>nombre</strong> (obligado): Nombre de la variable de entorno
          en mayúsculas y usando subrayados para separar palabras.</li>
        <li><strong>valor</strong> (obligado): Valor para la variable de
          entorno.</li>
      </ol>
      Estos son algunos ejemplos:<br>
<pre><code class="language-xml">&lt;var-entorno nombre="MIAPLICACION_AÑO_DEFECTO" valor="2007"/&gt;
&lt;var-entorno nombre="MIAPLICACION_COLOR" valor="ROJO"/&gt;</code></pre>
      <div>Para acceder a una variable de entorno desde una acción usa <i>getEnvironment()</i>:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">String color = getEnvironment().getValue("MIAPLICACION_COLOR");</code></pre>
      </div>
      <h2 id="toc2"><a name="Controladores-Objetos+de+sesion"></a>Objetos de
        sesión</h2>
      Los objetos Java declarados en <em>controladores.xml</em> tienen ámbito
      de sesión; es es decir, son objetos que son creado para un usuario y existen
      durante toda su sesión. Su sintaxis es:<br>
<pre><code class="language-xml">&lt;objeto
    nombre="nombreObjeto"           &lt;!-- 1 --&gt;
    clase="tipoObjeto"              &lt;!-- 2 --&gt;
    valor="valorInicial"            &lt;!-- 3 --&gt;
    ambito="modulo|global"          &lt;!-- 4  Muevo en v2.1 --&gt;
/&gt;</code></pre>
      <ol>
        <li><strong>nombre</strong> (obligado): Nombre del objeto, normalmente
          usaremos el nombre de la aplicación como prefijo para evitar colisión
          de nombres en proyectos grandes.</li>
        <li><strong>clase</strong> (obligado): Nombre calificado de la clase
          Java para esto objeto.</li>
        <li><strong>valor</strong> (opcional): Valor inicial para el objeto.</li>
        <li><strong>ambito</strong> (opcional): <em>(Nuevo en v2.1)</em> El
          valor por defecto es module. Si usamos modulo como ámbito cada módulo
          tendrá su propia copia de este objeto. Si usamos global como ámbito el
          mismo objeto será compartido por todos los módulos de todas la
          aplicaciones OpenXava (que se ejecuten dentro del mismo war).</li>
      </ol>
      Definir objetos de sesión es muy fácil, podemos ver los que están
      definidos en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-controllers.xml"><em>openxava/src/main/resources/xava/default-controllers.xml</em></a>
      (<em>OpenXava/xava/default-controllers.xml</em> en v6 o anterior):<br>
<pre><code class="language-xml">&lt;object name="xava_view" class="org.openxava.view.View"/&gt;
&lt;object name="xava_referenceSubview" class="org.openxava.view.View"/&gt;
&lt;object name="xava_tab" class="org.openxava.tab.Tab"/&gt;
&lt;object name="xava_mainTab" class="org.openxava.tab.Tab"/&gt;
&lt;object name="xava_row" class="java.lang.Integer" value="0"/&gt;
&lt;object name="xava_language" class="org.openxava.session.Language"/&gt;
&lt;object name="xava_newImageProperty" class="java.lang.String"/&gt;
&lt;object name="xava_currentReferenceLabel" class="java.lang.String"/&gt;
&lt;object name="xava_activeSection" class="java.lang.Integer" value="0"/&gt;
&lt;object name="xava_previousControllers" class="java.util.Stack"/&gt;
&lt;object name="xava_previousViews" class="java.util.Stack"/&gt;</code></pre>
      Estos objetos son usado por OpenXava para su funcionamiento interno,
      aunque es bastante normal que los usemos en nuestras propias acciones.
      Para definir nuestro propios objetos podemos hacerlo en <em>controladores.xml</em>
      en el directorio <i>src/main/resources/xava</i> (simplemente <i>xava</i>
      antes v7) de nuestro proyecto o si estamos desarrollando una librería o un
      framework en <i>controladores-defecto-ext.xml (desde v7.5)</i>.<br>
      <h2 id="toc3"><a name="Controladores-El controlador y sus acciones"></a>El
        controlador y sus acciones</h2>
      La sintaxis de un controlador es:<br>
<pre><code class="language-xml">&lt;controlador
    nombre="nombre"            &lt;!-- 1 --&gt;
&gt;
    &lt;hereda-de ... /&gt; ...      &lt;!-- 2 --&gt;
    &lt;accion ... /&gt; ...         &lt;!-- 3 --&gt;
    &lt;subcontrolador ... /&gt; ... &lt;!-- 4 Nuevo en v4.8 --&gt;
&lt;/controlador&gt;</code></pre>
      <ol>
        <li><strong>nombre</strong> (obligado): Nombre del controlador.</li>
        <li><strong>hereda-de</strong> (varios, opcional): Permite usar herencia
          múltiple, para que este controlador herede todas las acciones de otro
          (u otros) controlador. Se puede añadir el atributo <em>acciones-excluidas</em>
          <em>(nuevo en v5.8)</em> pare impedir que ciertas acciones sean
          heredadas.</li>
        <li><strong>accion</strong> (varios, obligada): Definición de la lógica
          a ejecutar cuando el usuario pulse un botón o vínculo.</li>
        <li><strong>subcontrolador</strong> (varios, opcional): <em>(Nuevo en
            v4.8)</em> Permite agrupar varias acciones que visualizaremos en un
          botón desplegable.</li>
      </ol>
      Desde la <em>versión 5.6</em> las acciones y los subcontroladores pueden
      intercalarse.<br>
      Obviamente los controladores los formas las acciones, que son en sí lo
      importante. Aquí su sintaxis:<br>
<pre><code class="language-xml">&lt;accion
    nombre="nombre"                                      &lt;!--  1 --&gt;
    etiqueta="etiqueta"                                  &lt;!--  2 --&gt;
    descripcion="descripcion"                            &lt;!--  3 --&gt;
    modo="detail|list|ALL"                               &lt;!--  4 --&gt;
    icono="icono"                                        &lt;!--  5  Nuevo en v5.4 --&gt;
    imagen="imagen"                                      &lt;!--  6 --&gt;
    clase="clase"                                        &lt;!--  7 --&gt;
    oculta="true|false"                                  &lt;!--  8 --&gt;
    al-iniciar="true|false"                              &lt;!--  9 --&gt;
    en-cada-peticion="true|false"                        &lt;!-- 10  Nuevo en v2.1.2 --&gt;
    antes-de-cada-peticion="true|false"                  &lt;!-- 11  Nuevo en v2.2.5 --&gt;
    despues-de-cada-peticion="true|false"                &lt;!-- 12  Nuevo en v4.0.1 --&gt;
    por-defecto="nunca|casi-nunca (nuevo en v4m6)|
        si-posible|casi-siempre|siempre"                 &lt;!-- 13 --&gt;
    cuesta="true|false"                                  &lt;!-- 14 --&gt;
    confirmar="true|false"                               &lt;!-- 15 --&gt;
    atajo-de-teclado="atajo-de-teclado"                  &lt;!-- 16  Nuevo en v2.0.1 --&gt;
    mostrar-dialogo="true|false"                         &lt;!-- 17  Solo en v4m1 --&gt;
    ocultar-dialogo="true|false|defecto"                 &lt;!-- 18  Solo en v4m1 --&gt;
    en-cada-fila="true|false"                            &lt;!-- 19  Nuevo en v4m4 --&gt;
    procesar-elementos-seleccionados="true|false"        &lt;!-- 20  Nuevo en v5.7 --&gt;
    disponible-en-nuevo="true|false"                     &lt;!-- 21  Nuevo en v5.8 --&gt;
    pierde-datos-cambiados="true|false"                  &lt;!-- 22  Nuevo en v6.3 --&gt;
&gt;
   &lt;poner ... /&gt; ...                                     &lt;!-- 23 --&gt;
   &lt;usa-objeto ... /&gt; ...                                &lt;!-- 24 --&gt;
&lt;/accion&gt;</code></pre>
      <ol>
        <li><strong>nombre</strong> (obligado): Nombre identificativo de la
          acción tiene que ser único dentro del controlador, pero puede
          repetirse el nombre en diferentes controladores. Cuando referenciemos
          a una acción desde fuera lo haremos siempre especificando <em>NombreControlador.nombreAccion</em>.</li>
        <li><strong>etiqueta</strong> (opcional): Etiqueta del botón o texto del
          vínculo. Es mucho mejor usar los archivos i18n.</li>
        <li><strong>descripcion</strong> (opcional): Texto descriptivo de la
          acción. Es mucho mejor usar los archivos i18n.</li>
        <li><strong>modo</strong> (opcional): Indica en que modo ha de ser
          visible esta acción para el usuario. Por defecto es ALL, que quiere
          decir que esta acción es siempre visible.</li>
        <li><strong>icono</strong> (opcional): <em>(Nuevo en v5.4)</em> Id de
          icono de <a class="wiki_link_ext" href="https://pictogrammers.com/library/mdi/"

            rel="nofollow">Material Design Icons</a>. Por ejemplo, si escribes <em>icono="bell"</em>
          se usará una campanita como icono para la acción sin tener que incluir
          ninguna imagen. A partir de v5.4 esta es la forma preferida de definir
          un icono en lugar de <em>imagen</em>.</li>
        <li><strong>imagen</strong>(opcional): URL de la imagen asociada a la
          acción. En la implementación actual si especificamos imagen aparece la
          imagen como un vínculo en el que el usuario puede pulsar. Hasta v4.1.x
          la raiz para la URL era <em>xava</em>, era necesario usar <em>images</em>/
          como prefijo. A partir de v4.2 la raiz depende del estilo y en el
          estilo por defecto es <em>xava/images</em>, por lo que ya no es
          necesario usar <em>images</em>/ como prefijo, aunque todavía se
          soporta para no romper la compatibilidad con versiones anteriores. Si
          defines ambas <em>imagen</em> e <em>icono</em>, <em>icon</em><em>o</em>
          tiene preferencia sobre <em>imagen</em>, aunque se puede cambiar este
          comportamiento con <em>useIconsInsteadOfImages=false</em> en <em>xava.properties</em>.
          Dentro de los portales <em>imagen</em> tiene siempre preferencia.</li>
        <li><strong>clase</strong> (opcional): Clase que implementa la lógica a
          ejecutar. Ha de implementar la interfaz <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAction.html"

              rel="nofollow">IAction</a></em>.</li>
        <li><strong>oculta</strong> (opcional): Una acción oculta no aparece por
          defecto en la barra de botones, aunque sí que se puede usar para todo
          lo demás, por ejemplo como acción asociada a un evento de cambio de
          valor, acción de propiedad, en las colecciones, etc. Por defecto vale
          <em>false</em>.</li>
        <li><strong>al-iniciar</strong> (opcional): Si la ponemos a <em>true</em>
          esta acción se ejecutará automáticamente al iniciar el módulo. Por
          defecto vale <em>false</em>.</li>
        <li><strong>en-cada-peticion</strong> (opcional): <em>(Nuevo en v2.1.2)</em>
          Si la ponemos a <em>true</em> esta acción se ejecutará
          automáticamente en cada petición del usuario, es decir, en la primera
          ejecución del módulo y antes de la ejecución de cada acción del
          usuario. En el momento de la ejecución todos los objetos de sesión de
          OpenXava están configurados y listos para usar. Es decir, desde esta
          acción podemos usar <em>xava_view</em> y <em>xava_tab</em>. Por
          defecto vale <em>false</em>. Usado conjuntamente con <em>modo</em>
          podemos discriminar la ejecución de esta acción a un modo concreto
          (lista o detalle) (<em>nuevo en v3.0.2</em>).</li>
        <li><strong>antes-de-cada-peticion</strong> (opcional): <em>(Nuevo en
            v2.2.5)</em> Si la ponemos a true esta acción se ejecutará
          automáticamente antes de cada petición del usuario, es decir, en la
          primera ejecución del módulo y antes de la ejecución de cada acción
          del usuario, pero antes de que los objetos de sesión de OpenXava estén
          configurados y listos para usar. Es decir, desde esta acción no
          podemos usar <em>xava_view</em> ni <em>xava_tab</em>. Por defecto
          vale <em>false</em>. Usado conjuntamente con <em>modo</em> podemos
          discriminar la ejecución de esta acción a un modo concreto (lista o
          detalle) (<em>nuevo en v3.0.2</em>).</li>
        <li><strong>despues-de-cada-peticion</strong> (opcional): <em>(Nuevo en
            v4.0.1)</em> Si la ponemos a true esta acción se ejecutará
          automáticamente después de cada petición del usuario, es decir, en la
          primera ejecución del módulo y antes de la ejecución de cada acción
          del usuario. Por defecto vale <em>false</em>. Usado conjuntamente con
          <em>modo</em> podemos discriminar la ejecución de esta acción a un
          modo concreto (lista o detalle).</li>
        <li><strong>por-defecto</strong> (opcional): Indica el peso de esta
          acción a la hora de seleccionar cual es la acción por defecto. Las
          acción por defecto es la que se ejecuta cuando el usuario pulsa ENTER.
          Por defecto vale <em>casi-nunca</em> (hasta <em>v4m5</em> era <em>nunca</em>).</li>
        <li><strong>cuesta</strong> (opcional): Si la ponemos a <em>true</em>
          indicamos que esta acción cuesta tiempo en ejecutarse (minutos u
          horas), en la implementación actual OpenXava visualiza una barra de
          progreso. Por defecto vale <em>false</em>.</li>
        <li><strong>confirmar</strong> (opcional): Si la ponemos a <strong>true</strong>
          antes de ejecutarse la acción un diálogo le preguntará al usuario si
          está seguro de querer ejecutarla. Por defecto vale <em>false</em>.</li>
        <li><strong>atajo-de-teclado</strong> (opcional): Define una atajo de
          teclado que el usuario puede pulsar para ejecutar esta acción. Los
          valores posibles son los mismos que para <em><a class="wiki_link_ext"

              href="http://java.sun.com/j2se/1.5.0/docs/api/javax/swing/KeyStroke.html"

              rel="nofollow">javax.swing.KeyStroke</a></em>. Ejemplos: "control
          A", "alt x", "F7" <em>(nuevo en v2.0.1)</em>.</li>
        <li><strong>motrar-dialogo</strong> (opcional): (<em>Solo en v4m1,</em>
          <span style="color: #ff0000;"><em>no está disponible desde</em><em><span

                style="color: #ff0000;"> v4m2</span></em></span><em>)</em> Si <em>true</em>
          después de ejecutar la acción la interfaz de usuario actual se
          mostrará dentro de un diálogo modal. Por defecto vale <em>false</em>.</li>
        <li><strong>ocultar-dialogo</strong> (opcional): <em>(Solo en v4m1,</em>
          <span style="color: #ff0000;"><em>no está disponible desde</em><em><span

                style="color: #ff0000;"> v4m2</span></em></span><em>)</em> Si <em>true</em>
          si actualmente hay un diálogo mostrándose lo cierra. Por defecto vale
          <em>defecto</em>, lo que indica que el diálogo se ocultará solo si la
          acción se llama "cancelar" o es la acción por defecto.</li>
        <li><strong>en-cada-fila</strong> (opcional): <em>(Nuevo en v4m4)</em>
          Si <em>true</em> y esta acción se muestra en modo lista o en una
          colección la acción aparecerá en cada fila. La acción tiene que tener
          una propiedad <em>int row</em> (<em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/TabBaseAction.html"

              rel="nofollow">TabBaseAction</a></em> y <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/CollectionBaseAction.html"

              rel="nofollow">CollectionBaseAction</a></em> ya tienen la
          propiedad <em>row</em> incluida). Por defecto vale <em>false</em>.</li>
        <li><strong>procesar-elementos-seleccionados</strong> (opcional): <em>(Nuevo
            en v5.7)</em> Si <em>true</em> esta acción procesa las filas
          seleccionadas en la lista. De esta manera OpenXava puede ocultar esta
          acción si la selección de elementos no está disponible. Por defecto
          vale <em>false</em>.</li>
        <li><strong>disponible-en-nuevo</strong> (opcional): <em>(Nuevo en
            v5.8)</em> Si <em>false</em> la acción no estará disponible
          mientras se crea una nueva entidad (cuando el usuario pulsa <em>Nuevo</em>).
          Por defecto vale <em>true</em>.</li>
        <li><strong>pierde-datos-cambiados </strong>(opcional): <em>(Nuevo en
            v6.3)</em> Si <em>true</em> significa que cuando se ejecute todos
          los datos cambiados por el usuario en la vista desde la última
          grabación se perderán. Esto puede ser usado por OpenXava para
          preguntar por confirmación antes de ejecutar la acción. Por defecto
          vale <em>false</em>.</li>
        <li><strong>poner</strong> (varios, opcional): Sirve para dar valor a
          las propiedades de la acción. De esta forma una misma acción
          configurada de forma diferente puede usarse en varios controladores.</li>
        <li><strong>usa-objeto</strong> (varios, opcional): Asigna un objeto de
          sesión a una propiedad de la acción antes de ejecutarse, y al acabar
          recoge el valor de la propiedad y lo coloca en el contexto (actualiza
          el objeto de sesión).</li>
      </ol>
      Las acciones son objetos de corta vida, cuando el usuario pulsa un botón
      se crea el objeto acción, se configura con lo valores de <em>poner</em>,
      <em><a class="wiki_link" href="controllers_es.html#toc6">usa-objeto</a></em>
      o <em><a class="wiki_link" href="controllers_es.html#toc5">@Inject</a></em>,
      se ejecuta y se actualiza los objetos de sesión, y después de eso se
      desprecia.<br>
      Un controlador sencillo puede ser:<br>
<pre><code class="language-xml">&lt;controlador nombre="Observaciones"&gt;
    &lt;accion nombre="ocultarObservaciones"
        clase="org.openxava.test.acciones.OcultarMostrarPropiedad"&gt;
        &lt;poner propiedad="propiedad" valor="observaciones" /&gt;
        &lt;poner propiedad="ocultar" valor="true" /&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No necesario desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="mostrarObservaciones" modo="detail"
        clase="org.openxava.test.actiones.OcultarMostrarPropiedad"&gt;
        &lt;poner propiedad="propiedad" valor="observaciones" /&gt;
        &lt;poner propiedad="ocultar" valor="false" /&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No necesario desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="ponerObservaciones" modo="detail"
        clase="org.openxava.test.acciones.PonerValorPropiedad"&gt;
        &lt;poner propiedad="propiedad" valor="observaciones" /&gt;
        &lt;poner propiedad="valor" valor="Demonios tus ojos" /&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No necesario desde v4m2 --&gt;
    &lt;/accion&gt;
&lt;/controladores&gt;</code></pre>
      Podemos ahora incluir este controlador en el módulo deseado; esto se hace
      editando en <em>aplicacion.xml</em>, en la carpeta <i>src/main/resources/xava</i>
      de tu proyecto (en la carpeta <i>xava</i> con v6 o anterior), el módulo
      en el que deseemos usar estas acciones:<br>
<pre><code class="language-xml">&lt;modulo nombre="Albaranes"&gt;
    &lt;modelo nombre="Albaran"/&gt;
    &lt;controlador nombre="Typical"/&gt;
    &lt;controlador nombre="Observaciones"/&gt;
&lt;/modulo&gt;</code></pre>
      De esta forma en este módulo tendremos disponibles las acciones de <em>Typical</em>
      (mantenimiento e impresión) más las que nosotros hemos definido en nuestro
      controlador <em>Observaciones</em>. La barra de botones superior del
      módulo tendrá el siguiente aspecto:<br>
      <img src="files/controllers_es010.jpg" alt="controllers_es010.jpg" title="controllers_es010.jpg"><br>
      Y la barra de botones inferior:<br>
      <br>
      <img src="files/controllers_es020.jpg" alt="controllers_es020.jpg" title="controllers_es020.jpg"><br>
      Vemos como las acciones con imagen se colocan arriba, y las acciones sin
      imagen abajo.<br>
      Podemos observar el código <em>ocultarObservaciones</em> por ejemplo:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 * @author Javier Paniza
 */

public class OcultarMostrarPropiedad extends ViewBaseAction {   // 1

    private boolean ocultar;
    private String propiedad;

    public void execute() throws Exception {                    // 2
        getView().setHidden(propiedad, ocultar);                // 3
    }

    public boolean isOcultar() {
        return ocultar;
    }

    public void setOcultar(boolean b) {
        ocultar = b;
    }

    public String getPropiedad() {
        return propiedad;
    }

    public void setPropiedad(String string) {
        propiedad = string;
    }

}</code></pre>
      Una acción ha de implementar <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAction.html"

          rel="nofollow">IAction</a></em>, pero normalmente se hace que
      descienda de una clase base que a su vez implemente esta interfaz. La
      acción base básica es <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

          rel="nofollow">BaseAction</a></em> que implementa la mayoría de los
      métodos de <em>IAction</em> a excepción de <em>execute()</em>. En este
      caso usamos <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ViewBaseAction.html"

          rel="nofollow">ViewBaseAction</a></em> como clase base. <em>ViewBaseAction</em>
      tiene una propiedad view de tipo <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

          rel="nofollow">View</a></em>. Esto unido a que al declarar la acción
      hemos puesto...<br>
<pre><code class="language-xml">&lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No necesario desde v4m2 --&gt;</code></pre>
      ...permite desde esta acción manipular mediante view la vista, o dicho de
      otra forma la interfaz de usuario que éste está viendo.<br>
      El <em>&lt;usa-objeto /&gt;</em> coge el objeto de sesión <em>xava_view</em>
      y lo asigna a la propiedad <em>view</em> (quita el prefijo <em>xava_</em>,
      y en general quita el prefijo <em>miaplicacion_</em> antes de asignar el
      objeto) de nuestra acción justo antes de llamar a <em>execute()</em>.
      Aunque a partir de v4m2 no es necesario usar <em>&lt;usa-objeto /&gt;</em>
      para inyectar <em>xava_view</em> porque <em>ViewBaseAction</em> ya lo
      inyecta mediante <em><a class="wiki_link" href="controllers_es.html#toc5">@Inject</a></em>.<br>
      Ahora dentro del método <em>execute()</em> podemos usar <em>getView()</em>
      a placer (3), en este caso para ocultar una propiedad. Todas las
      posibilidades de <em>View</em> las podemos ver consultando la
      documentación JavaDoc de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

          rel="nofollow">org.openxava.view.View</a></em>.<br>
      Con...<br>
<pre><code class="language-xml">&lt;poner propiedad="propiedad" valor="observaciones" /&gt;
&lt;poner propiedad="ocultar" valor="true" /&gt;</code></pre>
      establecemos valores fijos a las propiedades de nuestra acción.<br>
      <h2 id="toc4"><a name="Controladores-Subcontrolador (nuevo en v4.8)"></a>Subcontrolador
        <em>(nuevo en v4.8)</em></h2>
      Mediante el subcontrolador podemos agrupar varias acciones para
      visualizarlas en un único botón desplegable.<br>
      La sintaxis de un subcontrolador es:<br>
<pre><code class="language-xml">&lt;subcontrolador
    controlador="nombreControlador"    &lt;!-- 1 --&gt;
    imagen="imagen"                    &lt;!-- 2 --&gt;
    icono="icono"                      &lt;!-- 3  Nuevo en v5.4 --&gt;
    modo="detail|list|ALL"             &lt;!-- 4 --&gt;</code></pre>
      <ol>
        <li><strong>controlador:</strong> (obligado) Nombre del controlador al
          que hacemos referencia</li>
        <li><strong>imagen:</strong> (opcional) imagen asociada al
          subcontrolador</li>
        <li><strong>icono</strong> (opcional): <em>(Nuevo en v5.4)</em> Id de
          icono de <a class="wiki_link_ext" href="https://pictogrammers.com/library/mdi/"

            rel="nofollow">Material Design Icons</a>. Por ejemplo, si escribes <em>icono="bell"</em>
          se usará una campanita como icono para la acción sin tener que incluir
          ninguna imagen. A partir de v5.4 esta es la forma preferida de definir
          un icono en lugar de <em>imagen</em>.</li>
        <li><strong>modo:</strong> (opcional) Por defecto es ALL. Para indicar
          si el subcontrolador saldrá en el modo lista, detalle o ambos.</li>
      </ol>
      <span style="line-height: 1.5;">En nuestro </span><em><span style="line-height: 1.5;">controladores.xml</span></em><span

        style="line-height: 1.5;"> podemos definir:</span><br>
<pre><code class="language-xml">&lt;controladores&gt;
    &lt;controlador nombre="Color"&gt;
        &lt;accion nombre="verMensaje"
                clase="org.openxava.test.actions.SeeMessageAction"/&gt;
        &lt;subcontrolador
                controlador="ColorSub" &lt;!-- 1 --&gt;
                icono="menu"/&gt;
    &lt;/controlador&gt;

    &lt;controlador nombre="ColorSub"&gt;
        &lt;accion nombre="firsAction" imagen="report.gif"
                clase="org.openxava.test.actions.SeeDialogInColor"&gt;
                &lt;poner propiedaad="actionNumber" valor="1"/&gt;
        &lt;/accion&gt;
        &lt;accion nombre="secondAction"
                clase="org.openxava.test.actions.SeeDialogInColor"&gt;
                &lt;poner propiedaad="actionNumber" valor="2"/&gt;
        &lt;/accion&gt;
        &lt;accion nombre="secondAction"
                clase="org.openxava.test.actions.SeeDialogInColor"&gt;
                &lt;poner propiedaad="actionNumber" valor="3"/&gt;
        &lt;/accion&gt;
        &lt;accion nombre="secondAction" mode="detail" &lt;!-- 2 --&gt;
                clase="org.openxava.test.actions.SeeDialogInColor"&gt;
                &lt;poner propiedaad="actionNumber" valor="4"/&gt;
        &lt;/accion&gt;
    &lt;/controlador
&lt;/controladores&gt;</code></pre>
      <ol>
        <li><strong>controlador:</strong> referenciamos al controlador ColorSub
          que tenemos definido en nuestro controladores.xml</li>
        <li><strong>mode="detail":</strong> esta acción aparecerá en el
          subcontrolador solo cuando estemos en el modo detalle, si estamos en
          el modo lista la acción no estará visible.</li>
      </ol>
      El resultado que obtendremos es este:<br>
      <img src="files/subcontrolador.GIF" alt="subcontrolador.GIF" title="subcontrolador.GIF"><br>
      <br>
      El nombre del controlador podremos traducirlo mediante los ficheros i18n.<br>
      <h2 id="toc5"><a name="Controladores-Inyeccion+de+dependencias"></a>Inyección
        de dependencias</h2>
      Con <a class="wiki_link_ext" href="http://es.wikipedia.org/wiki/Inyecci%C3%B3n_de_dependencias"

        rel="nofollow">Inyección de dependencias</a> el valor para un campo o
      propiedad lo establece el marco de trabajo, y no el desarrollador.<br>
      <h3 id="toc6"><a name="Controladores-Inyeccion+de+dependencias-@Inject+(JSR-330)+(nuevo+en+v4m2)"></a>@Inject
        (JSR-330) <em>(nuevo en v4m2)</em></h3>
      A partir de v4m2 OpenXava soporta <a class="wiki_link_ext" href="http://jcp.org/en/jsr/detail?id=330"

        rel="nofollow">JSR-330</a>, el estándar Java para inyección de
      dependencias. Para inyectar un objeto de sesión en una acción solo hemos
      de anotar un campo con <em><a class="wiki_link_ext" href="http://java.sun.com/javaee/6/docs/api/javax/inject/Inject.html"

          rel="nofollow">@javax.inject.Inject</a></em>. Es decir, si tenemos un
      objeto de sesión y una acción en nuestro <em>controladores.xml</em> como
      los que siguen:<br>
<pre><code class="language-xml">&lt;controladores&gt;
    &lt;objeto nombre="xavatest_anoActivo" clase="java.lang.Integer" valor="2010" ambito="global"/&gt;

    &lt;controlador nombre="AnoActivo"&gt;
        &lt;accion nombre="cambiar"
        clase="org.openxava.test.acciones.CambiarAnoActivo"/&gt;
    &lt;/controlador&gt;
&lt;/controladores&gt;</code></pre>
      Para inyectar el objeto <em>xavatest_anoActivo</em> en <em>CambiarAnoActivo</em>
      hemos de usar <em>@Inject</em> de la siguiente manera:<br>
<pre><code class="language-java">public class CambiarAnoActivo extends ViewBaseAction {

    @Inject
    private int anoActivo; // Los getter y setter no son necesarios

    public void execute() throws Exception {
         assert anoActivo == 2010; // El valor del objeto de sesión
         anoActivo = 2012; // Cambia el valor del objeto de sesión
    }

}</code></pre>
      Así el objeto <em>xavatest_anoActivo</em> se inyecta en la propiedad <em>anoActivo</em>
      antes de llamar a <em>execute()</em>; y después de ejecutar <em>execute()</em>
      el valor del campo <em>anoActivo</em> se vuelve a asignar a <em>xavatest_anoActivo</em>.
      Por tanto, se puede cambiar el estado de los objetos de sesión, incluso
      con tipos inmutables o primitivos.<br>
      Como se puede ver, el nombre por defecto del objeto de sesión a inyectar
      es el nombre del atributo ignorando el prefijo (ignorando <em>xavatest_</em>
      en este caso). Aunque podemos usar <em><a class="wiki_link_ext" href="http://java.sun.com/javaee/6/docs/api/javax/inject/Named.html"

          rel="nofollow">@Named</a></em> (también parte del estándar JSR-330)
      para especificar un nombre diferente para el objeto de sesión y el campo:<br>
<pre><code class="language-java">public class CambiarAnoActivo extends ViewBaseAction {

    @Inject @Named("xavatest_anoActivo")
    private int ano; // Los getter y setter no son necesarios

    public void execute() throws Exception {
        assert ano == 2010; // El valor del objeto de sesión xavatest_anoActivo
        ano = 2012; // Cambia el valor de avatest_anoActivo
    }

}</code></pre>
      De esta forma el objeto de sesión <em>xavatest_anoActivo</em> se inyecta
      en el campo <em>ano</em> de la acción.<br>
      <h3 id="toc7"><a name="Controladores-Inyeccion+de+dependencias-Usar++para+inyeccion+de+dependencias"></a>Usar
        &lt;usa-objeto /&gt; para inyección de dependencias</h3>
      La inyección de dependencias ha sido usada en OpenXava desde tiempos
      inmemorables. La forma tradicional para inyectar objetos de sesión en una
      acción es mediante <em>&lt;usa-objeto /&gt;</em> en la declaración <em>&lt;accion/&gt;</em>.
      Si usas una versión anterior a v4m2, tendrás que escribir el ejemplo de
      arriba usando <em>&lt;usa-objeto/&gt;</em> en <em>controladores.xml</em>:<br>
<pre><code class="language-xml">&lt;controladores&gt;
    &lt;objeto nombre="xavatest_anoActivo" clase="java.lang.Integer" valor="2010" ambito="global"/&gt;

    &lt;controlador nombre="AnoActivo"&gt;
        &lt;accion nombre="cambiar"
            clase="org.openxava.test.acciones.CambiarAnoActivo"&gt;
            &lt;usa-objeto nombre="xavatest_anoActivo"/&gt;
        &lt;/accion&gt;
    &lt;/controlador&gt;
&lt;/controladores&gt;</code></pre>
      Y escribir la clase sin <em>@Inject</em>, y usando <em>getter</em> y <em>setter</em>:<br>
<pre><code class="language-java">public class CambiarAnoActivo extends ViewBaseAction {

    private int anoActivo; // Sin @Inject, estamos usando &lt;usa-objeto/&gt;

    public void execute() throws Exception {
         assert anoActivo == 2010; // El valor del objeto de sesión
         anoActivo = 2012; // Cambia el valor del objeto de sesión
    }

    public void setAnoActivo(int anoActivo) {  // Setter y...
         this.anoActivo = anoActivo;
    }

    public int getAnoActivo() { // getter son necesarios
         return anoActivo;
    }

}</code></pre>
      Podemos usar el atributo <em>propiedad-accion</em> para especificar un
      nombre diferente para el objeto de sesión y el campo:<br>
<pre><code class="language-xml">&lt;accion nombre="cambiar"
   class="org.openxava.test.acciones.CambiarAnoActivo"&gt;
   &lt;usa-objeto nombre="xavatest_anoActivo" propiedad-accion="ano"/&gt;
&lt;/accion&gt;</code></pre>
      Y entonces hemos de escribir la acción de la siguiente forma:<br>
<pre><code class="language-java">public class CambiarAnoActivo extends ViewBaseAction {

    private int ano; // Sin @Inject, estamos usando &lt;usa-objeto/&gt;

    public void execute() throws Exception {
        assert ano == 2010; // El valor del objeto de sesión xavatest_anoActivo
        ano = 2012; // Cambia el valor de xavatest_anoActivo
    }

    public void setAno(int ano) {  // Setter y...
         this.ano = ano;
    }

    public int getAno() { // getter son necesarios
         return ano;
    }

}</code></pre>
      Vemos como <em>propiedad-accion</em> es el homólogo de <em>@Name</em> de
      JSR-330.<br>
      <br>
      <br>
      Podemos usar ambos <em>&lt;usa-objeto/&gt;</em> e <em>@Inject</em> para
      inyección de dependencias, pero dado que JSR-330 es el estándar de Java es
      el preferido.<br>
      <em>(Nuevo en v4.7)</em> Si el objeto de sesión a ser inyectado tiene una
      propiedad llamada <em>request</em>, esta propiedad se llena con el <em>HttpServletRequest</em>
      actual antes de inyectar el objeto en la acción. Esto funciona así con
      objetos inyectados usando <em>&lt;usa-objeto/&gt;</em> o <em>@Inject</em>.<br>
      <h2 id="toc8"><a name="Controladores-Herencia de controladores"></a>Herencia
        de controladores</h2>
      Podemos crear un controlador que herede todas sus acciones de uno o más
      controladores. Un ejemplo de esto lo encontramos en el controlador
      genérico más típico <em>Typical</em>, este controlador se encuentra en <a

        href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-controllers.xml"><em>openxava/src/main/resources/xava/default-controllers.xml</em></a>
      (en <em>OpenXava/xava/default-controllers.xml</em> para v6 o anteriores):<br>
<pre><code class="language-xml">&lt;controller name="Typical"&gt;
    &lt;extends controller="Print"/&gt;
    &lt;extends controller="CRUD"/&gt;
&lt;/controller&gt;</code></pre>
      A partir de ahora cuando indiquemos que un módulo usa el controlador <em>Typical</em>
      este módulo tendrá a su disposición todas las acciones de <em>Print</em>
      (para generar informes PDF y Excel) y <em>CRUD</em> (para hace altas,
      bajas, modificaciones y consultas).<br>
      Podemos usar la herencia para refinar la forma de trabajar de un
      controlador estándar, como sigue:<br>
<pre><code class="language-xml">&lt;controlador nombre="Familia"&gt;
    &lt;hereda-de controlador="Typical" acciones-excluidas="refresh, delete"/&gt;
    &lt;accion nombre="new" icono="library-plus"
        clase="org.openxava.test.acciones.CrearNuevaFamilia"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
&lt;/controlador&gt;</code></pre>
      Como el nombre de nuestra acción <em>new</em> coincide con la de <em>Typical</em>
      (en realidad la de <em>CRUD</em> del cual desciende <em>Typical</em>) se
      anula la original y se usará la nuestra. Así de fácil podemos indicar que
      ha de hacer nuestro módulo cuando el usuario pulse nuevo. También podemos
      impedir que ciertas acciones sean heredades usando el atributo <em>excluded-action</em>
      <em>(nuevo en v5.8)</em>, en este caso <em>Familia</em> no incluirá <em>refresh</em>
      y <em>delete</em>, normalmente disponibles desde <em>CRUD</em> vía <em>Typical</em>.<br>
      <h2 id="toc9"><a name="Controladores-Acciones en modo lista"></a>Acciones
        en modo lista</h2>
      Podemos hacer acciones que apliquen a varios objetos. Estas acciones
      normalmente solo se visualizan en modo lista y suelen actuar sobre los
      objetos que el usuario haya escogido.<br>
      Un ejemplo puede ser:<br>
<pre><code class="language-xml">&lt;accion nombre="borrarSeleccionados" modo="list"         &lt;!-- 1 --&gt;
    confirmar="true"                                     &lt;!-- 2 --&gt;
    clase="org.openxava.actions.DeleteSelectedAction"&gt;
&lt;/accion&gt;</code></pre>
      Ponemos mode="list" para que solo aparezca en modo lista (1). Ya que esta
      acción borra registros hacemos que el usuario tenga que confirmar antes de
      ejecutarse (2). No es necesario incluir un <em>&lt;usa-objeto/&gt;</em>
      para <em>xava_tab</em> <em>(nuevo en v2.1.4)</em>.<br>
      Programar la acción sería así:<br>
<pre><code class="language-java">package org.openxava.actions;

import java.util.*;

import org.openxava.model.*;
import org.openxava.validators.*;

/**
 * @author Javier Paniza
 */

public class DeleteSelectedAction extends TabBaseAction implements IModelAction {    // 1
    private String model;

    public void execute() throws Exception {
        // int [] selectedOnes = getTab().getSelected();                             // 2
        // int [] selectedOnes = getSelected(); // Nuevo en v4m4.                    // 2
        // Desde v4.7 es preferible getSelectedKeys() a getSelected()
        Map [] selectedOnes = getSelectedKeys(); // Nuevo en v4.7                    // 2
        if (selectedOnes != null) {
            for (int i = 0; i &lt; selectedOnes.length; i++) {
                Map clave = selectedOnes[i];
                try {
                    MapFacade.remove(model, clave);                                  // 3
                }
                catch (ValidationException ex) {
                    addError("no_delete_row", new Integer(i), clave);// (4)
                    addErrors(ex.getErrors());
                }
                catch (Exception ex) {
                    addError("no_delete_row", new Integer(i), clave);
                }
            }
            getTab().deselectAll();                                                  // 5
            resetDescriptionsCache();                                                // 6
        }
    }

    public void setModel(String modelName) {                                         // 7
        this.model = modelName;
    }
}</code></pre>
      Esta acción es una acción estándar de OpenXava, pero nos sirve para ver
      que cosas podemos hacer dentro de nuestras acciones de modo lista.
      Observamos (1) como desciende de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/TabBaseAction.html"

          rel="nofollow">TabBaseAction</a></em> e implementa <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IModelAction.html"

          rel="nofollow">IModelAction</a></em>, al descender de <em>TabBaseAction</em>
      <em>(new in v2.1.4)</em> tiene un conjunto de utilidades disponible y no
      estamos obligados a implementar todos los métodos de <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAction.html"

          rel="nofollow">IAction</a></em>; y al implementar <em>IModelAction</em>
      nuestra acción tendrá un metoto <em>setModel()</em> (7) con el que
      recibirá el nombre del modelo (del componente OpenXava) antes de
      ejecutarse.<br>
      Puedes acceder al <em>Tab</em> usando el método <em>getTab()</em> (2);
      este método está implementado en <em>TabBaseAction</em> y permite acceder
      al objeto de sesión <em>xava_tab</em>. Mediante <em>getTab()</em>
      podemos manipular la lista de objetos visualizados. Por ejemplo, con <em>getTab().getSelected()</em>
      (2) obtenemos los índices de las filas seleccionadas, aunque desde 4m4 es
      mejor usar <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/TabBaseAction.html#getSelected%28%29"

          rel="nofollow">getSelected()</a></em> en su lugar que es un método de
      <em>TabBaseAction.</em> Desde la v4.7 el método <em>getSelected()</em> ha
      sido marcado como <strong>obsoleto</strong> (deprecated) en su lugar se
      debe usar el método <em>getSeletedKeys()</em> que lo que hace es devolver
      las claves de los elementos seleccionados. Con <em>getTab().getTableModel()</em>
      un table model para acceder a los datos, y con <em>getTab().deselectAll()</em>
      deseleccionar las filas. Podemos echar un vistazo a la documentación
      JavaDoc de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/tab/Tab.html"

          rel="nofollow">org.openxava.tab.Tab</a></em> para más detalles sobre
      sus posibilidades.<br>
      Algo muy interesante que se ve en este ejemplo es el uso de la clase <em>MapFacade</em>
      (3). <em>MapFacade</em> permite acceder a la información del modelo
      mediante mapas de Java (<em><a class="wiki_link_ext" href="http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html"

          rel="nofollow">java.util.Map</a></em>), esto es conveniente cuando
      obtenemos datos de <em>Tab</em> o <em>View</em> en formato <em>Map</em>
      y queremos con ellos actualizar el modelo (y por ende la base de datos) o
      viceversa. Todas las clases genéricas de OpenXava interactúan con el
      modelo mediante <em>MapFacade</em> y nosotros también lo podemos usar,
      pero como consejo general de diseño decir que trabajar con mapas es
      práctico para proceso automáticos pero cuando queremos hacer cosas
      específicas es mejor usar directamente los objetos del modelo. Para más
      detalles podemos ver la documentación JavaDoc de <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/model/MapFacade.html"

          rel="nofollow">org.openxava.model.MapFacade</a></em>.<br>
      Observamos como añadir mensajes que serán visualizados al usuario con <em>addError()</em>.
      El método <em>addError()</em> recibe el id de una entrada en nuestros
      archivos i18n y los argumentos que el mensaje pueda usar. Los mensajes
      añadidos se visualizaran al usuario como errores. Si queremos añadir
      mensajes de advertencia podemos usar <em>addMessage(), addInfo() (nuevo
        en v4.3)</em> o <em>addWarning() (nuevo en v4.3)</em> que tienen
      exactamente el mismo funcionamiento que <em>addError()</em>. Los archivos
      i18n para errores y mensajes han de llamarse <em>MiProyecto-messages.properties</em>
      o <em>MensajeMiProyecto.properties</em> y el sufijo del idioma (_en, _ca,
      _es, _it, etc). Podemos ver como ejemplos los archivos que hay en <a href="https://github.com/openxava/openxava/tree/master/openxavatest/src/main/resources/i18n"><i>openxavatest/src/main/resources/i18n</i></a>
      (en <em>OpenXavaTest/i18n</em> para v6 o anterior). Todas las excepciones
      no atrapadas producen un mensaje de error genérico, excepto si la
      excepción es una <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/validators/ValidationException.html"

          rel="nofollow">ValidationException</a></em> en cuyo caso visualiza el
      mensaje de error de la excepción.<br>
      El método <em>resetDescriptionsCache()</em> (6) borra los caché usados
      por OpenXava para visualizar listas de descripciones (combos), es
      conveniente llamarlo siempre que se actualicen datos.<br>
      Podemos ver más posibilidades si vemos la documentación JavaDoc de <em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

          rel="nofollow">org.openxava.actions.BaseAction</a></em> y <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/TabBaseAction.html"

          rel="nofollow">org.openxava.actions.TabBaseAction</a></em>.<br>
      Desde v2.1.4 este tipo de acciones <a class="wiki_link" href="view_en.html#toc22">también
        pueden ser usadas como @ListAction</a> para colecciones con <i>@OneToMany</i>
      y <i>@Condition</i>, pero no para colecciones calculadas, <i>@ManyToMany</i>
      o listas con <i>@OrderColumn</i>.<br>
      <h2 id="toc10"><a name="Controladores-Acciones opcionales"></a>Acciones opcionales <i>(nuevo en v5.9)</i></h2>
      Puedes crear acciones que estén disponibles u ocultas según una condición programática.
      Estas acciones implementan la interfaz <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAvailableAction.html" rel="nofollow">IAvailableAction</a></em>, que define un método
      <em>isAvailable()</em> que devuelve un booleano indicando si la acción debe mostrarse
      o no.<br>
      La interfaz <em>IAvailableAction</em> puede ser implementada por cualquier tipo de acción (detalle, lista, colección, etc.).
      Cuando OpenXava está a punto de mostrar una acción, comprueba si la acción implementa <em>IAvailableAction</em>
      y si es así, llama al método <em>isAvailable()</em>. Si el método devuelve <em>false</em>, la acción
      no se muestra.<br>
      Veamos un ejemplo de una acción de lista que solo está disponible para filas específicas dependiendo de su contenido. En este caso, la acción solo se mostrará para las filas donde el nombre del transportista no esté ya en mayúsculas:<br>
      <pre><code class="language-java">package org.openxava.test.actions;

import java.util.*;

import org.apache.commons.logging.*;
import org.openxava.actions.*;
import org.openxava.model.*;
import org.openxava.test.model.*;

/**
 * Acción para convertir los elementos seleccionados en una lista a mayúsculas.
 * @author Javier Paniza
 */
public class CarrierToUpperCaseAction extends TabBaseAction implements IAvailableAction {   // 1

	private static Log log = LogFactory.getLog(CarrierToUpperCaseAction.class);

	@Override
	@SuppressWarnings("unchecked")
	public void execute() throws Exception {
		Map<String, Object>[] selectedOnes = getSelectedKeys();
		for (int i = 0; i < selectedOnes.length; i++) {
			Carrier carrier = (Carrier) MapFacade.findEntity("Carrier", selectedOnes[i]);
			carrier.setName(carrier.getName().toUpperCase());
		}
	}

	@Override
	@SuppressWarnings("unchecked")
	public boolean isAvailable() {                                                         // 2
		try {
			if (getRow() < 0) return false;                                                // 3
			Map<String, Object> key = getSelectedKeys()[0];
			Carrier carrier = (Carrier) MapFacade.findEntity("Carrier", key);
			return !carrier.getName().equals(carrier.getName().toUpperCase());             // 4
		}
		catch (Exception ex) {
			log.error("Error checking if CarrierToUpperCaseAction is available", ex);
			return false;
		}
	}
}</code></pre>
      Esta acción convierte a mayúsculas los nombres de los transportistas seleccionados. La acción extiende de <em>TabBaseAction</em>
      e implementa <em>IAvailableAction</em> (1), lo que le obliga a implementar el método <em>isAvailable()</em> (2).
      El método <em>isAvailable()</em> primero comprueba si hay una fila seleccionada (3), y luego verifica si el nombre
      del transportista no está ya en mayúsculas (4). La acción solo se mostrará para las filas que cumplan estas condiciones.<br>
      Ten en cuenta que desde el método <em>isAvailable()</em> tienes acceso a los mismos recursos que desde el método <em>execute()</em>, como <em>getRow()</em> o <em>getSelectedKeys()</em>, lo que te permite implementar lógica compleja para determinar cuándo una acción debe estar disponible.
      <h2 id="toc11"><a name="Controladores-Sobreescribir+busqueda+por+defecto"></a>Sobreescribir
        búsqueda por defecto</h2>
      Cuando en un módulo nos aparece el modo lista y pulsamos para visualizar
      un detalle, entonces OpenXava busca el objeto correspondiente y lo
      visualiza en el detalle. Ahora bien si en modo detalle rellenamos la clave
      y pulsamos a buscar (unos prismático) también hace lo mismo. Y cuando
      navegamos por los registros pulsando siguiente o anterior hace la misma
      búsqueda. ¿Cómo podemos personalizar las búsqueda? Vamos a ver cómo.<br>
      Lo único que hemos de hacer es definir nuestro módulo en&nbsp;<em><em>src/main/resources/xava/</em>aplicacion.xml</em>
      (en la carpeta <i>xava</i> para v6 o anterior) de la siguiente forma:<br>
<pre><code class="language-xml">&lt;modulo nombre="Albaranes"&gt;
    &lt;var-entorno nombre="XAVA_SEARCH_ACTION" valor="Albaranes.buscar"/&gt;
    &lt;modelo nombre="Albaran"/&gt;
    &lt;controlador nombre="Typical"/&gt;
    &lt;controlador nombre="Observaciones"/&gt;
    &lt;controlador nombre="Albaranes"/&gt;
&lt;/modulo&gt;</code></pre>
      Podemos observar que definimos una variable de entorno XAVA_SEARCH_ACTION
      que tiene el valor de la acción que queremos usar para buscar. Esa acción
      está definida en <em>controladores.xml</em> así:<br>
<pre><code class="language-xml">&lt;controlador nombre="Albaranes"&gt;
    &lt;accion nombre="buscar" modo="detail"
        por-defecto="si-posible" oculta="true"
        clase="org.openxava.test.acciones.BuscarAlbaran"
        atajo-de-teclado="F8"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
    ...
&lt;/controlador&gt;</code></pre>
      Y su código es:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import java.util.*;

import org.openxava.actions.*;
import org.openxava.util.*;

/**
 * @author Javier Paniza
 */

public class BuscarAlbaran extends SearchByViewKeyAction {                    // 1

    public void execute() throws Exception {
        super.execute();                                                      // 2
        if (!Is.emptyString(getView().getValueString("empleado"))) {
            getView().setValue("entregadoPor", new Integer(1));
            getView().setHidden("transportista", true);
            getView().setHidden("empleado", false);
        }
        else {
            Map transportista = (Map) getView().getValue("transportista");
            if (!(transportista == null || transportista.isEmpty())) {
                getView().setValue("entregadoPor", new Integer(2));
                getView().setHidden("transportista", false);
                getView().setHidden("empleado", true);
            }
            else {
                getView().setHidden("transportista", true);
                getView().setHidden("empleado", true);
            }
        }
    }

}</code></pre>
      Básicamente hemos de buscar en la base de datos (o mediante las APIs de
      EJB2, EJB3 JPA o Hibernate) y llenar la vista. Muchas veces lo más
      práctico es hacer que extienda de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/SearchByViewKeyAction.html"

          rel="nofollow">SearchByViewKeyAction</a></em> (1) y dentro del <em>execute()</em>
      hacer un <em>super.execute()</em> (2).<br>
      OpenXava viene con 3 acciones de búsquedas:<br>
      <ul>
        <li><strong>CRUD.searchByViewKey</strong>: Esta es la configurada por
          defecto. Hace una búsqueda a partir de la clave que hay ese momento en
          la vista, no ejecuta ningún evento.</li>
        <li><strong>CRUD.searchExecutingOnChange</strong>: Funciona como la
          anterior pero al buscar ejecuta las acciones <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

              rel="nofollow">@OnChange</a></em><em>/al-cambiar</em> asociadas a
          las propiedades de la vista.</li>
        <li><strong>CRUD.searchReadOnly</strong>: Funciona como <em>searchByViewKey</em>
          pero pone la vista de detalle a estado no editable al buscar. Útil
          para crear <a class="wiki_link" href="application_es.html#toc6">módulos
            de consulta</a>.</li>
      </ul>
      Si queremos que al buscar ejecute las acciones al cambiar tenemos que
      definir nuestro módulo de la siguiente forma:<br>
<pre><code class="language-xml">&lt;modulo nombre="ProductosAccionesAlCambiarAlBuscar"&gt;
    &lt;var-entorno nombre="XAVA_SEARCH_ACTION" valor="CRUD.searchExecutingOnChange"/&gt;
    &lt;modelo nombre="Producto"/&gt;
    &lt;controlador nombre="Typical"/&gt;
    &lt;controlador nombre="Productos"/&gt;
&lt;/modulo&gt;</code></pre>
      Como se ve, simplemente poniendo valor a la variable de entorno
      XAVA_SEARCH_ACTION.<br>
      <h2 id="toc11"><a name="Controladores-Inicializando+un+modulo+con+una+accion"></a>Inicializando
        un módulo con una acción</h2>
      Con solo poner <em>al-iniciar="true"</em> cuando definimos una acción
      hacemos que esta acción se ejecute automáticamente cuando se ejecuta el
      módulo por primera vez. Esto nos da una oportunidad para inicializar
      nuestro módulo. Veamos un ejemplo. En nuestro <em>controladores.xml</em>
      ponemos:<br>
<pre><code class="language-xml">&lt;controlador nombre="Facturas2002"&gt;
    &lt;accion nombre="iniciar" al-iniciar="true" oculta="true"
        clase="org.openxava.test.acciones.IniciarAñoDefectoA2002"&gt;
        &lt;!-- &lt;usa-objeto nombre="xavatest_añoDefecto"/&gt; A partir de v4m2 podemos usar @Inject --&gt;
        &lt;!-- &lt;usa-objeto nombre="xava_tab"/&gt; A partir de v4m2 podemos usar @Inject --&gt;
    &lt;/accion&gt;
    ...
&lt;/controlador&gt;</code></pre>
      Y en nuestra acción:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import javax.inject.*;
import org.openxava.actions.*;
import org.openxava.tab.*;

/**
 * @author Javier Paniza
 */

public class IniciarAñoDefectoA2002 extends BaseAction {

    @Inject  // A partir de v4m2, si no usamos &lt;usa-objeto/&gt;
    private int añoDefecto;

    @Inject  // A partir de v4m2, si no usamos &lt;usa-objeto/&gt;
    private Tab tab;

    public void execute() throws Exception {
        setAñoDefecto(2002);                              // 1
        tab.setTitleVisible(true);                        // 2
        tab.setTitleArgument(new Integer(2002));          // 3
    }

    public int getAñoDefecto() {
        return añoDefecto;
    }

    public void setAñoDefecto(int i) {
        añoDefecto = i;
    }

    public Tab getTab() {
        return tab;
    }

    public void setTab(Tab tab) {
        this.tab = tab;
    }

}</code></pre>
      Establecemos el año por defecto a 2002 (1), hacemos que el título de la
      lista sea visible (2) y asignamos un valor como argumento para ese título
      (3). El título de la lista está definido en los archivos i18n, normalmente
      se usa para los informes, pero podemos visualizarlos también en modo
      lista.<br>
      <h2 id="toc12"><a name="Controladores-Llamar+a+otro+modulo"></a>Llamar a
        otro módulo</h2>
      A veces resulta conveniente llamar programáticamente desde un módulo a
      otro. Por ejemplo, imaginemos que queremos sacar una lista de clientes y
      al pulsar en uno nos aparezca una lista de sus facturas y al pulsar en la
      factura poder editarla. Una manera de conseguir esto es tener un módulo de
      clientes que tenga solo la lista y al pulsar vayamos al modulo de facturas
      haciendo que el tab filtre para mostrar solo las de ese cliente. Vamos a
      verlo. Primero definiríamos el módulo en <em>aplicacion.xml</em> de la
      siguiente forma:<br>
<pre><code class="language-xml">&lt;modulo nombre="FacturasDeClientes"&gt;
    &lt;var-entorno nombre="XAVA_LIST_ACTION" valor="Facturas.listarDeCliente"/&gt;  &lt;!-- 1 --&gt;
    &lt;modelo nombre="Cliente"/&gt;
    &lt;controlador nombre="Print"/&gt;
    &lt;controlador nombre="ListOnly"/&gt;                                           &lt;!-- 2  Innecesario desde v6.0 --&gt;
    &lt;controlador-modo nombre="Void"/&gt;                                          &lt;!-- 3  Innecesario desde v6.0 --&gt;
&lt;/modulo&gt;</code></pre>
      En este modulo solo aparece la lista (sin la parte de detalle) para eso
      decimos que el controlador de modo ha de ser <em>Void</em> (3) y así no
      aparece lo de detalle y lista, y añadimos un controlador llamado <em>ListOnly</em>
      (2) para que sea el modo lista el que aparezca (si ponemos controlador de
      modo <em>Void</em> y nada más por defecto aparecería solo el detalle). A
      partir de v6.0 usar <i>ListOnly</i> y <i>Void</i> no es necesario ya que
      los botones de modo no aparecen en ningún módulo. </div>
    <div class="wiki" style="display: block;">Además, declaramos la variable
      XAVA_LIST_ACTION para que apunte a una acción nuestra, ahora cuando el
      usuario pulse en el vínculo que aparece en cada fila de la lista ejecutará
      nuestra propia acción. Esta acción hemos de declararla en <em>controladores.xml</em>:<br>
<pre><code class="language-xml">&lt;controlador nombre="Facturas"&gt;
    &lt;accion nombre="listarDeCliente" oculta="true"
        clase="org.openxava.test.acciones.ListarFacturasDeCliente"&gt;
        &lt;!-- &lt;usa-objeto nombre="xava_tab"/&gt; A partir de v4m2 podemos usar @Inject --&gt;
    &lt;/accion&gt;
    ...
&lt;/controlador&gt;</code></pre>
      Y el código de la acción:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import java.util.*;

import javax.inject.*;
import org.openxava.actions.*;
import org.openxava.controller.*;
import org.openxava.tab.*;

/**
 * @author Javier Paniza
 */
public class ListarFacturasDeCliente extends BaseAction
    implements IChangeModuleAction,                                             // 1
               IModuleContextAction {                                           // 2

    private int row;                                                            // 3
    @Inject  // A partir de v4m2, si no usamos &lt;usa-objeto/&gt;
    private Tab tab;
    private ModuleContext context;

    public void execute() throws Exception {
        Map claveCliente = (Map) tab.getTableModel().getObjectAt(row);          // 4
        int codigoCliente = ((Integer) claveCliente.get("codigo")).intValue();
        Tab tabFacturas = (Tab)
            context.get("OpenXavaTest", getNextModule(), "xava_tab");           // 5
        tabFacturas.setBaseCondition("${cliente.codigo} = "+codigoCliente);     // 6
    }

    public int getRow() {                                                       // 3
        return row;
    }
    public void setRow(int row) {                                               // 3
        this.row = row;
    }

    public Tab getTab() {
        return tab;
    }
    public void setTab(Tab tab) {
        this.tab = tab;
    }

    public String getNextModule() {                                            // 7
        return "FacturasDeCliente";
    }

    public void setContext(ModuleContext context) {                            // 8
        this.context = context;
    }

    public boolean hasReinitNextModule() {                                     // 9
        return true;
    }

}</code></pre>
      Para poder cambiar de módulo la acción implementa <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChangeModuleAction.html"

          rel="nofollow">IChangeModuleAction</a></em> (1) esto hace que tenga
      que tener un método <em>getNextModule()</em> (7) que sirve para indicar
      cual será el módulo al que cambiaremos después de ejecutar la acción, y <em>hasReinitNextModule()</em>
      (9) para indicar si queremos que se reinicie el módulo al cambiar a él.<br>
      Por otra parte hace que implemente <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IModuleContextAction.html"

          rel="nofollow">IModuleContextAction</a></em> (2) que hace que esta
      acción reciba un objeto de tipo <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/controller/ModuleContext.html"

          rel="nofollow">ModuleContext</a></em> con el método <em>setContext()</em>
      (8). <em>ModuleContext</em> nos permite acceder a objetos de sesión de
      otros módulos, es útil para poder configurar el módulo al que vamos a
      cambiar.<br>
      Desde v4m1 <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

          rel="nofollow">BaseAction</a></em> implementa <em>IModuleContextAction</em>,
      por tanto solo necesitas usar <em>getContext()</em> desde tu método <em>execute()</em>:<br>
<pre><code class="language-java">public class ListarFacturasDeCliente extends BaseAction
    implements IChangeModuleAction,
    //           IModuleContextAction { // Innecesario desde v4m1

    ...
    // private ModuleContext context; // Innecesario desde v4m1

    public void execute() throws Exception {
        ...
        Tab tabFacturas = (Tab)
          getContext().  // Puedes usar getContext() de BaseAction
              get("OpenXavaTest", getNextModule(), "xava_tab");
        ...
    }
    ...
    // public void setContext(ModuleContext context) {  // Not needed since v4m1
    //    this.context = context;
    // }
    ...
}</code></pre>
      Otro detalle es que la acción que se pone como valor para XAVA_LIST_ACTION
      ha de tener un propiedad llamada <em>row</em> (3); antes de ejecuta la
      acción se llena esta propiedad con la fila en la que el usuario ha
      pulsado.<br>
      Teniendo esto en cuenta es fácil entender lo que hace la acción:<br>
      <ul>
        <li>Coge la clave del objeto asociada a la fila pulsada (4), para ello
          usa el tab del modulo actual.</li>
        <li>Accede al tab del módulo al que vamos usando <em>context</em> (5).</li>
        <li>Establece la condición base del tab del módulo al que vamos a ir (6)
          usando la clave obtenida del tab actual.</li>
      </ul>
      <h2 id="toc13"><a name="Controladores-Mostrar una vista nueva (nuevo en v4m2)"></a>Mostrar
        una vista nueva <em>(nuevo en v4m2)</em></h2>
      Como alternativa a cambiar el módulo se puede optar por mostrar una nueva
      vista. Es fácil, solo necesitas usar las APIs disponible en <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ViewBaseAction.html"

          rel="nofollow">ViewBaseAction</a></em>. Ahí hay métodos como <em>showNewView()</em>,
      <em>showView()</em> y <em>returnToPreviousView()</em>. Un ejemplo:<br>
<pre><code class="language-java">public class VerClienteDesdeFactura extends ViewBaseAction {

    public void execute() throws Exception {
        try {
            Object codigo = getView().getValue("cliente.codigo"); // 1
            Map key = new HashMap();
            key.put("codigo", codigo);
            showNewView();                                        // 2
            getView().setModelName("Cliente");                    // 3
            getView().setValues(key);                             // 4
            getView().findObject();                               // 5
            getView().setKeyEditable(false);
            getView().setEditable(false);
            setControllers("Return");                             // 6
        }
        catch (ObjectNotFoundException ex) {
            getView().clear();
            addError("object_not_found");
        }
        catch (Exception ex) {
            ex.printStackTrace();
            addError("system_error");
        }
    }

}</code></pre>
      Esto es el código de una acción que permite visualizar un objeto de otro
      tipo. Primero hemos de memorizar la clave del objeto a leer (1). Después,
      mostramos una nueva vista (2) por medio de <em>showNewView()</em>. Este
      método crea una nueva vista y la establece como vista por defecto, por
      tanto se visualiza. Después de esto cualquier referencia a <em>getView()</em>
      será para la nueva vista (3). Finalmente, rellenamos los valores clave (4)
      y usamos <em>findObject()</em> (5) para cargar los datos en la vista.
      También usamos <em>setControllers()</em> (6) para establecer un nuevo
      conjunto de acciones a mostrar.<br>
      Cuando usamos <em>showNewView()</em> la vista actual se almacena en una
      pila, y podemos traerla de vuelta llamando al método <em>returnToPreviousView()</em>.<br>
      <h2 id="toc14"><a name="Controladores-Cambiar el modelo de la vista actual"></a>Cambiar
        el modelo de la vista actual</h2>
      Si trabajas con una versión anterior a v4m2 una alternativa a mostrar una
      nueva vista es cambiar el modelo de la vista actual. Hacer esto es muy
      sencillo solo hemos de usar las APIs disponible en <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

          rel="nofollow">View</a></em>. Un ejemplo:<br>
<pre><code class="language-java">public void execute() throws Exception {
    try {
        setValoresFactura(getView().getValues());                                // 1
        Object codigo = getView().getValue("producto.codigo");
        Map clave = new HashMap();
        clave.put("codigo", codigo);
        getView().setModelName("Producto");                                      // 2
        getView().setValues(clave);                                              // 3
        getView().findObject();                                                  // 4
        getView().setKeyEditable(false);
        getView().setEditable(false);
    }
    catch (ObjectNotFoundException ex) {
        getView().clear();
        addError("object_not_found");
    }
    catch (Exception ex) {
        ex.printStackTrace();
        addError("system_error");
    }
}</code></pre>
      Este es un extracto de una acción que permite visualizar pulsando la
      acción un objeto de otro tipo. Lo primero que hacemos es guardarnos los
      datos visualizados actualmente (1), para poder dejar la vista como estaba
      cuando volvamos. Después cambiamos el módulo de la vista (2), esto es la
      parte clave. Ahora solo llenamos los valores clave (3) y con <em>findObject()</em>
      (4) hacemos que se rellene lo demás.<br>
      Cuando usamos esta técnica hemos de tener presente que cada módulo tiene
      un solo objeto <em>xava_view</em> activo a la vez, así que si queremos
      volver hacia atrás tenemos que ocuparnos nosotros de poner el modelo y
      vista original en la vista así como de restaurar la información que tenía.<br>
      <h2 id="toc15"><a name="Controladores-Ir+a+una+pagina+JSP"></a>Ir a una
        página JSP</h2>
      El generador automático de vista de OpenXava suele ir bien para la inmensa
      mayoría de los casos, pero puede que nos interese visualizar al usuario
      una página JSP diseñada manualmente por nosotros. Podemos hacer esto con
      una acción como esta:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 * @author Javier Paniza
 */

public class MiAccionBuscar extends BaseAction implements INavigationAction {  // 1

    public void execute() throws Exception {
    }

    public String[] getNextControllers() {                                     // 2
        return new String [] { "MiReferencia" } ;
    }

    public String getCustomView() {                                            // 3
        return "quieresBuscar.jsp";
    }

    public void setKeyProperty(String s) {
    }

}</code></pre>
      Para ir a una vista personalizada (a una página JSP en este caso) hacemos
      que nuestra acción implemente <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/INavigationAction.html"

          rel="nofollow">INavigationAction</a><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ICustomViewAction.html"

          rel="nofollow">ICustomViewAction</a></em> (con hubiera bastado) y de
      esta forma podemos indicar con <em>getNextControllers()</em> (2) los
      siguientes controladores a usar y con <em>getCustomView()</em> (3) la
      página JSP que ha de visualizarse (3).<br>
      <h2 id="toc16"><a name="Controladores-Generar un informe propio con JasperReports"></a>Generar
        un informe propio con JasperReports</h2>
      OpenXava permite al usuario final generar sus propios informes desde el
      modo lista. El usuario puede filtrar, ordenar, añadir/quitar campos,
      cambiar la posición de los campos y entonces generar un informe PDF. Estas
      acciones se ejecutan en una ventana emergente. Si el navegador está
      configurado para bloquear ventanas emergentes, es necesario añadir el
      sitio de la aplicación OpenXava a la lista de excepciones (en desarrollo
      normalmente 'localhost' or '127.0.0.1'), si no no funcionará.<br>
      Pero todas las aplicaciones de gestión no triviales necesitan sus propios
      informes creados programáticamente. Puedes hacer esto fácilmente usando
      JasperReports e integrando tu informe en tu aplicación OpenXava con la
      acción <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/JasperReportBaseAction.html"

          rel="nofollow">JasperReportBaseAction</a></em>.<br>
      En primer lugar tienes que diseñar tu informe JasperReports, puedes
      hacerlo usando el excelente diseñador iReport.<br>
      Una vez hecho eso puedes escribir tu acción de impresión de esta manera:<br>
<pre><code class="language-java">package org.openxava.test.acciones;

import java.util.*;

import net.sf.jasperreports.engine.*;
import net.sf.jasperreports.engine.data.*;

import org.openxava.actions.*;
import org.openxava.model.*;
import org.openxava.test.model.*;
import org.openxava.util.*;
import org.openxava.validators.*;

/**
 * Informe de productos de la subfamilia seleccionada. &lt;p&gt;
 *
 * Usa JasperReports. &lt;br&gt;
 *
 * @author Javier Paniza
 */
public class InformeProductosDeFamiliaAction extends JasperReportBaseAction {  // 1

    private Subfamilia subfamilia;

    public Map getParameters() throws Exception  {                             // 2
        Messages errores =
            MapFacade.validate("FiltroPorSubfamilia", getView().getValues());
        if (errores.contains()) throw new ValidationException(errores);        // 3
        Map parametros = new HashMap();
        parametros.put("familia", getSubfamilia().getFamilia().getDescripcion());
        parametros.put("subfamilia", getSubfamilia().getDescripcion());
        return parametros;
    }

    protected JRDataSource getDataSource() throws Exception {                  // 4
        return new JRBeanCollectionDataSource(
            getSubfamilia().getProductosValues());
    }

    protected String getJRXML() {                                              // 5
        return "Productos.jrxml"; // Para leer del classpath
        //return "/home/javi/Products.jrxml"; // Para leer del sistema de ficheros
    }

    private Subfamilia getSubfamilia() throws Exception {
        if (subfamilia == null) {
            int codigoSubfamilia = getView().getValueInt("subfamilia.codigo");
            subfamilia = XPersistence.getManager().find(
                Subfamilia.class, codigoSubfamilia);
        }
        return subfamilia;
    }

}</code></pre>
      Solo necesitas que tu acción extienda de <em>JasperReportBaseAction</em>
      (1) y sobreescribir los siguientes 3 métodos:<br>
      <ul>
        <li><strong>getParameters()</strong> (2): Un <em>Map</em> con los
          parámetros a enviar al informe, en este caso hacemos también la
          validación de los datos entrados (usando <em>MapFacade.validate()</em>)
          (3).</li>
        <li><strong>getDataSource()</strong> (4): Un <em><a class="wiki_link_ext"

              href="http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRDataSource.html"

              rel="nofollow">JRDataSource</a></em> con los dato a imprimir. En
          este caso una colección de JavaBeans obtenidos llamando a un objeto
          modelo. Si usas EJB EntityBeans CMP2 sé cuidadoso y no hagas un bucle
          sobre una colección de EntityBeans EJB2 dentro de este método, como en
          este caso obtén los datos con una sola llamada EJB.</li>
        <li><strong>getJRXML()</strong> (5): El XML con el diseño JasperReports,
          este archivo puede estar en el classpath. Deberías poner este archivo
          en <i>src/main/resources/informes</i> <i>(nuevo en v7.0)</i>. En
          versiones anteriores a la 7 puedes tener para esto una carpeta de
          código fuente llamada <i>informes</i> en tu proyecto. Otra opción es
          poner este archivo en el sistema de ficheros <em>(nuevo en v2.0.3)</em>,
          esto se consigue especificando la ruta completa del archivo, por
          ejemplo: <em>/home/javi/Productos.jrxml</em> o <em>c:\\informes\\Productos.jrxml</em>
          (empezar con una letra de unidad de windows es reconocido como ruta
          absoluta <em>desde v3.0.3</em>).</li>
      </ul>
      Por defecto el informe es visualizado en una ventana emergente, pero si lo
      deseas puedes sobreescribir el método <em>inNewWindow()</em> para que el
      informa aparezca en la ventana actual.<br>
      Puedes unir varios reportes en un único PDF extendiendo la acción <em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/JasperConcatReportBaseAction.html"

          rel="nofollow">JasperConcatReportBaseAction</a></em>. Útil cuando
      necesitas concatenar varios reportes con diferentes formatos de página
      (landscape, portrait).<br>
      Podemos encontrar más ejemplos de acciones JasperReport en el proyecto
      OpenXavaTest, como <em>InvoiceReportAction</em> para imprimir una Factura
      y <em>MovieReportAction</em> para concatenar reportes. </div>
    <div class="wiki" style="display: block;">También puedes seguir nuestro
      curso de generación de informes <a href="report-course-my-first-report_es.html">aquí</a>.<br>
      <h2 id="toc17"><a name="cargar-fichero-ajax"></a>Cargar y procesar un
        fichero desde el cliente (AJAX) <i>(nuevo en v6.2)</i></h2>
      Esta caracteristica te permite subir un archivo binario desde el navegador
      del cliente, sin recargar la página y usando arrastrar y soltar.
      <div class="wiki" style="display: block;">El primer paso es crear una
        clase transitoria que incluya una propiedad de tipo <i>org.apache.commons.fileupload.FileItem</i>:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">package com.tuempresa.tuaplicacion.modelo;

import java.time.*;
import org.apache.commons.fileupload.*;
import org.openxava.annotations.*;

public class MostrarFichero {
		
    @FileItemUpload(acceptFileTypes="text/plain", maxFileSizeInKb=200) // Since v6.6
    private FileItem fichero;
	
    private LocalDate fecha;

    public FileItem getFichero() {
        return fichero;
    }

    public void setFichero(FileItem fichero) {
        this.fichero = fichero;
    }

    public LocalDate getFecha() {
        return fecha;
    }

    public void setFecha(LocalDate fecha) {
        this.fecha = fecha;
    }

}</code></pre> </div>
      <div class="wiki" style="display: block;">Fíjate como puedes tener más
        propiedades aparte de <i>fichero</i>, como una propiedad fecha en este
        caso. A partir de v6.6 puedes anotar tu propiedad <i>FileItem</i> con <a

          href="https://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/FileItemUpload.html"><i>@FileItemUpload</i></a>
        para limitar los archivo a subir, en <i>acceptFileTypes</i> pones una <a

          href="https://docs.w3cub.com/http/basics_of_http/mime_types/complete_list_of_mime_types">lista
          de tipos mime</a> separada por comas y puedes usar asteriscos, y con <i>maxFileSizeInKb
          </i>indicas el tamaño máximo del archivo. En este caso sólo se pueden
        subir archivos de texto plano de 200 Kb como mucho.</div>
      <div class="wiki" style="display: block;">Ahora has de definir un módulo
        en <i>aplicacion.xml</i> porque las clases transitorias no se reconocen
        como módulos automáticamente:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-xml">&lt;modulo nombre="MostrarFichero"&gt;
	&lt;modelo nombre="MostrarFichero"/&gt;
	&lt;controlador nombre="MostrarFichero"/&gt;
&lt;/modulo&gt;</code></pre> </div>
      <div class="wiki" style="display: block;">Después define el controlador
        con la acción para procesar el archivo. Añádelo en <i>controladores.xml</i>:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-xml">&lt;controlador nombre="MostrarFichero"&gt;
	&lt;accion nombre="mostrarFichero"
		clase="com.tuempresa.tuaplicacion.acciones.AccionMostrarFichero"/&gt;    
&lt;/controlador&gt;</code></pre> </div>
      <div class="wiki" style="display: block;">Finalmente, la lógica que
        procesa el fichero en tu acción:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">package com.tuempresa.tuaplicacion.acciones;

import java.time.*;
import org.apache.commons.fileupload.*;
import org.openxava.actions.*;

public class AccionMostrarFichero extends ViewBaseAction {

	public void execute() throws Exception {
		FileItem fichero = (FileItem) getView().getValue("fichero");
		LocalDate fecha = (LocalDate) getView().getValue("fecha");
		addMessage(fichero.getName() + " mostrado en: " + fecha);
		addMessage(fichero.getName() + " contenido: " + fichero.getString());
	}
	
}</code></pre> </div>
      <div class="wiki" style="display: block;">En este caso simplemente
        visualizamos el contenido como una cadena en un mensaje, pero tú puedes
        hacer cualquier cosa que te plazca con el fichero usando la API de <i>FileItem</i>.
        Fíjate como usar las otras propiedades de la vista, <i>fecha</i> en
        este caso, se hace de la manera habitual.<br>
        <h2 id="toc17"><a name="Controladores-Cargar y procesar un fichero desde el cliente (formulario multipart)"></a>Cargar
          y procesar un fichero desde el cliente (formulario multipart)</h2>
        <i>Si usas v6.2 o superior utiliza FileItem en vez de formularios
          multipart, como se explica en la sección precedente</i></div>
      <div class="wiki" style="display: block;"> Esta característica nos permite
        procesar en nuestra aplicación OpenXava un archivo binario (o varios)
        enviado desde el cliente. Esto está implementado en un contexto
        HTTP/HTML con formularios multipart de HTML, aunque el código OpenXava
        es tecnologicamente neutral, por ende nuestra acción será portable a
        otros entornos sin recodificar.<br>
        Para cargar un archivo lo primero es crear una acción para ir al
        formulario en donde el usuario pueda escoger su archivo. Esta acción
        tiene que implementar <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ILoadFileAction.html"

            rel="nofollow">ILoadFileAction</a></em>, de esta forma:<br>
<pre><code class="language-java">public class CambiarImagen extends BaseAction implements ILoadFileAction {  // 1
    ...
    public void execute() throws Exception {                                // 2
        showDialog();                                                       // 3
    }

    public String[] getNextControllers() {                                  // 4
        return new String [] { "CargarImagen" };
    }

    public String getCustomView() {                                         // 5
        return "xava/editors/cambiarImagen";
    }

    public boolean isLoadFile() {                                           // 6
        return true;
    }

    ...
}</code></pre>
        Una acción <em>ILoadFileAction</em> (1) es también una <em><a class="wiki_link_ext"

            href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/INavigationAction.html"

            rel="nofollow">INavigationAction</a></em> que nos permite navegar a
        otros controladores (4) y a otra vista personalizada (5). El nuevo
        controlador (4) normalmente tendrá un acción del tipo <em><a class="wiki_link_ext"

            href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IProcessLoadedFileAction.html"

            rel="nofollow">IProcessLoadedFileAction</a></em>. El método <em>isLoadFile()</em>
        (6) devuelve true en el caso de que queramos navegar al formulario para
        cargar el archivo, puedes usar la lógica en <em>execute()</em> (2) para
        determinar este valor. La vista personalizada es (5) un JSP con tu
        propio formulario para cargar el fichero. Opcionalmente podemos hacer
        que el formulario para escoger los archivos esté en un diálogo llamando
        a <em>showDialog()</em> (3).<br>
        Un ejemplo de JSP para una vista personalizada puede ser:<br>
<pre><code class="language-php">&lt;%@ include file="../imports.jsp"%&gt;

&lt;jsp:useBean id="style" class="org.openxava.web.style.Style" scope="request"/&gt;

&lt;table&gt;
&lt;th align='left' class=&lt;%=style.getLabel()%&gt;&gt;
&lt;fmt:message key="introducir_nueva_imagen"/&gt;
&lt;/th&gt;
&lt;td&gt;
&lt;input name = "nuevaImagen" class=&lt;%=style.getEditor()%&gt; type="file" size='60'/&gt;
&lt;/td&gt;
&lt;/table&gt;</code></pre>
        Como se puede ver, no se especifica el formulario HTML, porque el módulo
        OpenXava ya tiene uno incluido.<br>
        La última pieza es la acción para procesar los archivos cargados:<br>
<pre><code class="language-java">public class CargarImagen extends BaseAction
    implements INavigationAction, IProcessLoadedFileAction {          // 1

    private List fileItems;
    private View view;
    private String newImageProperty;

    public void execute() throws Exception {
        Iterator i = getFileItems().iterator();                       // 2
        while (i.hasNext()) {
            FileItem fi = (FileItem)i.next();                         // 3
            String fileName = fi.getName();
            if (!Is.emptyString(fileName)) {
                getView().setValue(getNewImageProperty(), fi.get());  // 4
            }
        }
    }

    public String[] getNextControllers() {
        return DEFAULT_CONTROLLERS;
    }

    public String getCustomView() {
        return DEFAULT_VIEW;
    }

    public List getFileItems() {
        return fileItems;
    }

    public void setFileItems(List fileItems) {                        // 5
        this.fileItems = fileItems;
    }
    ...
}</code></pre>
        La acción implementa <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IProcessLoadedFileAction.html"

            rel="nofollow">IProcessLoadedFileAction</a></em> (1), así la acción
        tiene que tener un método <em>setFileItem()</em> (5) para recibir la
        lista de los archivos descargados. Esta lista puede procesarse en <em>execute()</em>
        (2). Los elementos de la colección son del tipo <em><a class="wiki_link_ext"

            href="http://commons.apache.org/fileupload/apidocs/org/apache/commons/fileupload/FileItem.html"

            rel="nofollow">org.apache.commons.fileupload.FileItem</a></em> (4)
        (del proyecto fileupload de apache commons). Llamando a <em>get()</em>
        (4) en el <em>file item</em> podemos acceder al contenido del archivo
        cargado.<br>
        <h2 id="toc18"><a name="Controladores-Sobreescribir los controladores por defecto (nuevo en v2.0.3)"></a>Sobreescribir
          los controladores por defecto <em>(nuevo en v2.0.3)</em></h2>
        Los controladores en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-controllers.xml"><em>openxava/src/main/resources/xava/default-controllers.xml</em></a>
        (antes de v7.0 era <em>OpenXava/xava/default-controllers.xml</em>,
        antes de v2.0.3 era <em>OpenXava/xava/controllers.xml</em>) son usados
        por OpenXava para dar a la aplicación un comportamiento por defecto.
        Muchas veces la forma más fácil de modificar el comportamiento de
        OpenXava es creando nuestros propios controladores y usandolos en
        nuestras aplicaciones, es decir, podemos crear un controlador llamado <em>MiTipico</em>,
        y usarlo en vez del <em>Typical</em> que viene con OpenXava.<br>
        Otra opción es sobreescribir un controlador por defecto de OpenXava.
        Para poder sobreescribir un controlador por defecto solo necesitamos
        crear en nuestra aplicación un controlador con el mismo nombre que el de
        defecto. Por ejemplo, si queremos refinar el comportamiento de las
        colecciones para nuestra aplicación tenemos que crear un controlador <em>Collection</em>
        en nuestro <em>controladores.xml</em>, como sigue:<br>
<pre><code class="language-xml">&lt;controlador nombre="Collection"&gt;
    &lt;accion nombre="new"
        clase="org.openxava.actions.CreateNewElementInCollectionAction"/&gt;
    &lt;accion nombre="hideDetail"                                           &lt;!-- 1 --&gt;
        clase="org.openxava.test.acciones.MiOcultarDetalle"/&gt;
    &lt;accion nombre="save"
        clase="org.openxava.actions.SaveElementInCollectionAction"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="remove"
        clase="org.openxava.actions.RemoveElementFromCollectionAction"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="edit"
        clase="org.openxava.actions.EditElementInCollectionAction"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="view"
        clase="org.openxava.actions.EditElementInCollectionAction"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;  &lt;!-- No obligatorio desde v4m2 --&gt;
    &lt;/accion&gt;
    &lt;accion nombre="next" &lt;!-- Nuevo desde v7.3 --&gt; 
	imagen="next.gif" 
	icono="skip-next"
        clase="org.openxava.actions.EditElementInCollectionAction"&gt;
        &lt;poner propiedad="openDialog" valor="false"/&gt;  
	&lt;poner propiedad="nextValue" valor="1"/&gt;  
    &lt;/accion&gt; 
    &lt;accion nombre="previous" &lt;!-- Nuevo desde v7.3 --&gt;
	imagen="previous.gif" 
	icono="skip-previous"
        clase="org.openxava.actions.EditElementInCollectionAction"&gt;
        &lt;poner propiedad="openDialog" valor="false"/&gt;  
	&lt;poner propiedad="nextValue" valor="-1"/&gt;  
    &lt;/accion&gt; 
    &lt;action name="deleteSelected" &lt;!-- Nuevo desde v7.4 --&gt;
	confirm="true"
	icon="delete" 
	image="delete.gif" 
	in-each-row="true"
	class="org.openxava.actions.DeleteSelectedInCollectionAction"/&gt;	
&lt;/controlador&gt;</code></pre>
        En este case solo sobreescribimos el comportamiento de la accion <em>hideDetail</em>
        (1). Pero tenemos que declarar todas las acciones del controlador
        original, porque OpenXava confia en todas estas acciones para funcionar;
        no podemos borrar o renombrar acciones.</div>
      <div class="wiki" style="display: block;">A partir de la v7.5, si
        desarrollas una librería o un framework en lugar de una aplicación
        final, puedes definir los controladores de tu librería en <i>controladores-defecto-ext.xml</i>
        (en lugar de <i>controladores.xml</i>). De este modo, en tu librería o
        framework puedes sobrescribir un controlador de OpenXava, pero el
        usuario de tu librería también podrá sobrescribirlo si lo desea,
        respetando siempre la siguiente prioridad: primero <i>controladores.xml</i>
        (aplicación), luego <i>controladores-defecto-ext.xml</i>
        (librería/framework) y, por último, <i>controladores-defecto.xml</i>
        (OpenXava).<br>
        <h2 id="toc19"><a name="Controladores-Mostrar+un+dialogo+modal+(nuevo+en+v4m2)"></a>Mostrar
          un diálogo modal <em>(nuevo en v4m2)</em></h2>
        Puedes mostrar un diálogo llamando al método <em>showDialog()</em> de <em><a

            class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ViewBaseAction.html"

            rel="nofollow">ViewBaseAction</a></em>. Supongamos que la vista
        actual contiene una dirección (incrustable), y queremos mostrar un
        diálogo para rellenar la dirección completa en una sola línea.<br>
        La declaración en <em>controladores.xml</em> podría ser:<br>
<pre><code class="language-xml">&lt;controlador nombre="Direccion"&gt;
    &lt;accion nombre="anadirDireccionCompleta"
        clase="org.openxava.test.acciones.IrAnadirDireccionCompleta"/&gt;
&lt;/controlador&gt;</code></pre>
        Aquí tienes el código de la acción:<br>
<pre><code class="language-java">public class IrAnadirDireccionCompleta extends ViewBaseAction {           // 1

    public void execute() throws Exception {
        showDialog();                                                     // 2
        getView().setTitleId("introduce_direccion_completa");             // 3
        // getView().setTitle("Introduce la dirección completa");         // 4
        getView().setModelName("DireccionUnaLinea");                      // 5
        setControllers("AnadirDireccionCompleta", "Dialog");              // 6
        // addActions("AnadirDireccionCompleta.anadir", "Dialog.cancel"); // 7
    }

}</code></pre>
        Básicamente, muestra una nueva vista dentro de un diálogo (2), le pone
        el título (3), el contenido (5) y los botones del diálogo (6).<br>
        Tiene que extender de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ViewBaseAction.html"

            rel="nofollow">ViewBaseAction</a></em> (1) para poder usar <em>showDialog()</em>.<br>
        Los botones del diálogo son especificados mediante <em>setControllers</em>
        (6) o <em>addActions</em> (7). El controlador 'Dialog' contiene una
        acción 'cancel' por defecto. Aunque puedes especificar tu propia acción
        de cancelar, de hecho si tienes una acción llamada 'cancel' o 'cancelar'
        se ejecutará automáticamente cuando el usuario cierre la ventana del
        diálogo.<br>
        El título se puede establecer usando <em>View.setTitleId</em>() (3), en
        este caso indicas un id de los archivos i18n (etiquetas o mensajes), o
        puedes usar <em>View.setTitle()</em> (4) para poner el título
        literalmente. Si no específicas un título OpenXava genera uno a partir
        de la descripción de la acción.<br>
        Para poner el contenido del diálogo usamos <em>View.setModelName()</em>
        para asignar una entidad o <a class="wiki_link" href="view_es.html#Vista-Clase%20transitoria:%20Solo%20para%20crear%20vistas">clase
          transitoria</a> a la vista actual. En nuestro caso es una clase
        transitoria, <em>DireccionUnaLinea</em>:<br>
<pre><code class="language-java">public class DireccionUnaLinea {

    private String direccionCompleta;

    public String getDireccionCompleta() {
        return direccionCompleta;
    }

    public void setDireccionCompleta(String direccionCompleta) {
        this.direccionCompleta = direccionCompleta;
    }

}</code></pre>
        Solo una propiedad. Por tanto el diálogo tendrá solo una etiqueta con un
        campo de texto para entrar la dirección completa. Veamos el controlador
        <em>AddFullAddress</em> que define los botones del diálogo:<br>
<pre><code class="language-xml">&lt;controlador nombre="AnadirDireccionCompleta"&gt;
    &lt;accion nombre="anadir"
        clase="org.openxava.test.acciones.AnadirDireccionCompleta"/&gt;
&lt;/controlador&gt;</code></pre>
        Como puedes ver declaramos la acción principal del diálogo, cuyo código
        es:<br>
<pre><code class="language-java">public class AnadirDireccionCompleta extends ViewBaseAction {

    public void execute() throws Exception {
        String direccionCompleta = getView().getValueString("direccionCompleta"); // 1
        String [] trozos = direccionCompleta.split(" ");
        View vistaDireccion = getPreviousView().getSubview("direccion");          // 2
        String [] propiedades = { "provincia.id", "municipio", "codigoPostal", "viaPublica" };
        int iTrozos = trozos.length;
        for (int iPropiedades = 0; iPropiedades &lt; 4 &amp;&amp; iTrozos &gt; 0; iPropiedades++) {
            vistaDireccion.setValue(propiedades[iPropiedades], trozos[--iTrozos]);
        }
        StringBuffer viaPublica = new StringBuffer();
        for (int i = 0; i &lt;= iTrozos; i++) {
            street.append(trozos[i]);
            street.append(' ');
        }
        addressView.setValue("viaPublica", viaPublica.toString().trim());

        closeDialog();                                                           // 3
   }

}</code></pre>
        Nota como usando <em>getView()</em> (1) puedes acceder al contenido del
        diálogo, porque ahora la vista actual es el diálogo. También puedes
        acceder a la vista anterior (2) (la vista en el fondo, la vista
        principal del módulo en este caso) para manipularla, usando <em>getPreviousView()</em>.
        Para descartar el diálogo y establecer como vista actual la vista
        anterior llamamos a <em>closeDialog()</em> (3).<br>
        <h2 id="toc20"><a name="Controladores-Mostrar+un+dialogo+modal+(solo+en+v4m1)"></a>Mostrar
          un diálogo modal <em>(solo en v4m1)</em></h2>
        <span style="color: #ff0000;"><em><strong>Nota</strong>:</em> <em>Esta
            forma de usar diálogos no está disponible desde</em><em><span style="color: #ff0000;">
              v4m2</span></em></span><br>
        Mostrar un diálogo es declarativo. Puedes coger cualquier de tus
        acciones existentes, marcarlas con <em>mostrar-dialogo="true"</em> en
        su declaración <em>&lt;accion /&gt;</em>, y cuando la acción se ejecute
        un diálogo aparecerá.<br>
        Hagamos un ejemplo. Supongamos que la vista actual contiene una
        dirección (incrustable), y queremos una acción para mostrar un diálogo
        que permita rellenar la dirección en una sola línea.<br>
        La declaración de la acción en <em>controladores.xml</em> puede ser:<br>
<pre><code class="language-xml">&lt;controlador nombre="Direccion"&gt;

    &lt;accion nombre="anadirDireccionCompleta"
        mostrar-dialogo="true"                     &lt;!-- 1 --&gt;
        clase="org.openxava.test.acciones.IrAnadirDireccionCompleta"&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;           &lt;!-- 2 --&gt;
        &lt;usa-objeto nombre="xava_previousViews"/&gt;  &lt;!-- 3 --&gt;
    &lt;/accion&gt;

&lt;/controlador&gt;</code></pre>
        Tan solo con usar <em>mostrar-dialogo="true"</em> podemos mostrar el
        diálogo. Por defecto el dialogo muestra la vista actual, por tanto hemos
        de cambiar la vista actual si queremos definir el contenido del diálogo,
        y cuando el diálogo se cierre restauraremos la vista original. Para
        hacer esto inyectamos <em>xava_view</em> (2) para manipular la vista
        actual y <em>xava_previousViews</em> para navegar a una nueva vista y
        después poder volver.<br>
        Aquí tienes el código de la acción:<br>
<pre><code class="language-java">public class IrAnadirDireccionCompleta
    extends ViewBaseAction                                        // 1
    implements IChangeControllersAction {                         // 2

    public void execute() throws Exception {
        showNewView();                                            // 3
        getView().setTitleId("introduce_direccion_completa");     // 4
        // getView().setTitle("Introduce la dirección completa");
        getView().setModelName("DireccionUnaLinea");              // 5
    }

    public String[] getNextControllers() throws Exception {
        return new String [] { "AnadirDireccionCompleta" };       // 1
    }

}</code></pre>
        Básicamente, muestra una nueva vista (3), establece su título (4), su
        contenido (5) y los botones del diálogo (1).<br>
        Tiene que extender de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ViewBaseAction.html"

            rel="nofollow">ViewBaseAction</a></em> (1) para poder usar <em>showNewView()</em>
        (que utiliza <em>xava_previousViews</em>) y <em>getView()</em> (que
        utiliza <em>xava_view</em>), e implementa <em>IChangeControllersAction</em>
        (1) para definir las acciones correspondiente a los botones, en este
        caso las acciones son del controladore <em>AddFullAddress</em>.<br>
        El título se puede establecer usando <em>View.setTitleId</em>() (4) en
        este caso indicas un id del los archivos i18n (etiquetas o mensajes), o
        puedes usar <em>View.setTitle()</em> para poner el título literalmente.
        Si no especificas título OpenXava genera uno a partir de la descripción
        de la acción.<br>
        Establecemos el contenido del diálogo usando <em>View.setModelName()</em>
        para asignar una entidad o <span class="wiki_link"><a class="wiki_link"

            href="view_es.html#toc32">clase transitoria</a></span> a la vista
        actual. En nuestro caso es la clase transitoria, <em>DireccionUnaLinea</em>:<br>
<pre><code class="language-java">public class DireccionUnaLinea {

    private String direccionCompleta;

    public String getDireccionCompleta() {
        return direccionCompleta;
    }

    public void setDireccionCompleta(String direccionCompleta) {
        this.direccionCompleta = direccionCompleta;
    }

}</code></pre>
        Tan solo una propiedad. Así el diálogo tendrá solo una etiqueta con un
        editor de texto para entrar la dirección completa.<br>
        Veamos el controlador <em>AnadirDireccionCompleta</em> que define los
        botones del diálogo:<br>
<pre><code class="language-xml">&lt;controlador nombre="AnadirDireccionCompleta"&gt;

    &lt;accion nombre="anadir" ocultar-dialogo="true"  &lt;!-- 1 --&gt;
        clase="org.openxava.test.acciones.AnadirDireccionCompleta"&gt;
        &lt;usa-objeto nombre="xava_previousViews"/&gt;   &lt;!-- 2 --&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;
    &lt;/accion&gt;

    &lt;accion nombre="cancelar"                       &lt;!-- 3 --&gt;
        clase="org.openxava.actions.CancelAction"&gt;
        &lt;usa-objeto nombre="xava_previousViews"/&gt;   &lt;!-- 2 --&gt;
        &lt;usa-objeto nombre="xava_view"/&gt;
    &lt;/accion&gt;

&lt;/controlador&gt;</code></pre>
        Como puedes ver el dialogo tendrá 2 botones: "anadir" y "cancelar".
        Ambas acciones ocultan el dialogo al finalizar, "add" porque declara <em>ocultar-dialogo="true"</em>
        y "cancelar" por causa de su nombre (3); las acciones llamadas
        "cancelar" por defecto ocultan el diálogo. Ambas acciones inyectan <em>xava_previousViews</em>
        (2) para volver a la vista previa.<br>
        La acción <em>CancelAction</em> está incluida en OpenXava. El código de
        <em>AnadirDireccionCompleta</em> es el siguiente:<br>
<pre><code class="language-java">public class AnadirDireccionCompleta extends ViewBaseAction {

    public void execute() throws Exception {
        String direccionCompleta = getView().getValueString("direccionCompleta"); // 1
        String [] trozos = direccionCompleta.split(" ");
        View vistaDireccion = getPreviousView().getSubview("direccion");          // 2
        String [] propiedades = { "provincia.id", "municipio", "codigoPostal", "viaPublica" };
        int iTrozos = trozos.length;
        for (int iPropiedades = 0; iPropiedades &lt; 4 &amp;&amp; iTrozos &gt; 0; iPropiedades++) {
            vistaDireccion.setValue(propiedades[iPropiedades], trozos[--iTrozos]);
        }
        StringBuffer viaPublica = new StringBuffer();
        for (int i = 0; i &lt;= iTrozos; i++) {
            street.append(trozos[i]);
            street.append(' ');
        }
        addressView.setValue("viaPublica", viaPublica.toString().trim());

        returnToPreviousView();                                                  // 3
   }

}</code></pre>
        Fíjate como usando <em>getView()</em> (1) puedes acceder al contenido
        del diálogo, porque ahora la vista actual es el diálogo. También puedes
        acceder a la vista anterior (2) (la vista en el fondo, la vista
        principal del módulo en este caso) para manipularla, usando <em>getPreviousView()</em>.
        Para descartar la vista del diálogo y establecer como actual la vista
        previa llamamos a <em>returnToPreviousView()</em> (3).<br>
        Esta lógica de navegación entre vistas no es algo específico de los
        diálogos, de hecho puedes quitar el <em>mostrar-dialogo="true"</em> y
        ver como funciona perfectamente, aunque sin diálogo.</div>
    </div>
    <div class="wiki" style="display: block;"> <a name="sobrescribir-accion-de-ir-a-lista"></a>
      <h2>Sobrescribir acción de ir a lista</h2>
      La acción para ir a lista desde modo detalle:<br>
      <img src="files/controllers_es030.png" alt="">
      <div class="wiki" style="display: block;"><br>
      </div>
      <div class="wiki" style="display: block;">Es por defecto <i>Mode.list</i>.
        Puedes sobrescribirla definiendo tu propio <i>controlador-modo</i> para
        tu módulo. Para eso, define tu módulo en <i>aplicacion.xml</i> (en <i>src/main/resources/xava</i>
        para v7 o superior y en la carpeta <i>xava</i> para versiones
        anteriores) en tu proyecto de esta forma:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-xml">&lt;modulo nombre="Autor"&gt;
	&lt;modelo nombre="Autor"/&gt; 
	&lt;controlador nombre="Typical"/&gt;
	&lt;controlador-modo nombre="MiIrModoLista"/&gt;
&lt;/modulo&gt;</code></pre>
      </div>
      <div class="wiki" style="display: block;">Después define tu controlador <i>MiIrModoLista</i>
        en tu <i>controladores.xml</i>, así:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-xml">&lt;controlador nombre="MiIrModoLista"&gt;
	&lt;hereda-de controlador="Mode"/&gt;
	&lt;accion nombre="list"
		icono="chevron-left"
		clase="org.openxava.test.acciones.IrModoLista"
		atajo-de-teclado="F9"/&gt;
&lt;/controlador&gt;</code></pre> </div>
      <div class="wiki" style="display: block;">Fíjate que extendemos el
        controlador <i>Mode</i> y sobrescribimos la acción <i>list</i>. Ahora
        sólo nos queda escribir el código de la acción, que podría ser algo así:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

public class IrModoLista extends GoListAction {
	
	public void execute() throws Exception {
		super.execute();
		addMessage("volvemos_a_lista"); 
	}

}</code></pre> </div>
      <div class="wiki" style="display: block;">La lógica puede ser la que tú
        quieras, en este caso simplemente refinamos el comportamiento estándar
        extendiendo <i>GoListAction</i>.<br>
      </div>
      <h2 id="toc21"><a name="Controladores-Todos los tipos de acciones"></a>Todos
        los tipos de acciones</h2>
      Se puede observar por lo visto hasta ahora que nosotros podemos hacer que
      nuestra acción implemente una interfaz u otra para hacer que se comporte
      de una manera u otra. A continuación se enumeran las interfaces que
      tenemos disponibles para nuestras acciones:<br>
      <ul>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAction.html"

              rel="nofollow"> IAction</a></strong>: Interfaz básica que
          obligatoriamente ha de implementar toda acción.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAvailableAction.html"

              rel="nofollow"> IAvailableAction</a></strong>: <em>(Nuevo en
            v5.9)</em> La acción puede estar disponible para el usuario u
          oculta, dependiendo de una condición programática.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChainAction.html"

              rel="nofollow"> IChainAction</a></strong>: Permite encadenar
          acciones, es decir que cuando se termine de ejecutar nuestra acción
          ejecute otra inmediatamente.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChainActionWithArgv.html"

              rel="nofollow"> IChainActionWithArgv</a></strong>: <em>(Nuevo en
            v2.2)</em> Es un refinamiento de <em>IChainAction</em>. Permite
          enviar como argumentos valores para llenar las propiedades de la
          acción encadenada antes de ejecutarla.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChangeControllersAction.html"

              rel="nofollow"> IChangeControllersAction</a></strong>: Para
          cambiar los controladores (y por ende las acciones) disponible al
          usuario. <em>Nuevo en v4m2:</em> Puedes usar los métodos <em>setControllers()</em>,
          <em>returnToPreviousControllers()</em>, <em>setDefaultControllers()</em>,
          <em>addActions()</em>, <em>removeActions()</em> and <em>clearActions()</em>
          de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente esta interfaz.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChangeModeAction.html"

              rel="nofollow"> IChangeModeAction</a></strong>: Para cambiar de
          modo, de lista a detalle o viceversa. <em>Nuevo en v4m1:</em> Puedes
          usar el método <em>setNextMode()</em> de <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente esta interfaz.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IChangeModuleAction.html"

              rel="nofollow"> IChangeModuleAction</a></strong>: Para cambiar de
          módulo.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ICustomViewAction.html"

              rel="nofollow"> ICustomViewAction</a></strong>: Para que la vista
          sea una página JSP propia.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IForwardAction.html"

              rel="nofollow"> IForwardAction</a></strong>: Redirecciona a una
          URI interna en la misma aplicación, como un JSP o un Servlet, o a una
          URL absoluta en internet <em>(URL absoluta nuevo en v4m1)</em>. No es
          como <em>ICustomViewAction</em>, <em>ICustomViewAction</em> hace que
          la vista que está dentro de nuestro interfaz generado con OpenXava
          (que a su vez puede estar dentro de un portal) sea nuestro JSP,
          mientras que <em>IForwardAction</em> redirecciona de forma completa a
          la URI indicada.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IHideActionAction.html"

              rel="nofollow"> IHideActionAction</a></strong>, <strong><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IHideActionsAction.html"

              rel="nofollow">IHideActionsAction</a></strong>: Permite ocultar
          una acción o un conjunto de acciones en la interfaz de usuario <em>(nuevo
            en v2.0)</em>. <em>Nuevo en v4m2:</em> Puedes usar los métodos <em>removeActions()</em>
          and <em>clearActions()</em> de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente estas interfaces. Otra alternativa para ocultar y mostrar
          acciones es que la acción a ocultar implemente <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAvailableAction.html"

              rel="nofollow">IAvailableAction</a></em> <em>(nuevo en v5.9)</em>.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IJavaScriptPostAction.html"

              rel="nofollow"> IJavaScriptPostAction</a></strong>: Ejecuta código
          JavaScript después de la ejecución normal de la acción.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IJDBCAction.html"

              rel="nofollow"> IJDBCAction</a></strong>: Permite usar
          directamente JDBC en una acción. Recibe un <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/util/IConnectionProvider.html"

              rel="nofollow">IConnectionProvider</a></em>. Funciona de forma
          parecida a un <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/calculators/IJDBCCalculator.html"

              rel="nofollow">IJDBCCalculator</a></em> (ver capítulo 3).</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/ILoadFileAction.html"

              rel="nofollow"> ILoadFileAction</a></strong>: Permite navegar a
          una vista con la posibilidad de cargar un archivo.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IModelAction.html"

              rel="nofollow"> IModelAction</a></strong>: Una acción que recibe
          el nombre del modelo.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IModuleContextAction.html"

              rel="nofollow"> IModuleContextAction</a></strong>: Recibe un <em><a

              class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/controller/ModuleContext.html"

              rel="nofollow">ModuleContext</a></em> para poder acceder a objetos
          de sesión de otros módulos, por ejemplo. <em>Nuevo en v4m1:</em>
          Puedes usar el método <em>getContext()</em> de <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente esta interfaz.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IMultipleForwardAction.html"

              rel="nofollow">IMultipleForwardAction</a></strong>: <em>(Nuevo en
            v4.3)</em> Redirecciona a varias URIs internas en la misma
          aplicación, como JSPs o Servlets; o a varias URLs absolutas en
          internet.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/INavigationAction.html"

              rel="nofollow">INavigationAction</a></strong>: Extiende de <em>IChangeControllersAction</em>
          y <em>ICustomViewAction</em>.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IOnChangePropertyAction.html"

              rel="nofollow"> IOnChangePropertyAction</a></strong>: Este
          interfaz lo ha de implementar las acciones que reaccionan a un cambio
          de valor de propiedad en la interfaz gráfica.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IProcessLoadedFileAction.html"

              rel="nofollow"> IProcessLoadedFileAction</a></strong>: Procesa una
          lista de archivos cargados desde el cliente al servidor.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IPropertyAction.html"

              rel="nofollow">IPropertyAction</a></strong>: Esta accíon está
          asociada a una propiedad (visualizada en la interfaz de usuario),
          antes de ejecutarla el nombre de la propiedad y la vista contenedora
          son inyectados <em>(nuevo en in v2.0.2)</em>.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IRequestAction.html"

              rel="nofollow"> IRequestAction</a></strong>: Recibe un request de
          Servlets. Hace que nuestras acciones se vinculen a la tecnología de
          servlets/jsp, por lo que es mejor evitarla. Pero a veces es necesario
          cierta flexibilidad. <em>Nuevo en v4m1:</em> Puedes usar el método <em>getRequest()</em>
          de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente esta interfaz.</li>
        <li><strong><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IShowActionAction.html"

              rel="nofollow"> IShowActionAction</a></strong>, <strong><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IShowActionsAction.html"

              rel="nofollow">IShowActionsAction</a></strong>: Permite mostrar
          una acción o un grupo de acciones previamente ocultadas en una <em>IHideAction(s)Action</em>
          <em>(nuevo en v2.0)</em>. <em>Nuevo en v4m2:</em> Puedes usar el
          método <em>addActions()</em> de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

              rel="nofollow">BaseAction</a></em> en lugar de implementar
          directamente estas interfaces. Otra alternativa para ocultar y mostrar
          acciones es que la acción a mostrar implemente <em><a class="wiki_link_ext"

              href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IAvailableAction.html"

              rel="nofollow">IAvailableAction</a></em> <em>(nuevo en v5.9)</em>.</li>
      </ul>
      Mucha veces en vez de implementar directamente estas interfaces tu acción
      puede extender de una acción base, tal como <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/BaseAction.html"

          rel="nofollow">BaseAction</a></em>, que ya los implemente.<br>
      Para saber más como funcionan las acciones lo ideal es mirar la API
      JavaDoc del paquete <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/package-summary.html"

          rel="nofollow">org.openxava.actions</a></em> y ver los ejemplos
      disponibles en el proyecto <em>OpenXavaTest</em>.<br>
      <span style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 13988.5px; width: 1px;"><span

          style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 13988.5px; width: 1px;">&lt;subcontrolador
          controlador="nombre" imagen="imagen.gif" modo="detail|list|ALL"/&gt;</span></span>
    </div>
  </body>
</html>
