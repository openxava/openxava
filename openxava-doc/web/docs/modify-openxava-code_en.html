<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Modify OpenXava code</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
      <h1 id="toc0"> <span id="breadcrumbs"> <span id="openxava"> <a href="https://www.openxava.org/">
              <span>o</span>pen<span>x</span>ava </a> </span> / <a href="index_en.html">documentation</a>
          / </span> Modify OpenXava code </h1>
      You can modify the OpenXava code to adapt it to your needs, fix a bug, add
      a new feature, etc.<br>
      <h2 id="toc1">Since v7.0</h2>
      <div class="wiki" style="display: block;">OpenXava source code is no
        longer included in OpenXava distribution, now you have to get it from <a
          href="https://github.com/openxava/openxava">OpenXava GitHub repository</a>.
        The code of OpenXava framework is in the project <i>openxava</i> inside
        the repository:</div>
      <img src="files/openxava-in-github_en.png" alt="">
      <div class="wiki" style="display: block;">You can modify, build and
        install it using Git, Maven and your favorite IDE. If you're not used to
        Git and Maven, we present here a detailed guide to modify OpenXava code
        for your application using OpenXava Studio.</div>
      <div class="wiki" style="display: block;">
        <h3>Dowload code from GitHub</h3>
        <p>First go to the <a href="https://github.com/openxava/openxava">OpenXava
            page in GitHub</a> en copy the repository URL:</p>
        <img src="files/copy-openxava-repository-url_en.png" alt="">
        <p>Then open the Git perspective in OpenXava Studio, for that click on
          the button on right top part:</p>
        <img src="files/add-perspective-eclipse.png" alt=""></div>
      <div class="wiki" style="display: block;">It shows a dialog, choose the
        Git perspective:</div>
      <div class="wiki" style="display: block;"><img src="files/choose-git-perspective-eclipse.png"
          alt=""><br>
        <p>In Git perspective click on <i>Clone a Git repository</i>:</p>
        <img src="files/clone-git-repository-option-eclipse.png" alt="">
        <p>Given that you have copied it from GitHub page, the OpenXava
          repository URI has been automatically filled, just click on <i>Next</i>:</p>
        <img src="files/clone-git-repository-step1-eclipse.png" alt="">
        <p>It shows all the branches, just click on <i>Next</i> again:</p>
        <img src="files/clone-git-repository-step2-eclipse.png" alt="">
        <p>Finally click on <i>Finish</i>:</p>
        <img src="files/clone-git-repository-step3-eclipse.png" alt="">
        <p>Now be patient while the repository code is downloaded from GitHub:</p>
        <img src="files/progress-importing-repository-eclipse.png" alt="">
        <p>After it you have the <i>openxava </i>repository listed in left
          side of OpenXava Studio:</p>
        <img src="files/openxava-repository-git-perspective-eclipse.png" alt="">
        <p>Congratulations! The OpenXava repository is downloaded in your
          computer and configured in OpenXava Studio. The next step to import
          the <i>openxava</i> project into your workspace.</p>
        <h3>Import openxava into workspace</h3>
        <p>First, go back to Java perspective, to that click on the
          corresponding button on top right side in OpenXava Studio:</p>
        <img src="files/change-to-java-perspective-eclipse.png" alt="">
        <p>To import the <i>openxava</i> project click on <i>File &gt;
            Import...</i>: </p>
        <img src="files/file-import-eclipse.png" alt="">
        <p>Now select <i>Git &gt; Projects from Git (with smart import)</i> and
          click on <i>Next</i>:</p>
        <img src="files/import-step1-eclipse.png" alt="">
        <p>Choose <i>Existing local repository</i> and click on <i>Next</i>:</p>
        <img src="files/import-step2-eclipse.png" alt="">
        <p>Select the <i>openxava</i> repository and click on <i>Next</i>:</p>
        <img src="files/import-step3-eclipse.png" alt="">
        <p>Uncheck all projects and leave only <i>openxava\openxava</i>
          checked. Click on <i>Finish</i>:</p>
        <img src="files/import-step4-eclipse.png" alt=""></div>
      <div class="wiki" style="display: block;">Finally the <i>openxava</i>
        project with all its code is in your workspace:<br>
        <img src="files/openxava-project-in-workspace-eclipse.png" alt="">
        <p>Now you can modify the openxava code at your taste.</p>
        <h3>Modify OpenXava code</h3>
        <p>First, make sure that the version in <i>openxava/pom.xml</i> is a
          SNAPSHOT. Open the <i>pom.xml</i> inside the <i>openxava</i>
          project, and verify the version:</p>
        <img src="files/openxava-pom-snapshot-version-eclipse.png" alt="">
        <p>If you're using the master branch surely the version will be a
          SNAPSHOT, if not modify it adding the -SNAPSHOT suffix. It means that
          is a working version, not with fixed features but ready to be
          modified.</p>
        <p>Now, it's the moment to modify the code. For example, edit the <i>NewAction.java</i>
          code and add a print, like this:</p>
        <img src="files/modifying-new-action.png" alt="">
        <p>Then make a <i>mvn install</i> on <i>openxava</i>, in this way:</p>
        <img src="files/openxava-maven-install-eclipse.png" alt="">
        <p>This time it's not needed to do a <i>mvn clean</i> because we have
          just downloaded the code and <i>target</i> is empty, but if you get
          new code from GitHub (with a pull) you should do a <i>mvn clean</i>
          too.</p>
        <p>Now, go to your project, edit the <i>pom.xml</i> and put the <i>openxava.version</i>
          property to the value of the OpenXava SNAPSHOT version you have in
          your workspace:</p>
        <img src="files/invoicing-pom-update-to-snapshot.png" alt="">
        <p>This is important, otherwise you project will not use the openxava
          you have modified, but the official version from Maven Central.</p>
        <p>Then do a <i>mvn clean</i> on your project:</p>
        <img src="files/invoicing-maven-clean.png" alt="">
        <p>And then a <i>mvn install</i> on your project:</p>
        <img src="files/invoicing-maven-install.png" alt="">
        <p>Congrutalions! Your project is ready to run with your modified
          OpenXava. Try it.</p>
        <h3>Shorten modification cycle</h3>
        <p>The above steps are for the very first modification. From now on, the
          next modifications can be easy, just three steps:</p>
        <ol>
          <li>Modify openxava code.</li>
          <li>Do a mvn install on openxava.</li>
          <li>Do a mvn war:exploded in your project. For this you can use Run As
            &gt; Build Maven ...</li>
        </ol>
        <p>Even more, you can start your application in debug mode, clicking on
          the bug:</p>
        <img src="files/debug-button-eclipse.png" alt="">
        <p>In this way you can modify the code in openxava and see the result
          instantly, even without relaunching your application or reloading the
          browser. Just like magic.</p>
        <h3>Hot code reloading <i>(new in v7.5)</i></h3>
        <p>Starting with version 7.5, you can shorten the modification cycle
          even further thanks to <a href="hot-code-reloading_en.html">hot code
            reloading</a>, if you use the JDK included in OpenXava Studio 7 R4.
          However, for OpenXava code to also be reloaded, you need to make a
          small modification in your launcher class:</p>
        <pre><code class="java">public static void main(String[] args) throws Exception {
    AppServer.run("yourapp", "../openxava/target/classes"); 
}
</code></pre>
        <p>Note how we add the path to the <i>openxava</i> project classes as
          the second argument. In this example, we assume that <i>openxava</i>
          and your project are in the same directory. This way, the modification
          cycle is reduced to almost nothing. You just need to modify the Java
          code in <i>openxava</i> and use your application in the browser — you
          don't even need to reload to see the changes. </p>
        <p>Hot code reloading does not include web resources (JSP, HTML, CSS,
          etc.). For that, you’ll need to copy the files (using your operating
          system) from <i>openxava/src/main/resources/META-INF/resources</i> to
          <i>yourapp/target/yourapp</i>. This way, you'll see the changes just
          by refreshing the browser. Also, it won't clutter your project because
          everything in target is deleted when you run <i>mvn clean</i>.</p>
        <h3>Branches</h3>
        <p>In the above example we have modified directly the master branch, not
          a problem at all because you have no rights to do a push against the
          OpenXava repository. However, you can make a more advanced use of
          branches. As a minimum, you should create a branch before doing any
          change and do the change in your own branch. After the change is
          complete and works nicely, you can merge the code with master.</p>
        If you want to contribute code to OpenXava, you should create an account
        in GitHub, then create a clone of the openxava repository in your
        account. Follow the above steps importing the code from your own
        repository instead of from openxava/openxava. In this way, you can
        create a branch, do a push, and create a pull request against the
        original OpenXava repository, where it could be approved and included in
        OpenXava for the next official release.</div>
      <h2>Since v6.4</h2>
    </div>
    <div class="wiki" style="display: block;"><i>You have to define
        OpenXava.buildOpenXava (or OpenXava.buildAddons) in External Tools of
        Eclipse (OpenXava Studio). To learn how to run and define Ant targets in
        Eclipse <a href="ant-from-eclipse_en.html">follow these instructions</a>.</i></div>
    <div class="wiki" style="display: block;"><i><b>You need a JDK to run the
          Ant targets</b>. In Eclipse go to External Tools &gt;
        OpenXava.buildOpenXava (or buildAddons) &gt; JRE and choose a JDK.
        Sometimes it can fails if the tools.jar in the classpath does not match
        the used JDK.&nbsp;</i>
      <div class="wiki" style="display: block;"><i>If you have <b>problems</b>
          compiling <b>with accents</b> go to External Tools &gt;
          OpenXava.buildOPenxava (or buildAddons) &gt; Common &gt; Encoding : <b>ISO-8859-1</b>
          (not needed since v6.5.2)<br>
        </i></div>
    </div>
    <div class="wiki" style="display: block;"><br>
    </div>
    <div class="wiki" style="display: block;">To modify OpenXava Java code, XML
      or i18n files:</div>
    <div class="wiki" style="display: block;">
      <ul>
        <li>Modify the code on <i>OpenXava/src</i>, <i>OpenXava/xava</i> or <i>OpenXava/i18n</i>.
          These are not source code folders for Eclipse, so Eclipse doesn't
          compile them.</li>
        <li>Execute the Ant target <i>buildOpenXava</i> from <i>OpenXava/build.xml</i>.
          It compiles the OpenXava Java code and creates <i>openxava.jar</i>.</li>
        <li>Refresh OpenXava project in Eclipse (F5).</li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. This copy the new <i>openxava.jar</i> to your
          project.</li>
        <li>Refresh your own project in Eclipse (F5).</li>
      </ul>
      <p>To modify Addons Java code or XML:</p>
      <ul>
        <li>Modify the code on <i>Addon/src</i> or <i>Addons/xava</i>. These
          are not source code folders for Eclipse, so Eclipse doesn't compile
          them. </li>
        <li>Execute the Ant target <i>buildAddons</i> from <i>OpenXava/build.xml</i>.
          It compiles the Addons Java code and copy XML code.</li>
        <li>Refresh Addons project in Eclipse (F5).<br>
        </li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. </li>
        <li>Refresh your own project in Eclipse (F5).</li>
      </ul>
      <p>To modify JSP/HTML/JavaScript/CSS:</p>
      <ul>
        <li>Modify the code on <i>OpenXava/web</i>.<br>
        </li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. This copy all the web resources to your project.</li>
      </ul>
      Since v6.4 though you can still navigate to OpenXava code from your own
      code inside Eclipse, you cannot edit that code directly, it's read only.
      So, you have to look for that class in <i>OpenXava/src</i> yourself,
      modify it and follow the above steps.</div>
    <i> </i>
    <div class="wiki" style="display: block;">
      <h2 id="toc2">Until v6.3.2</h2>
      To modify OpenXava Java code, XML or i18n files:
      <ul>
        <li>Modify the code on <i>OpenXava/src</i>, <i>OpenXava/xava</i> or <i>OpenXava/i18n</i>.
        </li>
        <li>Press the <i>Build All</i> button or Ctrl-B.</li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. This create a new <i>openxava.jar</i> into your
          project.</li>
        <li>Refresh your own project in Eclipse (F5).</li>
      </ul>
      <p>To modify Addons Java code or XML:</p>
      <ul>
        <li>Modify the code on <i>Addon/src</i> or <i>Addons/xava</i>. </li>
        <li>Press the <i>Build All</i> button or Ctrl-B.</li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. </li>
        <li>Refresh your own project in Eclipse (F5).</li>
      </ul>
      <p>To modify JSP/HTML/JavaScript/CSS:</p>
      <ul>
        <li>Modify the code on <i>OpenXava/web</i>.<br>
        </li>
        <li>Execute the Ant target <i>updateOX</i> from the <i>build.xml</i>
          of your own project. This copy all the web resources to your project.</li>
      </ul>
      <p></p>
    </div>
  </body>
</html>
