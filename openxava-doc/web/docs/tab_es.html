<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Datos tabulares - OpenXava</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
    <link rel="stylesheet" href="highlight/highlight.css">
    
    <link rel="stylesheet" href="highlight/highlightjs-copy.css"><script src="highlight/highlight.js"></script>
    
    <script src="highlight/highlightjs-copy.js"></script><script>window.addEventListener('DOMContentLoaded',function(){hljs.addPlugin(new CopyButtonPlugin({ autohide: false }));hljs.highlightAll();});</script>    
  </head>
  <body>
    <div class="wiki" id="content_view" style="display: block;">
      <h1 id="toc0"><a name="Datos tabulares"></a> <span id="breadcrumbs"> <span

            id="openxava"> <a href="https://www.openxava.org/"> <span>o</span>pen<span>x</span>ava </a> </span> / <a

            href="index_es.html">documentación</a> / </span> Datos tabulares</h1>
      <strong>Guía de referencia</strong>: <a class="wiki_link" href="model_es.html">Modelo</a> | <a

        class="wiki_link" href="view_es.html">Vista</a> | <strong>Datos tabulares</strong> | <a

        class="wiki_link" href="mapping_es.html">Mapeo objeto/relacional</a> | <a

        class="wiki_link" href="controllers_es.html">Controladores</a> | <a

        class="wiki_link" href="application_es.html">Aplicación</a> | <a

        class="wiki_link" href="customizing_es.html">Personalización</a>
      <hr>
      <div id="toc">
        <h1 class="nopad">Tabla de contenidos</h1>
        <div style="margin-left: 1em;"><a href="#Datos%20tabulares">Datos tabulares</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Propiedades%20iniciales%20y%20resaltar%20filas">Propiedades iniciales y resaltar filas</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Filtros+y+condicion+base">Filtros y condición base</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Select%20parcial%20%28nuevo%20en%20v5.6%29">Select parcial (nuevo en v5.6)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Select+integro">Select íntegro</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Orden%20por%20defecto">Orden por defecto</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Propiedades%20editables">Propiedades editables (nuevo en v7.6)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Valores+por+defecto+para+los+tabs+a+nivel+de+aplicacion+%28new+v4m4%29">Valores por defecto para los tabs a nivel de aplicación (new v4m4)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Sumatorio%20de%20columna%20%28nuevo%20en%20v4.1%29">Sumatorio de columna (nuevo en v4.1)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos%20tabulares-Escoger%20un%20editor%20%28nuevo%20en%20v4.6%29">Escoger un editor (nuevo en v4.6)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Inhabilitar+personalizacion">Inhabilitar personalización</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Varios+formatos+de+presentacion+usando+editores+%28nuevo+en+v5.7%29">Varios formatos de presentación usando editores (nuevo en v5.7)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Quitar+los+graficos+de+modo+lista+%28nuevo+en+v5.7%29">Quitar los gráficos de modo lista (nuevo en v5.7)</a></div>
        <div style="margin-left: 2em;"><a href="#Datos+tabulares-Buscar%20por%20el%20contenido%20de%20una%20colecci%C3%B3n%20desde%20modo%20lista">Buscar por el contenido de una colección desde modo lista (nuevo en v6.4)</a></div>
      </div>
      Datos tabulares son aquellos que se visualizan en formato de tabla. Cuando creamos un módulo de OpenXava convencional el usuario puede gestionar la información sobre ese componente con una lista como ésta:<br>
      <img src="files/tab_es010.jpg" alt="tab_es010.jpg" title="tab_es010.jpg"><br>
      Esta lista permite al usuario:<br>
      <ul>
        <li>Filtrar por cualquier columna o combinación de ellas.</li>
        <li>Ordenar por cualquier columna con un simple click.</li>
        <li>Visualizar los datos paginados, y así podemos leer eficientemente tablas de millones de registros.</li>
        <li>Personalizar la lista: añadir, quitar y cambiar de orden las columnas (con el lapicito que hay en la parte superior izquierdas). Las personalizaciones se recuerdan por cada usuario.</li>
        <li>Acciones genéricas para procesar la lista: Como la de generar un informe en PDF, exportar a Excel o borrar los registros seleccionados.</li>
      </ul>
      La lista por defecto suele ir bien, y además el usuario puede personalizarsela. Sin embargo, a veces conviene modificar el comportamiento de la lista. Esto se hace mediante la anotación <em>@Tab</em> dentro de la definición de la entidad.<br>
      La sintaxis de <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Tab.html"

          rel="nofollow">@Tab</a></em> es:<br>
      <pre><code class="language-java">@Tab(
    name="nombre",                           // 1
    filter=clase del filtro,                 // 2
    rowStyles=array de @RowStyle,            // 3
    properties="propiedades",                // 4
    editableProperties="propiedades editables", // 5  Nuevo en v7.6
    baseCondition="condición base",          // 6
    defaultOrder="orden por defecto",        // 7
    editor="editor por defecto",             // 8  Nuevo en v4.6
    editors="todos los editores disponibles" // 9  Nuevo en v5.7
)
public class MiEntidad {</code></pre>
      <ol>
        <li><strong>name</strong> (opcional): Podemos definir varios tabs para una entidad (usa <em><a

              class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Tabs.html"

              rel="nofollow">@Tabs</a></em>para versiones anteriores a la 6.1), y ponerle un nombre a cada uno. Este nombre se usará después para indicar que tab queremos usar (normalmente en <em>aplicación.xml</em> al definir un módulo).</li>
        <li><strong><a class="wiki_link" href="#Datos+tabulares-Filtros+y+condicion+base">filter</a></strong> (opcional): Permite definir programáticamente un filtro a realizar sobre los valores que introduce el usuario cuando quiere filtrar.</li>
        <li><strong><a class="wiki_link" href="#Datos%20tabulares-Propiedades%20iniciales%20y%20resaltar%20filas">rowStyles</a></strong> (varios, opcional): Una forma sencilla de especificar una estilo de visualización diferente para ciertas filas. Normalmente para resaltar filas que cumplen cierta condición. Especificamos un array de <em><a

              class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowStyle.html"

              rel="nofollow">@RowStyle</a></em>, así podemos usar varios estilo por tab.</li>
        <li><strong><a class="wiki_link" href="#Datos%20tabulares-Propiedades%20iniciales%20y%20resaltar%20filas">properties</a></strong> (opcional): La lista de propiedades a visualizar inicialmente. Pueden ser calificadas. El sufijo + <em>(nuevo en v4.1)</em> se puede añadir a una propiedad para mostrar la <a

            class="wiki_link" href="tab_es.html#sumatorio-columna">suma de la columna</a> abajo.</li>
        <li><strong><a class="wiki_link" href="#Datos%20tabulares-Propiedades%20editables">editableProperties</a></strong> (opcional): <em>(Nuevo en v7.6)</em> Lista de propiedades que pueden ser editadas directamente en la lista. Solo se permiten propiedades simples editables y referencias con <em>@DescriptionsList</em>.</li>
        <li><strong><a class="wiki_link" href="#Datos+tabulares-Filtros+y+condicion+base">baseCondition</a></strong> (opcional): Es una condición que aplicará siempre a los datos visualizados añadiendose a las que pueda poner el usuario.</li>
        <li><strong><a class="wiki_link" href="#Datos%20tabulares-Orden%20por%20defecto">defaultOrder</a></strong> (opcional): Para especificar el orden en que aparece los datos en la lista inicialmente.</li>
        <li><strong><a class="wiki_link" href="#Datos%20tabulares-Escoger%20un%20editor%20%28nuevo%20en%20v4.6%29">editor</a></strong> (opcional): <em>(Nuevo en v4.6)</em> Editor de <em>default-editors.xml</em> o <em>editores.xml</em> usado para visualizar la lista. Se usa para el formato por defecto, si la lista tiene varios formatos los otros permanecen inalterados.</li>
        <li><strong><a class="wiki_link" href="#Datos+tabulares-Varios+formatos+de+presentacion+usando+editores+%28nuevo+en+v5.7%29">editores</a></strong> (opcional): <em>(Nuevo en v5.7)</em> Lista de editores separados por coma usados para visualizar la lista. Cada editor corresponde a un formato disponible para los usuarios. Los editores se declaran en <em>default-editors.xml</em> o <em>editores.xml</em>.</li>
      </ol>
      <h2 id="toc1"><a name="Datos tabulares-Propiedades iniciales y resaltar filas"></a>Propiedades iniciales y resaltar filas</h2>
      La personalización más simple es indicar las propiedades a visualizar inicialmente:<br>
      <pre><code class="language-java">@Tab(
    rowStyles=@RowStyle(style="row-highlight", property="tipo", value="fijo"),
    properties="nombre, tipo, comercial.nombre, direccion.municipio," +
        "comercial.nivel.descripcion, direccion.estado.nombre"
)</code></pre>
      Vemos como podemos poner propiedades calificadas (que pertenecen a referencias) hasta cualquier nivel. Estas serán las propiedades que salen la primera vez que se ejecuta el módulo, después cada usuario puede escoger cambiar las propiedades que quiere ver.<br>
      En este caso vemos también como se indica un <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowStyle.html"

          rel="nofollow">@RowStyle</a></em>; estamos diciendo que aquellos objetos cuya propiedad <em>tipo</em> tenga el valor <em>fijo</em> han de usar el estilo <em>row-highlight</em>. El estilo ha de definirse en la hoja de estilos CSS. El estilo <em>row-highlight</em> (<em>highlight</em> en versiones anteriores a la v4m3) ya viene predefinido con OpenXava, pero puedes definir tus propios estilos mediante el fichero <em>custom.css</em> (nuevo en v4.5) en <i>src/main/webapp/xava/style</i> (desde v7) o en <em>web/xava/style</em> (hasta v6).<em></em> El resultado visual del anterior tab es:<br>
      <img src="files/tab_es020.jpg" alt="tab_es020.jpg" title="tab_es020.jpg"><br>
      <h2 id="toc2"><a name="Datos+tabulares-Filtros+y+condicion+base"></a>Filtros y condición base</h2>
      Una técnica habitual es combinar un filtro con una condición base:<br>
      <pre><code class="language-java">@Tab(name="Actuales",
    filter=FiltroAñoActual.class,
    properties="año, numero, sumaImportes, iva, cantidadLineas, pagada, cliente.nombre",
    baseCondition="${año} = ?"
)
</code></pre>
      La condición tiene la sintaxis SQL, ponemos <em>?</em> para los argumentos y los nombres de propiedades entre <em>${}</em>. En este caso usamos el filtro para dar valor al argumento. El código del filtro es:<br>
      <pre><code class="language-java">package org.openxava.test.filtros;

import java.util.*;

import org.openxava.filters.*;

/**
 * @author Javier Paniza
 */

public class FiltroAñoActual implements IFilter {            // (1)

    public Object filter(Object o) throws FilterException {  // (2)
        Calendar cal = Calendar.getInstance();
        cal.setTime(new java.util.Date());
        Integer año = new Integer(cal.get(Calendar.YEAR));
        Object [] r = null;
        if (o == null) {                                    // (3)
            r = new Object[1];
            r[0] = año;
        }
        else if (o instanceof Object []) {                  // (4)
            Object [] a = (Object []) o;
            r = new Object[a.length + 1];
            r[0] = año;
            for (int i = 0; i &lt; a.length; i++) {
                r[i+1]=a[i];
            }
        }
        else {                                              // (5)
            r = new Object[2];
            r[0] = año;
            r[1] = o;
        }

        return r;
    }

}</code></pre>
      Un filtro recoge los argumentos que el usuario teclea para filtrar la lista y los procesa devolviendo lo que al final se envía a OpenXava para que haga la consulta. Como se ve ha de implementar <em>IFilter</em> (1) lo que lo obliga a tener un método llamado <em>filter</em> (2) que recibe un objeto que el valor de los argumentos y devuelve los argumentos que al final serán usados. Estos argumentos pueden ser nulo (3), si el usuario no ha metidos valores, un objeto simple (5), si el usuario a introducido solo un valor o un array de objetos (4), si el usuario a introducidos varios valores. El filtro ha de contemplar bien todos los casos. En el ejemplo lo que hacemos es añadir delante el año actual, y así se usa como argumento a la condición que hemos puesto en nuestro tab.<br>
      Resumiendo el tab que vemos arriba solo sacará las facturas correspondientes al año actual.<br>
      Podemos ver otro caso:<br>
      <pre><code class="language-java">@Tab(name="AñoDefecto",
    filter=FiltroAñoDefecto.class,
    properties="año, numero, cliente.numero, cliente.nombre, sumaImportes, " +
        "iva, cantidadLineas, pagada, importancia",
    baseCondition="${año} = ?"
)
</code></pre>
      En este caso el filtro es:<br>
      <pre><code class="language-java">package org.openxava.test.filtros;

import java.util.*;

import org.openxava.filters.*;

/**
 * @author Javier Paniza
 */

public class FiltroAñoDefecto extends BaseContextFilter {    // (1)

    public Object filter(Object o) throws FilterException {
        if (o == null) {
            return new Object [] { getAñoDefecto() };        // (2)
        }
        if (o instanceof Object []) {
            List c = new ArrayList(Arrays.asList((Object []) o));
            c.add(0, getAñoDefecto());                       // (2)
            return c.toArray();
        }
        else {
            return new Object [] { getAñoDefecto(), o };     // (2)
        }
    }

    private Integer getAñoDefecto() throws FilterException {
        try {
            return getInteger("xavatest_añoDefecto");        // (3)
        }
        catch (Exception ex) {
            ex.printStackTrace();
            throw new FilterException(
            "Imposible obtener año defecto asociado a esta sesión");
        }
    }

}</code></pre>
      Este filtro desciende de <em>BaseContextFilter</em>, esto le permite acceder al valor de los objetos de sesión de OpenXava. Vemos como usa un método <em>getAñoDefecto()</em> (2) que a su vez llama a <em>getInteger()</em> (3) el cual (al igual que <em>getString()</em>, <em>getLong()</em> o el más genérico <em>get()</em>) nos permite acceder al valor del objeto <em>xavatest_añoDefecto</em>. Esto objeto lo definimos en nuestro archivo <em>controladores.xml</em> de esta forma:<br>
      <pre><code class="language-xml">&lt;objeto nombre="xavatest_añoDefecto" clase="java.lang.Integer" valor="1999"/&gt;</code></pre>
      Las acciones lo pueden modificar y tiene como vida la sesión del usuario y es privado para cada módulo. De esto se habla más profundamente en el <a

        class="wiki_link" href="controllers_es.html">capítulo 7</a>.<br>
      Esto es una buena técnica para que en modo lista aparezcan unos datos u otros según el usuario o la configuración que éste haya escogido.<br>
      También es posible acceder a variables de entorno dentro de un filtro de tipo <em>BaseContextFilter</em>, usando el método <em>getEnvironment()</em>, de esta forma:<br>
      <pre><code class="language-java">new Integer(getEnvironment().getValue("XAVATEST_AÑO_DEFECTO"));</code></pre>
      Para aprender más sobre variable de entorno ver el <a class="wiki_link"

        href="controllers_es.html">capítulo 7 sobre controladores</a>.<br>
        <br>
	  Para ver cómo añadir seguridad a nivel de registro a tu aplicación usando
	  <i>filter</i> y <i>baseCondition</i> en el <i>@Tab</i> mira la documentación sobre 
      <a href="restricting-data-by-user_es.html">restringir datos por usuario/rol.</a>.<br>
                
      <h2 id="toc3"><a name="Datos tabulares-Select parcial (nuevo en v5.6)"></a>Select parcial <em>(nuevo en v5.6)</em></h2>
      En <em>baseCondition</em> puedes escribir la sentencia <em>select</em> a partir de la clausula FROM, para hacerlo empieza la condición con <em>from</em>:<br>
      <pre><code class="language-java">@Tab(name="DeValencia",
    baseCondition="from Cliente e, in (e.provincias) p where p.id = 'V'")</code></pre>
      Usa la sintaxis de JPQL usando <em>e</em> como alias para la entidad principal.<br>
      Esta opción es mejor que usar un select íntegro porque la lista de propiedades la genera OpenXava, así el usuario puede personalizar la lista mientras que el desarrollador todavía tiene la opción de hacer consultas sofisticadas.<br>
      <h2 id="toc4"><a name="Datos+tabulares-Select+integro"></a>Select íntegro</h2>
      Tenemos la opción de poner el select completo para obtener los datos del tab. Desde v4.5 se usa JPQL para la sintaxis:<br>
      <pre><code class="language-java">@Tab(name="SelectIntegro",
    properties="codigo, descripcion, familia",
    baseCondition=
        "select e.codigo, e.descripcion, f.descripcion " +
        "from Subfamilia e, Familia f " +
        "where e.codigoFamilia  = f.codigo"
)</code></pre>
      La implementación actual requiere que se use <em>e</em> como alias para la entidad principal.<br>
      <br>
      Hasta v4.4.x se usaba SQL:<br>
      <pre><code class="language-java">@Tab(name="SelectIntegro",
    properties="codigo, descripcion, familia",
    baseCondition=
        "select" +
        "    ${codigo}, ${descripcion}, XAVATEST.FAMILIA.DESCRIPCION " +
        "from " +
        "    XAVATEST.SUBFAMILIA, XAVATEST.FAMILIA " +
        "where " +
        "    XAVATEST.SUBFAMILIA.FAMILIA = " +
        "    XAVATEST.FAMILIA.CODIGO"
)</code></pre>
      Esto es mejor usarlo solo en casos de extrema necesidad. No suele ser necesario, y al usarlo el usuario no podrá personalizarse la vista.<br>
      <h2 id="toc5"><a name="Datos tabulares-Orden por defecto"></a>Orden por defecto</h2>
      Por último, establecer un orden por defecto es harto sencillo:<br>
      <pre><code class="language-java">@Tab(name="Simple", properties="año, numero, fecha",
    defaultOrder="${año} desc, ${numero} desc"
}</code></pre>
      Este orden es solo el inicial, el usuario puede escoger otro con solo pulsar la cabecera de una columna.<br>
      <h2 id="toc5b"><a name="Datos tabulares-Propiedades editables"></a>Propiedades editables <em>(nuevo en v7.6)</em></h2>
      OpenXava permite definir propiedades que pueden ser editadas directamente en la lista, sin necesidad de entrar al detalle del registro. Para ello se utiliza el atributo <em>editableProperties</em> de la anotación <em>@Tab</em>:<br>
      <pre><code class="language-java">@Tab(
    properties="numero, descripcion, precioUnitario, familia.descripcion",
    editableProperties="precioUnitario, familia.descripcion"
)</code></pre>
      En este ejemplo, hemos declarado como editables <em>precioUnitario</em> que es una propiedad simple y <em>familia.descripcion</em> que es una referencia que se visualiza con un combo, gracias a la anotación <em>@DescriptionsList</em> en la entidad. El resultado es el siguiente:<br>
      <img src="files/tab_es025.png" alt="tab_es025.png" title="tab_es025.png"><br>
      Solo se permiten propiedades simples editables y referencias con <em>@DescriptionsList</em>. Las propiedades calculadas, propiedades con anotaciones <em>@Formula</em> y <em>@Calculation</em> no están permitidas. Tampoco se permiten propiedades que sean clave (<em>@Id</em>), de solo lectura (<em>@ReadOnly</em>), versiones (<em>@Version</em>) o transitorias (<em>@Transient</em>).<br>
      <br>
      Al editar una propiedad en la lista, el valor se guarda automáticamente y se muestra un mensaje de confirmación. 
      Si hay validaciones configuradas para la propiedad, estas se aplicarán normalmente y se mostrarán los mensajes 
      de error correspondientes. ¡Ojo! porque no se ejecuta la acción <em>save</em> del módulo para grabar el valor,
      ni tampoco se ejecutan las acciones <em>@OnChange</em>. Es decir, se ejecutan las validaciones a nivel 
      de modelo (anotaciones, setters, métodos de retrollamada, etc.), pero no a nivel de controlador (en las acciones).
      Lo cual tiene sentido dado que la vista de detalle en la que confían estas acciones no está disponible en la lista.<br>
      <h2 id="toc6"><a name="Datos+tabulares-Valores+por+defecto+para+los+tabs+a+nivel+de+aplicacion+(new+v4m4)"></a><a

          name="valores-por-defecto-para-los-tabs"></a>Valores por defecto para los tabs a nivel de aplicación <em>(new v4m4)</em></h2>
      Puedes definir valor por defecto para todos (o seleccionados) <em>@Tab</em>s de tu aplicación de una vez. Para hacerlo, crea un archivo <em>valores-defecto-tabs.xml</em> en la carpeta <i>src/main/resources/xava (</i>simplemente <em>xava</em> antes de v7) de tu aplicación, tal como muestra el siguiente ejemplo:<br>
      <pre><code class="language-xml">&lt;?xml version = "1.0" encoding = "ISO-8859-1"?&gt;

&lt;!DOCTYPE valores-defecto-tabs SYSTEM "dtds/valores-defecto-tabs.dtd"&gt;

&lt;valores-defecto-tabs&gt;

    &lt;tab&gt;
        &lt;filtro clase="org.openxava.test.filtros.FiltroAnoActivo"/&gt;
        &lt;condicion-base&gt;${ano} = ?&lt;/condicion-base&gt;

        &lt;para-modelo modelo="Albaran"/&gt;
        &lt;para-modelo modelo="Factura"/&gt;
    &lt;/tab&gt;

    &lt;tab&gt;
        &lt;propiedades&gt;año, numero, fecha&lt;/propiedades&gt;
        &lt;orden-defecto&gt;${numero} desc&lt;/orden-defecto&gt;

        &lt;para-modelo modelo="Albaran"/&gt;
    &lt;/tab&gt;

    &lt;tab&gt;
        &lt;filtro clase="org.openxava.filters.UserFilter"/&gt;
        &lt;condicion-base&gt;${usuario} = ?&lt;/condicion-base&gt;

        &lt;excepto-para-modelo modelo="Usuario"/&gt;
    &lt;/tab&gt;

    &lt;tab&gt;
        &lt;orden-defecto&gt;${oid} asc&lt;/orden-defecto&gt;
        &lt;para-todos-los-modelos/&gt;
    &lt;/tab&gt;

&lt;/valores-defecto-tabs&gt;</code></pre>
      El elemento <em>&lt;tab/&gt;</em> sigue la sintaxis de <a class="wiki_link"

        href="tab-xml_es.html">los tabs en los Componentes XML</a>. Con la adición de <em>&lt;para-modelo/&gt;</em>, <em>&lt;excepto-para-modelo/&gt;</em> y <em>&lt;para-todos-los-modelos/&gt;</em> usados para aplicar los valores a las entidades deseadas.<br>
      Con estos elementos <em>tab</em> defines <em>valores por defecto</em> para los tabs de tus entidades, por lo tanto los valores usados en los <em>@Tab</em>s definidos en tus entidades siempre tienen preferencia sobre estos.<br>
      <h2 id="toc7"><a name="Datos tabulares-Sumatorio de columna (nuevo en v4.1)"></a><a

          name="sumatorio-columna"></a>Sumatorio de columna <em>(nuevo en v4.1)</em></h2>
      Para mostrar la suma de todos los valores de una columna al final de la lista sólo has de añadir el símbolo + al nombre de la propiedad, como sigue:<br>
      <pre><code class="language-java">@Tab( properties = "año, numero, descripcion, importe+" )</code></pre>
      En este caso se mostrará la suma de la columna <em>importe</em>, tal como muestra la siguiente imagen:<br>
      <img src="files/tab_es030.jpg" alt="tab_es030.jpg" title="tab_es030.jpg"><br>
      Sólo se puede aplicar el sumatorio a las propiedades numéricas no calculadas.<br>
      <h2 id="toc8"><a name="Datos tabulares-Escoger un editor (nuevo en v4.6)"></a>Escoger un editor (<em>nuevo en v4.6</em>)</h2>
      Un editor es el código real (normalmente un JSP) que visualiza la lista al usuario. Por defecto, el editor que OpenXava usa para visualizar los datos tabulares es una lista con paginación, filtrado, ordenación y búsqueda, pero podemos especificar nuestro propio editor para visualizar un tab concreto usando el atributo <em>editor</em> en <em>@Tab</em>.<br>
      Por ejemplo, si tenemos una lista de entidades <em>Cliente</em> y queremos visualizarla usando una interfaz de usuario personalizada, como una fila de fichas, lo puedes hacer así:<br>
      <pre><code class="language-java">@Tab ( name ="Fichas", editor="ListaFichasCliente",
    properties="codigo, nombre, tipo, direccion.ciudad, direccion.provincia.nombre"
)</code></pre>
      En este caso el editor <em>ListaFichasCliente</em> se usará para visualizar y editar los datos tabulares, en lugar de la de por defecto. Hemos de definir nuestro editor <em>ListaFichasCliente</em> en el archivo <em>editores.xml</em> en la carpeta <i>src/main/resources/xava</i> (simplemente <i>xava</i> antes de v7.0) de nuestro proyecto:<br>
      <pre><code class="language-xml">&lt;editor nombre="ListaFichasCliente" url="fichasClienteListEditor.jsp"/&gt;</code></pre>
      También hemos de escribir el código JSP para el editor en <em>fichasClienteListEditor.jsp</em>.<br>
      Esta característica es para cambiar el editor para un tab concreto de una entidad. Si lo que queremos es cambiar el editor para todos los tabs de cierta entidad a nivel de aplicación es mejor configurarlo usando el archivo <em>editores.xml</em>.<br>
      Veáse la sección <a class="wiki_link" href="customizing_es.html#Personalizacion-Editores-Editores+para+tabs+%28modo+lista%29+%28nuevo+en+v4.6%29">Editores para tabs</a> para más detalles.<br>
      <h2 id="toc9"><a name="Datos+tabulares-Inhabilitar+personalizacion"></a>Inhabilitar personalización</h2>
      El usuario puede personalizar la lista añadiendo, moviendo, quitando columnas y algunas cosas más:<br>
      <img src="files/tab_es040.jpg" alt="tab_es040.jpg" title="tab_es040.jpg"><br>
      Si no quieres que tus usuarios personalicen la lista puedes desactivarlo a nivel de aplicación añadiendo la siguiente entrada en <em>xava.properties</em>:<br>
      <pre><code class="language-properties">customizeList=false</code></pre>
      Si quieres desactivar la personalización para una lista específica bajo determinadas circunstancias puedes hacerlo por código:<br>
      <pre><code class="language-java">public class MiAccion extends TabBaseAction {

    public void execute() throws Exception {
        if (miCondicion) {
            getTab().setCustomizeAllowed(false);
        }
        ...
    }

}</code></pre>
      Si quieres inhabilitar la personalización de la lista justo para un módulo, hay un controlador para eso, llamado <em>NoCustomizeList (nuevo en v5.0)</em>. Úsalo cuando definas tu módulo en <em>aplicacion.xml</em> (mira el <a

        class="wiki_link" href="application_es.html">capítulo 8</a>) como sigue:<br>
      <pre><code class="language-xml">&lt;modulo nombre="Almacen"&gt;
    &lt;modelo nombre="Almacen"/&gt;
    &lt;controlador nombre="Typical"/&gt;
    &lt;controlador nombre="NoCustomizeList"/&gt;
&lt;/modulo&gt;</code></pre>
      De esa manera, el módulo <em>Almacen</em> no permite al usuario personalizar la lista.<a

        name="varios-formatos-presentación-editores"></a><br>
      <h2 id="toc10"><a name="Datos+tabulares-Varios+formatos+de+presentacion+usando+editores+(nuevo+en+v5.7)"></a>Varios formatos de presentación usando editores <em>(nuevo en v5.7)</em></h2>
      Los mismos datos se pueden visualizar con diferentes formatos de presentación, por ejemplo, usando listas, gráficos, tarjetas, etc. El usuario puede escoger el formato usando los botones a la derecha de la barra de botones superior:<br>
      <img src="files/tab050.png" alt="tab050.png" title="tab050.png"><br>
      Los formatos disponibles son todo los editores que están asignado a tab usando <em>&lt;for-tabs/&gt;</em> en <em>default-editors.xml</em> o <em>&lt;para-tabs/&gt;</em> en <em>editores.xml</em>. Sin embargo, puedes cambiar los editores disponibles para un tab específico con el atributo <em>editors</em> <em>(nuevo en v5.7)</em> de @Tab. Por ejemplo, si escribes un <em>@Tab</em> como este:<br>
      <pre><code class="language-java">@Tab ( name ="ConTarjetas", editors ="List, Charts, ListaTarjetasClientes",
    properties="numero, nombre, tipo, direccion.poblacion, direccion.provincia.nombre"
)</code></pre>
      Este tab tendrá los formatos <em>List</em> y <em>Charts</em>, que son estándar, y un nuevo formato personalizado, <em>ListaTarjetasClientes</em>. <em>ListaTarjetasClientes</em> es un editor propio definido en <em>editores.xml</em>.<br>
      Para aprender como definir los editores para los tabs, lee la <a

        class="wiki_link" href="customizing_es.html">documentación sobre personalización</a>.<a

        name="quitar-formato-lista"></a><br>
      <h2 id="toc11"><a name="Datos+tabulares-Quitar+los+graficos+de+modo+lista+(nuevo+en+v5.7)"></a>Quitar los gráficos de modo lista <em>(nuevo en v5.7)</em></h2>
      Para quitar los gráficos de una lista concreta puedes usar <em>@Tab(editors=)</em>, de esta manera:<br>
      <pre><code class="language-java">@Tab ( name ="SoloLista", editors ="List",
    properties="numero, nombre, tipo, direccion.poblacion, direccion.provincia.nombre"
)</code></pre>
      Así podemos tener un módulo sin gráficos, sólo la lista de OpenXava de toda la vida. Dado que hay solo un editor, los botones para seleccionar formato no aparecen.<br>
      La diferencia entre <em>editor</em> y <em>editors</em>, es que con <em>editor</em> indicamos el editor para el formato por defecto, mientras que con <em>editors</em> especificamos todos los formatos disponibles.<br>
      Para quitar los gráficos de todas las listas de tu aplicación de un solo golpe podemos usar <em>valores-defecto-tabs.xml</em>:<br>
      <pre><code class="language-xml">&lt;?xml version = "1.0" encoding = "ISO-8859-1"?&gt;

&lt;!DOCTYPE valores-defecto-tabs SYSTEM "dtds/valores-defecto-tabs.dtd"&gt;

&lt;valores-defecto-tabs&gt;

    &lt;tab editores="List"&gt;
        &lt;para-todos-los-modelos/&gt;
    &lt;/tab&gt;

&lt;/valores-defecto-tabs&gt;</code></pre>
      Esta técnica no es sólo para quitar los gráficos, es para restringir la lista de formato para todos los módulos. Si no se usan todos los editores <em>&lt;para-tabs/&gt;</em>. </div>
    <div class="wiki" style="display: block;">
      <h2 id="toc11"><a name="Datos+tabulares-Buscar por el contenido de una colección desde modo lista"></a>Buscar por el contenido de una colección desde modo lista <em>(nuevo en v6.4)</em></h2>
      Es posible definir una propiedad de una colección en <i>@Tab</i>, por lo que el usuario puede buscar por esa propiedad, es decir por el contenido de la colección en modo lista. Por ejemplo, podríamos tener un módulo <i>Factura</i> y querer saber que facturas tienen líneas de detalles de cierto producto. Algo así como esto:
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">@Tab(properties="anyo, numero, fecha, cliente.nombre, lineas.producto.descripcion")
public class Factura {

	...
	
	@ElementCollection // o @OneToMany
	private Collection&lt;LineaFactura&gt; lineas;

}

@Embeddable // o @Entity
public class LineaFactura {

	...

	@ManyToOne
	private Producto producto; // Con una propiedad descripcion

}
</code></pre> </div>
      <div class="wiki" style="display: block;">Fíjate que ponemos <i>lineas.producto.descripcion</i> en las propiedades del <i>@Tab</i> donde <i>lineas</i> es una colección. El resultado es este:</div>
      <img src="files/tab_es060.png" alt="tab_es060.png" title="tab_es060.png">
      <div class="wiki" style="display: block;">En el ejemplo de arriba el usuario teclea 'IBM' para <i>Producto de líneas</i> (<i>lineas.producto.descripcion</i>) y la lista muestra las facturas que contienen líneas de detalle cuya descripción de producto contiene 'IBM'.</div>
    </div>
  </body>
</html>