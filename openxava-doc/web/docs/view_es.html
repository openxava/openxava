<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Vista - OpenXava</title>
    <link rel="stylesheet" href="static/style.css" type="text/css">
    <link rel="stylesheet" href="highlight/highlight.css">
    
    <link rel="stylesheet" href="highlight/highlightjs-copy.css"><script src="highlight/highlight.js"></script>
    
    <script src="highlight/highlightjs-copy.js"></script><script>window.addEventListener('DOMContentLoaded',function(){hljs.addPlugin(new CopyButtonPlugin({ autohide: false }));hljs.highlightAll();});</script>
  </head>
  <body>
    <div class="wiki" style="display: block;">
      <h1 id="toc0"><a name="Vista"></a> <span id="breadcrumbs"> <span id="openxava">
            <a href="https://www.openxava.org/"> <span>o</span>pen<span>x</span>ava
              </a> </span> / <a href="index_es.html">documentación</a> / </span>
        Vista</h1>
      <strong>Guía de referencia</strong>: <a class="wiki_link" href="model_es.html">Modelo</a>
      | <strong>Vista</strong> | <a class="wiki_link" href="tab_es.html">Datos
        tabulares</a> | <a class="wiki_link" href="mapping_es.html">Mapeo
        objeto/relacional</a> | <a class="wiki_link" href="controllers_es.html">Controladores</a>
      | <a class="wiki_link" href="application_es.html">Aplicación</a> | <a class="wiki_link"

        href="customizing_es.html">Personalización</a>
      <hr>
      <div id="toc">
        <h1 class="nopad">Tabla de contenidos</h1>
        <div style="margin-left: 1em;"><a href="#Vista">Vista</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Disposicion">Disposición</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Alineado+por+columnas">Alineado por columnas</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Grupos">Grupos</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Secciones">Secciones</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Marcos+uno+al+lado+del+otro">Marcos uno al lado del otro</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Herencia+de+vistas+%28nuevo+en+v3.1.2%29">Herencia
            de vistas (nuevo en v3.1.2)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Disposicion+adaptable+%28nuevo+en+v5.7%29">Disposición
            adaptable (nuevo en v5.7)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Disposicion-Filosofia+para+la+disposicion">Filosofía
            para la disposición</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Normas%20para%20las%20anotaciones%20de%20vista">Normas
            para las anotaciones de vista</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Personalizacion+de+propiedad">Personalización
            de propiedad</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+propiedad-Formato+de+etiqueta">Formato
            de etiqueta</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+propiedad-Evento+de+cambio+de+valor+de+propiedad">Evento
            de cambio de valor de propiedad</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+propiedad-Acciones+de+la+propiedad">Acciones
            de la propiedad</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+propiedad-Escoger+un+editor+%28propiedad%29">Escoger
            un editor (propiedad)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+propiedad-Combos+dinamicos+%28nuevo+en+v5.8%29">Combos
            dinámicos (nuevo en v5.8)</a></div>
        <div style="margin-left: 3em;"><a href="#formato-grande-visualizacion">Formato
            grande de visualización (nuevo en v7.4)</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Personalizacion+de+referencia">Personalización
            de referencia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Escoger+vista">Escoger
            vista</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Personalizar+el+enmarcado">Personalizar
            el enmarcado</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Accion+de+busqueda+propia">Acción
            de búsqueda propia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Condicion+para+la+lista+de+busqueda+%28referencia,+nuevo+en+v4m4%29">Condición
            para la lista de búsqueda (referencia, nuevo en v4m4)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Accion+de+creacion+propia">Acción
            de creación propia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Accion+de+modificacion+propia">Acción
            de modificación propia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Lista+descripciones+%28combos%29">Lista
            descripciones (combos)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Evento+de+cambio+de+valor+de+referencia">Evento
            de cambio de valor de referencia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Busqueda+de+referencia+al+cambiar">Búsqueda
            de referencia al cambiar</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+referencia-Escoger+un+editor+%28referencia,+nuevo+in+v3.1.3%29">Escoger
            un editor (referencia, nuevo in v3.1.3)</a></div>
        <div style="margin-left: 3em;"><a href="#escoger-tab-para-accion-de-busqueda-referencias">Escoger
            tab para la acción de busqueda (referencia, nuevo en v7.4)</a><a href="#Vista-Personalizacion+de+referencia-Escoger+un+editor+%28referencia,+nuevo+in+v3.1.3%29"></a></div>
        <div style="margin-left: 3em;"><a href="#vista-para-editar-referencia">Vista
            para editar (referencia, nuevo en v7.7)</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Personalizacion+de+coleccion">Personalización
            de colección</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Propiedades+en+lista">Propiedades
            en lista</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Vista+para+editar">Vista
            para editar</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Coleccion+de+elementos">Colección
            de elementos</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Accion+de+editar/ver+detalle+propia">Acción
            de editar/ver detalle propia</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias">Acciones
            de lista y fila propias</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+por+defecto">Acciones
            de lista y fila por defecto</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Acciones+de+detalle+propias">Acciones
            de detalle propias</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">Refinar
            comportamiento por defecto para la vista de colección</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Accion+cuando+un+elemento+de+la+coleccion+es+seleccionado+%28nuevo+en+v3.1.2%29">Acción
            cuando un elemento de la colección es seleccionado (nuevo en v3.1.2)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Escoger+un+editor+%28colecciones,+nuevo+in+v3.1.3%29">Escoger
            un editor (colecciones, nuevo in v3.1.3)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Condicion+para+lista+de+busqueda+%28coleccion,+nuevo+en+v4m4%29">Condición
            para lista de búsqueda (colección, nuevo en v4m4)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Visualizar+colecciones+en+formato+arbol+%28nuevo+en+v4m4%29">Visualizar
            colecciones en formato árbol (nuevo en v4m4)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Propiedades+de+total+%28nuevo+en+v4.3%29">Propiedades
            de total (nuevo en v4.3)</a></div>
        <div style="margin-left: 3em;"><a href="#Vista-Personalizacion+de+coleccion-Subcontrolador+en+una+coleccion+%28nuevo+en+v5.7%29">Subcontrolador
            en una colección (nuevo en v5.7)</a></div>
        <div style="margin-left: 3em;"><a href="#grafico-desde-coleccion">Gráfico
            a partir de una colección (nuevo en v7.4)</a></div>
        <div style="margin-left: 3em;"><a href="#lista-simple">Lista simple
            (nuevo en v7.4)</a></div>
        <div style="margin-left: 3em;"><a href="#escoger-tab-para-accion-de-busqueda-colecciones">Escoger
            tab para la acción de busqueda (colecciones, nuevo en v7.4)</a></div>
        <div style="margin-left: 3em;"><a href="#no-default-actions">Ocultar
            acciones por defecto de lista y fila (nuevo en v7.4)</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Propiedades+transitorias+para+controles+graficos">Propiedades
            transitorias para controles gráficos</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Acciones%20de%20la%20vista">Acciones
            de la vista</a></div>
        <div style="margin-left: 2em;"><a href="#Vista-Clase%20transitoria:%20Solo%20para%20crear%20vistas">Clase
            transitoria: Solo para crear vistas</a></div>
      </div>
      OpenXava genera a partir del modelo una interfaz gráfica de usuario por
      defecto. Para muchos casos sencillos esto es suficiente, pero muchas veces
      es necesario modelar con más precisión la forma de la interfaz de usuario
      o vista. En este capítulo vamos a ver cómo.<br>
      <h2 id="toc1"><a name="Vista-Disposicion"></a>Disposición</h2>
      La anotación <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/View.html"

          rel="nofollow">@View</a></em> se puede usar en una entidad o una clase
      incrustable para definir la disposición de sus miembros en la interfaz de
      usuario.<br>
      La sintaxis para definir una vista (<em>@View)</em> es:<br>
      <pre><code class="language-java">@View(
 name="nombre", // 1
 members="miembros", // 2
 extendsView="view" // 3 Nuevo en v3.1.2
)
public class MiEntidad {</code></pre>
      <ol>
        <li><strong>name</strong> (opcional): El nombre identifica a la vista, y
          puede ser usado desde otro lugares de OpenXava (por ejemplo desde <em>aplicacion.xml</em>)
          o desde otra entidad. Si no se pone nombre se asume que es la vista
          por defecto, es decir la forma normal de visualizar el objeto. Si el
          nombre es <em>Simple</em> o <em>Search</em> esta vista se usará por
          defecto para crear el diálogo de búsqueda <em>(desde v4m4)</em>.</li>
        <li><strong>members</strong> (opcional): Indica los miembros que tienen
          que salir y como tienen que estar dispuestos en la interfaz gráfica.
          Por defecto visualiza todos los miembros no ocultos en el orden en que
          están declarados en el modelo. Dentro de miembros podemos usar los
          elementos seccion y grupo para indicar la disposición; o el elemento
          accion para mostrar un vínculo asociado a una acción propia dentro de
          la vista.</li>
        <li><strong>extendsView</strong> (opcional): <em>(Nuevo en v3.1.2)</em>
          Todos los miembros en la vista <em>extendsView</em> se incluyen
          automáticamente en la actual. Véase <a class="wiki_link" href="#Vista-Disposicion-Herencia+de+vistas+%28nuevo+en+v3.1.2%29">herencia
            de vistas</a>.</li>
      </ol>
      Podemos definir varias vistas para una entidad usando la anotación <em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Views.html"

          rel="nofollow">@Views</a></em>.<br>
      Por defecto (es decir si no definimos ni siquiera el elemento <em>@View</em>
      en nuestra clase) se visualizan todos los miembros del objeto en el orden
      en que están en el modelo, y se disponen uno debajo del otro.<br>
      Por ejemplo, un modelo así:<br>
      <pre><code class="language-java">@Entity
@IdClass(OficinistaKey.class)
public class Oficinista {

 @Id @Required
 @Column(length=3, name="ZONA")
 private int codigoZona;

 @Id @Required
 @Column(length=3, name="OFICINA")
 private int codigoOficina;

 @Id @Required
 @Column(length=3, name="CODIGO")
 private int codigo;

 @Required @Column(length=40)
 private String nombre;

 // Getters and setters
 ...

 }</code></pre>
      Generaría una vista con este aspecto:<br>
      <img src="files/view_es010.jpg" alt="view_es010.jpg" title="view_es010.jpg"><br>
      Podemos escoger que miembros queremos que aparezcan y en que orden, con el
      atributo <em>members</em>:<br>
      <pre><code class="language-java">@Entity
@IdClass(OficinistaKey.class)
@View(members="codigoZona; codigoOficina; codigo")
public class Oficinista {
</code></pre>
      En este caso ya no aparece el <em>nombre</em> en la vista.<br>
      También se puede usar <em>members</em> para refinar la disposición:<br>
      <pre><code class="language-java">@View(members=
 "codigoZona, codigoOficina, codigo;" +
 "nombre"
)
</code></pre>
      Podemos observar como separamos los nombres de miembros con comas y punto
      y comas, esto nos sirve para indicar la disposición, con la coma el
      miembro se pone a continuación, y con punto y coma en la línea siguiente,
      esto es la vista anterior quedaría así:<br>
      <img src="files/view_es020.jpg" alt="view_es020.jpg" title="view_es020.jpg"><br>
      <h3 id="toc1.5"><a name="Vista-Disposicion-Alineado+por+columnas"></a>Alineado por columnas</h3>
      A veces es útil disponer los miembros alineados por columnas, como en una
      tabla. Por ejemplo, la siguiente vista:<br>
      <pre><code class="language-java">@View( members=
    "numero, tipo, nombre;" +
    "telefono, correoElectronico, sitioWeb")
</code></pre>
      ...se visualizaría así:<br>
      <img src="files/view_es024.png" alt="view_es024.png" title="view_es024.png"><br>
      Esto es feo. Sería mejor tener todos los datos alineados por columnas. Puedes
      definir la vista de esta forma:<br>
      <pre><code class="language-java">@View( members=
    "#numero, tipo, nombre;" +
    "telefono, correoElectronico, sitioWeb")
</code></pre>
      Fíjate que ahora usas <em>#</em> al principio de <em>members</em>. Ahora obtienes
      este resultado:<br>
      <img src="files/view_es026.png" alt="view_es026.png" title="view_es026.png"><br>
      Ahora, gracias a la <em>#,</em> los miembros están alineados por columnas.<br>
      Esta característica también está disponible para los grupos y secciones (ver más abajo). Además, si pones
      <em>alignedByColumns=true</em> en <em>xava.properties</em>
      todos los elementos se alinean por columna incluso si no especificas <em>#</em>
      en la vista.<br>
      <h3 id="toc2"><a name="Vista-Disposicion-Grupos"></a>Grupos</h3>
      Con los grupos podemos agrupar un conjunto de propiedades relacionadas, y
      esto tiene un efecto visual. Para definir un grupo solo necesitamos poner
      el nombre del grupo y después sus miembros entre corchetes. Justo de esta
      forma:<br>
      <pre><code class="language-java">@View(members=
 "id [ codigoZona, codigoOficina, codigo ];" +
 "nombre"
)
</code></pre>
      En este caso el resultado sería:<br>
      <img src="files/view_es030.jpg" alt="view_es030.jpg" title="view_es030.jpg"><br>
      Se puede observar como las tres propiedades puestas en el grupo aparecen
      dentro de un marquito, y como <em>nombre</em> aparece fuera. El punto y
      coma antes de <em>nombre</em> es para que aparezca abajo, si no
      aparecería a continuación.<br>
      Podemos poner varios grupos en una vista:<br>
      <pre><code class="language-java">@View(members=
 "general [" +
 " codigo;" +
 " tipo;" +
 " nombre;" +
 "]" +
 "contacto [" +
 " telefono;" +
 " correoElectronico;" +
 " sitioWeb;" +
 "]"
)</code></pre>
      En este caso se visualizaría así:<br>
      <img src="files/view_es035.jpg" alt="view_es035.jpg" title="view_es035.jpg"><br>
      Si queremos que aparezca uno debajo del otro debemos poner un punto y coma
      después del grupo, como sigue:<br>
      <pre><code class="language-java">@View(members=
 "general [" +
 " codigo;" +
 " tipo;" +
 " nombre;" +
 "];" +
 "contacto [" +
 " telefono;" +
 " correoElectronico;" +
 " sitioWeb;" +
 "]"
)</code></pre>
      En este caso se visualizaría así:<br>
      <img src="files/view_es040.jpg" alt="view_es040.jpg" title="view_es040.jpg"><br>
      Anidar grupos está soportado. Esta interesante característica permite
      disponer los elementos de la interfaz gráfica de una forma simple y
      flexible. Por ejemplo, si definimos una vista como ésta:<br>
      <pre><code class="language-java">@View(members=
 "factura;" +
 "datosAlbaran [" +
 " tipo, codigo;" +
 " fecha;" +
 " descripcion;" +
 " envio;" +
 " datosTransporte [" +
 " distancia; vehiculo; modoTransporte; tipoConductor;" +
 " ]" +
 " datosEntregadoPor [" +
 " entregadoPor;" +
 " transportista;" +
 " empleado;" +
 " ]" +
 "]"
)</code></pre>
      Obtendremos lo siguiente:<br>
      <img src="files/view_es050.jpg" alt="view_es050.jpg" title="view_es050.jpg"><br>
      A veces es útil distribuir los miembros alineándolos por columnas, como en
      una tabla. Por ejemplo, la siguiente vista:<br>
      <pre><code class="language-java">@View(name="Amounts", members=
 "año, numero;" +
 "importes [" +
 "descuentoCliente, descuentoTipoCliente, descuentoAño;" +
 "sumaImportes, porcentajeIVA, iva;" +
 "]"
)
</code></pre>
      ...será visualizada como sigue:<br>
      <img src="files/view_es060.jpg" alt="view_es060.jpg" title="view_es060.jpg"><br>
      Esto es feo. Sería mejor tener la información alineada por columnas.
      Podemos definir el grupo de esta forma:<br>
      <pre><code class="language-java">@View(name="Amounts", members=
 "año, numero;" +
 "importes [#" +
 "descuentoCliente, descuentoTipoCliente, descuentoAño;" +
 "sumaImportes, porcentajeIVA, iva;" +
 "]"
)</code></pre>
      Notemos que usamos <em>[#</em> en vez de <em>[</em>. Ahora obtenemos
      este resultado:<br>
      <img src="files/view_es070.jpg" alt="view_es070.jpg" title="view_es070.jpg"><br>
      Ahora, gracias al <em>#</em>, los miembros están alineado por columnas.<br>
      Esta prestación está disponible también para las secciones (ver abajo) y
      para <em>members</em>, es decir para la vista raíz <em>(nuevo en v4.7.1)</em>.
      Además, si ponemos <em>alignedByColumns=true (nuevo en v4.7.1)</em> en <em>xava.properties</em>
      todos los elementos se alinean por columna incluso si no especificamos <em>#</em>
      en la vista.<br>
      <h3 id="toc3"><a name="Vista-Disposicion-Secciones"></a>Secciones</h3>
      Además de en grupo los miembros se pueden organizar en secciones. Para
      definir una sección solo necesitamos poner el nombre de la sección y
      después sus miembros entre llaves. Veamos un ejemplo en la entidad <em>Factura</em>:<br>
      <pre><code class="language-java">@View(members=
 "año, numero, fecha, pagada;" +
 "comentario;" +
 "cliente { cliente }" +
 "lineas { lineas }" +
 "importes { sumaImportes; porcentajeIVA; iva }" +
 "albaranes { albaranes }"
)</code></pre>
      El resultado visual sería:<br>
      <img src="files/view_es080.jpg" alt="view_es080.jpg" title="view_es080.jpg"><br>
      Las secciones se convierten en pestañitas que el usuario puede pulsar para
      ver la información contenida en esa sección. Podemos observar también como
      en la vista indicamos todo tipo de miembros (y no solo propiedades), así <em>cliente</em>
      es una referencia, <em>lineas</em> y <em>albaranes</em> son colecciones.<br>
      Se permiten secciones anidadas. Por ejemplo, podemos definir una vista
      como ésta:<br>
      <pre><code class="language-java">@View(name="SeccionesAnidadas", members=
 "año, numero, fecha;" +
 "cliente { cliente }" +
 "datos {" +
 " lineas { lineas }" +
 " importes {" +
 " iva { porcentajeIVA; iva }" +
 " sumaImportes { sumaImportes }" +
 " }" +
 "}" +
 "albaranes { albaranes }"
)</code></pre>
      En este caso podemos obtener una interfaz gráfica como esta:<br>
      <img src="files/view_es090.jpg" alt="view_es090.jpg" title="view_es090.jpg"><br>
      Al igual que en los grupos, las secciones permiten usar <em>#</em> para
      conseguir alineado por columnas, así:<br>
      <pre><code class="language-java">@View(name="ImportesAlineadosEnSeccion", members=
 "año, numero;" +
 "cliente { cliente }" +
 "lineas { lineas }" +
 "importes {#" +
 "descuentoCliente, descuentoTipoCliente, descuentoAño;" +
 "sumaImportes, porcentajeIVA, iva;" +
 "}"
)</code></pre>
      Con el mismo efecto que en el caso de los <a class="wiki_link" href="#Vista-Disposicion-Grupos">grupos</a>.<br>

<h3 id="toc3.5"><a name="Vista-Disposicion-Marcos+uno+al+lado+del+otro"></a>Marcos uno al lado del otro</h3>

<p>Los miembros que se visualizan dentro de un marco, como es el caso de
  las referencias, los grupos o las colecciones, se pueden visualizar uno al lado del otro 
  en lugar de uno debajo del otro, si lo deseamos. Es decir, es posible disponer
  dos marcos en una misma fila. Para esto sólo tenemos que separarlos con coma en
   lugar de punto y coma, como se puede ver en este ejemplo:</p>
  <pre><code class="language-java">@View( members= 
    "nombre;" +  
    "comercial, comercialAlternativo"
)</code></pre>
<p>En este caso <i>nombre</i> es una propiedad plana, pero <i>comercial</i> y <i>comercialAlternativo</i>
  son referencias. El resultado visual sería:</p>
<img src="files/view_es091.png"/>  
<p>Donde puedes ver que <i>comercial</i> y <i>comercialAlternativo</i> se visualizan en la misma línea. 
  Esto es así también para colecciones y grupos. Además, se pueden combinar, podemos poner una referencia 
  y un grupo (por ejemplo) en la misma línea.</p>
<p>Lo que no está permitido es colocar en la misma línea miembros que se visualicen con un campo simple,
  como propiedades o referencia con <i>@DescriptionsList</i> y miembros que usen marcos como referencia,
  grupos y colecciones. En caso de declarlo así en <i>@View</i>, OpenXava mostrará los marcos en su propia línea.</p>  
<p>Por ejemplo, si tenemos este código:</p>  
<pre><code class="language-java">@View( members="nombre, comercial" )</code></pre>
<p>Donde indicamos que <i>nombre</i>, que es una propiedad plana, y <i>comercial</i>, que es una referencia, 
  se visualicen uno al lado del otro, ya que los separamos por coma. Al visualizarlo, 
  OpenXava acaba haciéndolo así:</p>
<img src="files/view_es091bis.png"/>
<p>Es decir, uno debajo del otro. OpenXava ha puesto la referencia <i>comercial</i> en su propia línea.
  Vemos como no podemos visualizar campos simples y marcos uno al lado del otro.</p>

      <h3 id="toc4"><a name="Vista-Disposicion-Herencia+de+vistas+(nuevo+en+v3.1.2)"></a>Herencia
        de vistas <em>(nuevo en v3.1.2)</em></h3>
      Al definir una nueva vista podemos heredar los miembros y disposición de
      una vista ya existente. De esta manera, evitamos copiar y pegar, y al
      mismo tiempo mantenemos nuestro código breve y fácil de cambiar.<br>
      Esto se hace mediante <em>extendsView</em>. Por ejemplo, si tenemos una
      vista como la siguiente:<br>
      <pre><code class="language-java">@View(name="MuySimple", members="nombre, sexo"),</code></pre>
      Esto produce la siguiente interfaz de usuario:<br>
      <img src="files/view_es092.jpg" alt="view_es092.jpg" title="view_es092.jpg"><br>
      Si ahora queremos crear una nueva vista que extienda de esta simplemente
      hemos de escribir:<br>
      <pre><code class="language-java">@View(name="Simple", extendsView="MuySimple", members="lenguajePrincipal")</code></pre>
      y obtendremos lo siguiente:<br>
      <img src="files/view_es094.jpg" alt="view_es094.jpg" title="view_es094.jpg"><br>
      Como vemos los miembros de la vista <em>MuySimple</em> se incluyen
      automáticamente en la vista <em>Simple</em>, y los miembros propios de la
      vista se añaden al final.<br>
      En este caso estamos extendiendo una vista de la misma entidad, pero
      también podemos extender una vista de la entidad padre, si que es que
      estamos usando herencia JPA. Es decir, si tenemos una entidad llamada <em>Programador</em>:<br>
      <pre><code class="language-java">@Entity
@View(name="ConSecciones",
 members =
 "nombre, sexo;" +
 "lenguajePrincipal;" +
 "experiencias { experiencias }"
)
public class Programador {</code></pre>
      Podemos reutilizar la vista <em>ConSecciones</em> en una clase hija de <em>Programador</em>:<br>
      <pre><code class="language-java">@Entity
@View(name="ConSecciones", extendsView="super.ConSecciones",
 members =
 "marcoTrabajoFavorito;" +
 "marcosTrabajo { marcosTrabajo }"
)
public class ProgramadorJava extends Programador {</code></pre>
      Como podemos ver, la forma de extender una vista de una superclase es
      usando el prefijo <em>super</em> en <em>extendsView</em>. En este caso
      la vista <em>ConSecciones</em> de la entidad <em>ProgramadorJava</em>
      tendrá todos los miembros de la vista <em>ConSecciones</em> de la entidad
      <em>Programador</em> más los suyos propios.<br>
      Véamos el aspecto de la vista <em>ConSecciones</em> de <em>ProgramadorJava</em>:<br>
      <img src="files/view_es096.jpg" alt="view_es096.jpg" title="view_es096.jpg"><br>
      Si queremos extender la vista por defecto (la vista por defecto es la
      vista sin nombre) hemos de usar la palabra DEFAULT como nombre en <em>extendsView</em>.
      Como en este ejemplo:<br>
      <pre><code class="language-java">@View(members="nombre, sexo; lenguajePrincipal, marcoTrabajoFavorito; experiencias")
@View(name="Completa", extendsView="DEFAULT", members = "marcosTrabajo")
</code></pre>
      La vista <em>Completa</em> tendrá todos los miembros de la vista por
      defecto (<em>nombre, sexo, lenguajePrincipal, marcoTrabajoFavorito,
        experiencias</em>) más <em>marcosTrabajo</em>.<br>
      La herencia de vistas solo aplica a los miembros y su distribución. Las
      acciones, eventos y otros refinamiento a nivel de miembro no se heredan.<br>
      <h3 id="toc5"><a name="Vista-Disposicion-Disposicion+adaptable+(nuevo+en+v5.7)"></a>Disposición
        adaptable <em>(nuevo en v5.7)</em></h3>
      Disposición adaptable (<em>responsive</em>) significa que la disposición
      de la interfaz de usuario se adapta al tamaño de la página, así tu
      aplicación funciona bien en una tableta de 7", un portátil de 15" o en una
      pantalla de 22", con el mismo código. Para activar la disposición
      adaptable en OpenXava añade la siguiente entrada en <em>xava.properties</em>
      de tu proyecto:<br>
      <pre><code class="language-properties">flowLayout=true</code></pre>
      Después de esto, OpenXava ajusta la disposición de los campos al tamaño de
      la página. Por ejemplo, a partir de la siguiente <em>@View</em>:<br>
      <pre><code class="language-java">@View( members=
    "#numero, descripcion;" +
    "color, fotos;" +
    "familia, subfamilia;" +
    "almacen, zonaUno;" +
    "precioUnitario, precioUnitarioEnPesetas;" +
    "precioUnitarioConImpuestos"
)</code></pre>
      Con una pantalla pequeña obtendrás:<br>
      <img src="files/view_es097.jpg" alt="view_es097.jpg" title="view_es097.jpg"><br>
      <br>
      Con una pantalla no tan pequeña obtendrás:<br>
      <img src="files/view_es098.jpg" alt="view_es098.jpg" title="view_es098.jpg"><br>
      <br>
      Y con una pantalla un poco más grande:<br>
      <img src="files/view_es099.jpg" alt="view_es099.jpg" title="view_es099.jpg"

        style="height: 167px; width: 800px;"><br>
      <br>
      Y así por el estilo. Fíjate como # , y ; de <em>@View</em> se ignoran.<br>
      <h3 id="toc6"><a name="Vista-Disposicion-Filosofia+para+la+disposicion"></a>Filosofía
        para la disposición</h3>
      Es de notar tenemos grupos y no marcos y secciones y no pestañas. Porque
      en las vistas de OpenXava intentamos mantener un nivel de abstracción
      alto, es decir, un grupo es un conjunto de propiedades relacionadas
      semánticamente, y las secciones nos permite dividir la información en
      partes cuando tenemos mucha y posiblemente no se pueda visualizar toda a
      la vez, el que los grupos se representen con marquitos y las secciones con
      pestañas es una cuestión de implementación, pero el generador del interfaz
      gráfico podría escoger usar un árbol u otro control gráfico para
      representar las secciones, por ejemplo.<br>
      <h2 id="toc7"><a name="Vista-Normas para las anotaciones de vista"></a>Normas
        para las anotaciones de vista</h2>
      Podemos anotar un miembro (propiedad, referencia o colección) con varias
      anotaciones que refinan su estilo de visualización y comportamiento.
      Además podemos definir que el efecto de estas anotaciones solo aplica a
      algunas vistas.<br>
      Por ejemplo, si tenemos una entidad con varias vistas:<br>
      <pre><code class="language-java">@Entity
@View( members="codigo; tipo; nombre; direccion" )
@View( name="A", members="codigo; tipo; nombre; direccion; comercial" )
@View( name="B", members="codigo; tipo; nombre; comercial; comercialAlternativo" )
@View( name="C", members="codigo; tipo; nombre; direccion; lugaresEntrega" )
public class Cliente {
</code></pre>Si usas una versión de OpenXava anterior a la 6.1 has de envolver las
      vistas con <i>@Views</i>:<br>
      <div class="wiki" id="content_view">
        <pre><code class="language-java">@Entity
@Views({ // Sólo necesario hasta v6.0.2
  @View( members="codigo; tipo; nombre; direccion" ),
  @View( name="A", members="codigo; tipo; nombre; direccion; comercial" ),
  @View( name="B", members="codigo; tipo; nombre; comercial; comercialAlternativo" ),
  @View( name="C", members="codigo; tipo; nombre; direccion; lugaresEntrega" )
})
public class Cliente {
</code></pre>Si ahora queremos que la propiedad <em>nombre</em> sea de solo lectura.
        Podemos anotarlo de esta manera:</div>
      <pre><code class="language-java">@ReadOnly
private String nombre;</code></pre>
      De esta forma <em>nombre</em> es de solo lectura en todas las vistas.
      Ahora bien, puede que queramos que <em>nombre</em> sea de solo lectura
      solo en las vistas B y C, entonces podemos definir el miembro como sigue:<br>
      <pre><code class="language-java">@ReadOnly(forViews="B, C")
private String nombre;</code></pre>
      Otra forma para definir este mismo caso es:<br>
      <pre><code class="language-java">@ReadOnly(notForViews="DEFAULT, A")
private String nombre;</code></pre>
      Usando <em>notForViews</em> indicamos las vistas donde la propiedad <em>nombre</em>
      es de solo lectura. DEFAULT se usa para referenciar a la vista por
      defecto, la vista sin nombre.<br>
      Algunas anotaciones tiene uno o más valores, por ejemplo para indicar que
      vista del tipo referenciado se usará para visualizar una referencia usamos
      la anotación <em>@ReferenceView</em>:<br>
      <pre><code class="language-java">@ReferenceView("Simple")
private Comercial comercial;</code></pre>
      En este caso cuando se visualiza el comercial se usa la vista <em>Simple</em>,
      definida en la clase <em>Comercial</em>.<br>
      ¿Qué ocurre si queremos usar la vista <em>Simple</em> de <em>Comercial</em>
      solo en la vista <em>B</em> de <em>Cliente</em>? Es fácil:<br>
      <pre><code class="language-java">@ReferenceView(forViews="B", value="Simple")
private Comercial comercial;</code></pre>
      ¿Qué ocurre si lo que queremos es usar la vista <em>Simple</em> de <em>Comercial</em>
      solo en la vista <em>B</em> de <em>Cliente</em> y la vista <em>MuySimple</em>
      de <em>Comercial</em> para la vista <em>A</em> de <em>Cliente</em>? En
      este caso hemos de usar varias <em>@ReferenceView</em>:<br>
      <pre><code class="language-java">@ReferenceView(forViews="B", value="Simple"),
@ReferenceView(forViews="A", value="MuySimple")
</code></pre>Si usas una versión anterior a v6.1 debes agrupar las <i>@ReferenceView</i>
      dentro de una <em>@ReferenceViews</em>, justo así:<br>
      <div class="wiki" id="content_view">
        <pre><code class="language-java">@ReferenceViews({ // Sólo necesario hasta v6.0.2
  @ReferenceView(forViews="B", value="Simple"),
  @ReferenceView(forViews="A", value="MuySimple")
})
</code></pre> Estas normas aplican a todas las anotaciones de este capítulo, excepto <em>@View</em>
        y <em>@Views</em>.<br>
      </div>
      <h2 id="toc8"><a name="Vista-Personalizacion+de+propiedad"></a>Personalización
        de propiedad</h2>
      Podemos refinar la forma de visualización y comportamiento de una
      propiedad en la vista usando las siguientes anotaciones:<br>
      <pre><code class="language-java">@ReadOnly // 1
@LabelFormat // 2
@DisplaySize // 3
@OnChange // 4
@Action // 5
@Editor // 6
@LabelStyle // 7 Nuevo en v4m4
@LargeDisplay // 8 Nuevo en v7.4
private tipo nombrePropiedad;</code></pre>
      Todas estas anotaciones siguen las <a class="wiki_link" href="#Vista-Normas%20para%20las%20anotaciones%20de%20vista">normas
        para anotaciones de vista</a> y todas ellas son opcionales. OpenXava
      siempre asume valores por defecto correcto si se omiten.<br>
      <ol>
        <li><strong>@ReadOnly</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

            rel="nofollow">OX</a>): Si marcas una propiedad con esta anotaciones
          no será nunca editable por el usuario en esta vista. Una alternativa a
          esto es hacer la propiedad editable/no editable programáticamente
          usando <a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

            rel="nofollow">org.openxava.view.View</a>. Desde v6.2 puedes
          especificar <i>@ReadOnly(onCreate=false)</i> para que la propiedad
          sea editable al crear una nueva entidad, pero de sólo lectura en el
          resto de casos.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Formato+de+etiqueta">@LabelFormat</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormat.html"

            rel="nofollow">OX</a>): Forma en que se visualiza la etiqueta para
          esta propiedad. Su valor puede ser <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormatType.html">LabelFormatType</a>.NORMAL</em>,
          <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormatType.html">LabelFormatType</a>.SMALL</em>
          o <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormatType.html">LabelFormatType</a>.NO_LABEL</em>.</li>
        <li><strong>@DisplaySize</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DisplaySize.html"

            rel="nofollow">OX</a>): La longitud en caracteres del editor en la
          interfaz de usuario usado para visualizar esta propiedad. El editor
          mostrará solo los caracteres indicados con longitud-visual pero
          permite que el usuario introduzca hasta el total de la longitud de la
          propiedad. Si <em>@DisplaySize</em> no se especifica se asume el
          valor de la longitud de la propiedad.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Evento+de+cambio+de+valor+de+propiedad">@OnChange</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

            rel="nofollow">OX</a>): Acción a realizar cuando cambia el valor de
          esta propiedad. Solo una acción <em>@OnChange</em> por vista está
          permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Acciones+de+la+propiedad">@Action</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Action.html"

            rel="nofollow">OX</a>): Acciones (mostradas como vínculos, botones o
          imágenes al usuario) asociadas (visualmente) a esta propiedad y que el
          usuario final puede ejecutar. Es posible definir varias <em>@Action</em>
          por cada vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Escoger+un+editor+%28propiedad%29">@Editor</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

            rel="nofollow">OX</a>): Nombre del editor a usar para visualizar la
          propiedad en esta vista. El editor tiene que estar declarado en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-editors.xml"><i>openxava/src/main/resources/xava/default-editors.xml</i></a>
          o <i>src/main/resources/</i><em>xava/editores.xml</em> de nuestro
          proyecto. Antes de v7 eran <em>OpenXava/xava/default-editors.xml</em>
          y <em>xava/editores.xml</em> de nuestro proyecto.</li>
        <li><strong>@LabelStyle</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelStyle.html"

            rel="nofollow">OX</a>): (<em>Nuevo en v4m4</em>): Estilo con el que
          se visualiza la etiqueta para esta propiedad. Por defecto están
          definidos los estilos 'bold-label', 'italic-label' y 'reverse-label';
          cualquier otro estilo puede ser definido por el propio usuario (basta
          con incluirlo en un .css).</li>
        <li><strong><a class="wiki_link" href="#formato-grande-visualizacion">@LargeDisplay</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LargeDisplay.html"

            rel="nofollow">OX</a>): (<em>Nuevo en v7.4</em>): El valor de la
          propiedad se muestra en un formato grande para hacerlo claramente
          visible. Generalmente se utiliza una fuente grande, dentro de un marco
          pequeño con espaciado, etc. Además, permite mostrar un icono, un
          prefijo y un sufijo opcionalmente.</li>
      </ol>
      <p>Aparte de las anotaciones relacionadas con la vista de arriba puedes
        anotar tus propiedades con <a href="model_es.html#Modelo-Propiedades-Estereotipo">anotaciones
          estilo estereotipo</a>.</p>
      <ol>
      </ol>
      <h3 id="toc9"><a name="Vista-Personalizacion+de+propiedad-Formato+de+etiqueta"></a>Formato
        de etiqueta</h3>
      Un ejemplo sencillo para cambiar el formato de la etiqueta (<em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormat.html"

          rel="nofollow">@LabelFormat</a></em>):<br>
      <pre><code class="language-java">@LabelFormat(LabelFormatType.SMALL)
private int codigoPostal;</code></pre>
      En este caso el código postal lo visualiza así:<br>
      <img src="files/view_es100.jpg" alt="view_es100.jpg" title="view_es100.jpg"><br>
      El formato <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormatType.html"

          rel="nofollow">LabelFormatType</a>.NORMAL</em> es el que hemos visto
      hasta ahora (con la etiqueta grande y la izquierda) y el formato <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormatType.html"

          rel="nofollow">LabelFormatType</a>.NO_LABEL</em> simplemente hace que
      no salga etiqueta. A partir de v4m4 puedes usar <em>defaultLabelFormat</em>
      en <em>xava.properties</em> para especificar el formato a usar cuando se
      omita <em>@LabelFormat</em>.<br>
      <h3 id="toc10"><a name="Vista-Personalizacion+de+propiedad-Evento+de+cambio+de+valor+de+propiedad"></a>Evento
        de cambio de valor de propiedad</h3>
      Si queremos reaccionar al evento de cambio de valor de una propiedad
      podemos user <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

          rel="nofollow">@OnChange</a></em> como sigue:<br>
      <pre><code class="language-java">@OnChange(AlCambiarNombreCliente.class)
private String nombre;</code></pre>
      El código que se ejecutará será:<br>
      <pre><code class="language-java">package org.openxava.test.actions;

import org.openxava.actions.*;
import org.openxava.test.model.*;

/**
 * @author Javier Paniza
 */
public class AlCambiarNombreCliente extends OnChangePropertyBaseAction { // 1

 public void execute() throws Exception {
 String valor = (String) getNewValue(); // 2
 if (valor == null) return;
 if (valor.startsWith("Javi")) {
 getView().setValue("tipo", Cliente.Tipo.FIJO); // 3
 }
 }

}</code></pre>
      La acción ha de implementar <em>IOnChangePropertyAction</em> aunque es
      más cómodo hacer que descienda de <em>OnChangePropertyBaseAction</em>
      (1). Dentro de la acción tenemos disponible <em>getNewValue()</em> (2)
      que proporciona el nuevo valor que ha introducido el usuario, y <em>getView()</em>
      (3) que nos permite acceder programáticamente a la vista (<em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

          rel="nofollow">View</a></em>) (cambiar valores, ocultar miembros,
      hacerlos editables, o lo que queramos).<br>
      <h3 id="toc11"><a name="Vista-Personalizacion+de+propiedad-Acciones+de+la+propiedad"></a>Acciones
        de la propiedad</h3>
      También podemos especificar acciones (<em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Action.html"

          rel="nofollow">@Action</a></em>) que el usuario puede pulsar
      directamente:<br>
      <pre><code class="language-java">@Action("Albaran.generarNumero")
private int numero;</code></pre>
      En este caso en vez de la clase de la acción se pone un identificador que
      consiste en el nombre de controlador y nombre de acción. Esta acción ha de
      estar registrada en <em>controladores.xml</em> de la siguiente forma:<br>
      <pre><code class="language-xml">&lt;controlador nombre="Albaran"&gt;
 ...
 &lt;accion nombre="generarNumero" oculta="true"
 clase="org.openxava.test.acciones.GenerarNumeroAlbaran"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Las acciones se visualizan con un vínculo o imagen al lado del editor de
      la propiedad. Como sigue:<br>
      <img src="files/view_es110.jpg" alt="view_es110.jpg" title="view_es110.jpg"><br>
      Por defecto el vínculo de la acción aparece solo cuando la propiedad es
      editable, ahora bien si la propiedad es de solo lectura (<em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

          rel="nofollow">@ReadOnly</a></em>) o <a class="wiki_link" href="model_es.html#Modelo-Propiedades-Propiedades%20calculadas">calculada</a>
      entonces está siempre disponible. Podemos usar el atributo <em>alwaysEnabled</em>
      a <em>true</em> para que el vínculo esté siempre presente, incluso si la
      propiedad no es editable. Como sigue:<br>
      <pre><code class="language-java">@Action(value="Albaran.generarNumero", alwaysEnabled=true)</code></pre>
      El atributo <em>alwaysEnabled</em> es opcional y su valor por defecto es
      <em>false</em>.<br>
      El código de la acción anterior es:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 * @author Javier Paniza
 */
public class GenerarNumeroAlbaran extends ViewBaseAction {

 public void execute() throws Exception {
 getView().setValue("numero", new Integer(77));
 }

}</code></pre>
      Una implementación simple pero ilustrativa. Se puede usar cualquier acción
      definida en <em>controladores.xml</em> y su funcionamiento es el normal
      para una acción OpenXava. En el <a class="wiki_link" href="controllers_es.html">capítulo
        7</a> veremos más detalles sobre los controladores.<br>
      Opcionalmente podemos hacer nuestra acción una <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IPropertyAction.html"

          rel="nofollow">IPropertyAction</a></em> (esto está disponible solo
      para acciones usadas en <em>@Action</em> de propiedades, the esta forma
      la vista contenedora y el nombre de la propiedad son inyectados en la
      acción por OpenXava. La clase de la acción anterior se podría reescribir
      así:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;
import org.openxava.view.*;

/**
 * @author Javier Paniza
 */
public class GenerarNumeroAlbaran
 extends BaseAction
 implements IPropertyAction { // 1
 private View view;
 private String property;

 public void execute() throws Exception {
 view.setValue(property, new Integer(77)); // 2
 }

 public void setProperty(String property) { // 3
 this.property = property;
 }
 public void setView(View view) { // 4
 this.view = view;
 }
}</code></pre>
      Esta acción implementa <em>IPropertyAction</em> (1), esto requiere que la
      clase tenga los métodos <em>setProperty()</em> (3) y <em>setView()</em>
      (4), estos valores serán inyectados en la acción antes de llamar al método
      <em>execute()</em>, donde pueden ser usados (2). En este caso no necesitas
      inyectar el objeto <em>xava_view</em> al definir la acción en <em>controladores.xml</em>.
      La vista inyectada por <em>setView()</em> (4) es la vista más interna que
      contiene la propiedad, por ejemplo, si la propiedad está dentro de un
      agregado es la vista de ese agregado, no la vista principal del módulo. De
      esta manera podemos escribir acciones más reutilizables.<br>
      <h3 id="toc12"><a name="Vista-Personalizacion+de+propiedad-Escoger+un+editor+(propiedad)"></a>Escoger
        un editor (propiedad)</h3>
      Un editor visualiza la propiedad al usuario y le permite editar su valor.
      OpenXava usa por defecto el editor asociado al estereotipo o tipo de la
      propiedad, pero podemos especificar un editor concreto para visualizar una
      propiedad usando <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

          rel="nofollow">@Editor</a></em>.<br>
      Por ejemplo, OpenXava usa un combo para editar las propiedades de tipo <em>enum</em>,
      pero si queremos visualizar una propiedad de este tipo en alguna vista
      concreta usando un radio button podemos definir esa vista de esta forma:<br>
      <pre><code class="language-java">@Editor(forViews="TipoConRadioButton", value="ValidValuesRadioButton")
private Tipo tipo;
public enum Tipo { NORMAL, FIJO, ESPECIAL };</code></pre>
      En este caso para visualizar/editar se usará el editor <em>ValidValuesRadioButton</em>,
      en lugar de del editor por defecto. <em>ValidValuesRadioButton</em> está
      definido en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-editors.xml"><i>openxava/src/main/resources/xava/default-editors.xml</i></a>
      (<em>OpenXava/xava/default-editors.xml</em> para v6 o anterior) como
      sigue:<br>
      <pre><code class="language-xml">&lt;editor name="ValidValuesRadioButton" url="radioButtonEditor.jsp"/&gt;</code></pre>
      Este editor está incluido con OpenXava, pero nosotros podemos crear
      nuestro propios editores con nuestro propios JSPs y declararlos en el
      archivo <em>editores.xml</em> en <i>src/main/resources/xava</i>
      (simplemente <i>xava</i> en v6 o anterior) de nuestro proyecto.<br>
      Esta característica es para cambiar el editor solo en una vista. Si lo que
      se pretende es cambiar el editor para un estereotipo, tipo o una propiedad
      de un modelo a nivel de aplicación entonces lo mejor es configurarlo
      usando el archivo <em>editores.xml</em>.<br>
      <h3 id="toc13"><a name="Vista-Personalizacion+de+propiedad-Combos+dinamicos+(nuevo+en+v5.8)"></a>Combos
        dinámicos <em>(nuevo en v5.8)</em></h3>
      Para un combo con una lista estática de valores podemos usar una propiedad
      de tipo <em>enum</em>. Para un combo que obtenga los datos de la base de
      datos podemos usar una referencia con <em>@DescriptionsList</em>. Si
      queremos cualquier otra cosa a partir de v5.8 tenemos algunos métodos en
      la clase <em>org.openxava.view.View</em> que nos permiten crear listas
      desplegables usando nuestra propia lógica a partir de cualquier propiedad.
      Por ejemplo, para una propiedad simple como esta:<br>
      <pre><code class="language-java">private String color;</code></pre>
      Podemos añadir un combo por código de esta manera:<br>
      <pre><code class="language-java">getView().addValidValue("color", "blc", "Blanco");
getView().addValidValue("color", "ngr", "Negro");</code></pre>
      Esto crea un combo para la propiedad <em>color</em> con dos valores <em>blc</em>
      con la etiqueta <em>Blanco</em> y <em>ngr</em> con la etiqueta <em>Negro</em>.
      Aparte de <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#addValidValue%28java.lang.String,%20java.lang.Object,%20java.lang.String%29">addValidValue()</a></em>,
      contamos con <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#removeValidValue%28java.lang.String,%20java.lang.Object%29">removeValidValue()</a></em>
      y <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#getValidValues%28java.lang.String%29">getValidValues()</a></em>.
      A partir de v6.3 también tienes <a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#clearValidValues%28java.lang.String%29"><i>clearValidValues()</i></a>,
      <a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#disableValidValues%28java.lang.String%29"><i>disableValidValues()</i></a>,
      <a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#removeBlankValidValue%28java.lang.String%29"><i>removeBlankValidValue()</i></a>
      y <a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html#hasBlankValidValue%28java.lang.String%29"><i>hasBlankValidValue()</i></a>.
      Desde v7.1 puedes seleccionar y editar la opción elegida o ingresar un
      nuevo valor directamente usando el editor <i>EditableValidValues</i>, por
      ejemplo:
      <pre><code class="language-java">@Editor("EditableValidValues")
@Column(length = 15)
private String color;</code></pre>
      En este ejemplo seleccionando <i>Blanco</i>, puedes editarlo por <i>Blanco
        beige</i> o ingresar un nuevo valor como <i>Amarillo</i>. Estos nuevos
      valores no se agregarán a la lista original de opciones para el uso en
      otros registros.<br>
      <img src="files/view_es115.png" alt="view_es115.png" title="view_es115.png"><br>
      <h3><a name="formato-grande-visualizacion"></a>Formato grande de
        visualización <em>(nuevo en v7.4)</em></h3>
      Es posible hacer que el valor de una propiedad se visualice con un tamaño
      grande. Así podemos resaltar la propiedad en la vista o hacer una vista
      estilo cuadro de mandos donde todos los datos tienen formato grande.</div>
    <div class="wiki" style="display: block;">Solo has de anotar tus propiedades
      con <a href="https://openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LargeDisplay.html"><i>@LargeDisplay</i></a>,
      de esta forma:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@LargeDisplay 
int anyo;

@Money @LargeDisplay 
BigDecimal descuento;
</code></pre> </div>
    <div class="wiki" style="display: block;">Lo que se visualizara así:</div>
    <img src="files/view_es117.png" alt="view_es117.png" title="view_es117.png">
    <div class="wiki" style="display: block;">Fíjate como en el caso de la
      propiedad <i>descuento</i> el valor aparece en rojo, esto es porque los
      valores negativos salen en rojo (este color se puede cambiar vía CSS).
      Además, nota como tiene como sufijo el símbolo del euro, esto es porque la
      propiedad está anotada con <i>@Money,</i> en ese caso saca el símbolo de
      la móneda como prefijo o sufijo según el locale del servidor.</div>
    <div class="wiki" style="display: block;">También tenemos la opción de
      especificar nosotros que sufijo o prefijo queremos, con los atributos <i>prefix</i>
      y <i>suffix</i>:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@LargeDisplay(prefix="€") 
BigDecimal sumaImportes;

@LargeDisplay(suffix="%", icon="label-percent-outline") 
BigDecimal porcentajeIVA;
</code></pre> </div>
    <div class="wiki" style="display: block;">Que se visualizaría:</div>
    <img src="files/view_es118.png" alt="view_es118.png" title="view_es118.png">
    <div class="wiki" style="display: block;">Ahora el símbolo del euro aparece
      como prefijo de forma fija, no importa que la propiedad esté o no anotada
      con <i>@Money</i>. Y un detalle más, se visualiza un icono en la
      propiedad <i>porcentajeIVA</i>, esto lo hemos conseguido con <i>icon="label-percent-outline"</i>.
      Los iconos son identificadores de <a href="https://pictogrammers.com/library/mdi/">Material
        Design Icons</a>.</div>
    <div class="wiki" style="display: block;">Como ocurre con todos los
      elementos visuales de OpenXava, puedes cambiar el estilo del formato
      grande de visualización (<i>@LargeDisplay</i>), como el tamaño de la
      letra, espaciado, etc. usando CSS. Las clases CSS disponibles son <i>.ox-large-display,
        .ox-large-display-suffix, .ox-large-display-negative,
        .ox-large-display-value</i> o <i>.ox-large-display i</i> para el icono.
      Para los colores puedes cambiar los valores de las variables <i>--large-display-color,
        --large-display-negative-color</i> y <i>--large-display-icon-color</i>.
      El código CSS lo puedes incluir en <i>custom.css</i> o en tu propio
      estilo como se explica en la <a href="custom-style_es.html">documentación
        sobre el estilo visual personalizado</a>.<br>
      <h2><a name="Vista-Personalizacion+de+referencia"></a>Personalización de
        referencia</h2>
      Podemos refinar la forma de visualización y comportamiento de una
      referencia en la vista usando las siguientes anotaciones:<br>
      <pre><code class="language-java">@ReferenceView       // 1
@ReadOnly            // 2
@NoFrame             // 3
@NoCreate            // 4
@NoModify            // 5
@NoSearch            // 6
@AsEmbedded          // 7
@SearchAction        // 8
@SearchListCondition // 9 Nuevo en v4m4
@DescriptionsList    // 10
@LabelFormat         // 11
@Action              // 12
@OnChange            // 13
@OnChangeSearch      // 14
@Editor              // 15 Nuevo en v3.1.3
@LabelStyle          // 16 Nuevo en v4m4
@Collapsed           // 17 Nuevo en v5.0
@SearchListTab       // 18 Nuevo en v7.4
@NewView             // 19 Nuevo en v7.7
@EditView            // 20 Nuevo en v7.7
@NewAction           // 21 Nuevo en v7.7
@EditAction          // 22 Nuevo en v7.7
@ManyToOne
private tipo nombreReferencia;</code></pre>
      Todas estas anotaciones siguen las <a class="wiki_link" href="#Vista-Normas%20para%20las%20anotaciones%20de%20vista">normas
        para anotaciones de vista</a> y todas ellas son opcionales. OpenXava
      siempre asume valores por defecto correcto si se omiten.<br>
      <ol>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Escoger+vista">@ReferenceView</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReferenceView.html"

            rel="nofollow">OX</a>): Si omitimos esta anotación usa la vista por
          defecto del objeto referenciado para visualizarlo, con este anotación
          podemos indicar que use otra vista.</li>
        <li><strong>@ReadOnly</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

            rel="nofollow">OX</a>): Si usamos esta anotación esta referencia no
          será nunca editable por el usuario en esta vista. Una alternativa a
          esto es hacer la propiedad editable/no editable programáticamente
          usando <a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

            rel="nofollow">org.openxava.view.View</a>. Desde v6.2 puedes
          especificar <i>@ReadOnly(onCreate=false)</i> para que la referencia
          sea editable al crear una nueva entidad, pero de sólo lectura en el
          resto de casos.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Personalizar+el+enmarcado">@NoFrame</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoFrame.html"

            rel="nofollow">OX</a>): El dibujador de la interfaz gráfica usa un
          marco para envolver todos los datos de la referencia. Con esta
          anotación se puede indicar que no se use ese marco.</li>
        <li><strong>@NoCreate</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoCreate.html"

            rel="nofollow">OX</a>): Por defecto el usuario tiene opción para
          crear un nuevo objeto del tipo referenciado. Con esta anotación
          anulamos esta posibilidad.</li>
        <li><strong>@NoModify</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoModify.html"

            rel="nofollow">OX</a>): Por defecto el usuario tiene opción para
          modificar el objeto actualmente referenciado. Con esta anotación
          anulamos esta posibilidad.</li>
        <li><strong>@NoSearch</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoSearch.html"

            rel="nofollow">OX</a>): Por defecto el usuario tiene un vínculo para
          poder realizar búsquedas con una lista, filtros, etc. Con esta
          anotación anulamos esta posibilidad.</li>
        <li><strong>@AsEmbedded</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/AsEmbedded.html"

            rel="nofollow">OX</a>): Por defecto en el caso de una referencia a
          una clase <a class="wiki_link" href="model_es.html#Modelo-Referencias-Referencias%20incrustadas">incrustable</a>
          el usuario puede crear y editar sus datos, mientras que en el caso de
          una referencia a una entidad el usuario escoge una entidad existente.
          Si ponemos <em>@AsEmbedded</em> entonce la interfaz de usuario para
          referencias a entidad se comporta como en el caso de los incrustados,
          permitiendo al usuario crear un nuevo objeto y editar sus datos
          directamente. No tiene efecto en el caso de una referencia a un objeto
          incrustado. ¡Ojo! Si borramos una entidad sus entidades referenciadas
          no se borran, incluso si estamos usando <em>@AsEmbedded</em>.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Accion+de+busqueda+propia">@SearchAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchAction.html"

            rel="nofollow">OX</a>): Nos permite especificar nuestra propia
          acción de búsqueda cuando se pulsa al vínculo de buscar. Solo es
          posible una por vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Condicion+para+la+lista+de+busqueda+%28referencia,+nuevo+en+v4m4%29">@SearchListCondition</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListCondition.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v4m4)</em> Condición a usar
          para la lista de elementos seleccionable susceptibles de ser asignados
          a la referencia.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Lista+descripciones+%28combos%29">@DescriptionsList</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DescriptionsList.html"

            rel="nofollow">OX</a>): Permite visualizar los datos como una lista
          descripciones, típicamente un combo. Práctico cuando hay pocos
          elementos del objeto referenciado.</li>
        <li><strong>@LabelFormat</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelFormat.html"

            rel="nofollow">OX</a>): Formato de la etiqueta de la referencia.
          Solo aplica si esta referencia se ha anotado con <em>@DescriptionsList</em>.
          Funciona como en <a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Formato+de+etiqueta">el
            caso de las propiedades</a>.</li>
        <li><strong>@Action</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Action.html"

            rel="nofollow">OX</a>): Acciones (mostradas como vínculos, botones o
          imágenes al usuario) asociadas (visualmente) a esta referencia y que
          el usuario final puede ejecutar. Funciona como en <a class="wiki_link"

            href="#Vista-Personalizacion+de+propiedad-Acciones+de+la+propiedad">el
            caso de las propiedades</a>. Podemos definir varias acciones a la
          misma referencia en una vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Evento+de+cambio+de+valor+de+referencia">@OnChange</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

            rel="nofollow">OX</a>): Acción a realizar cuando cambia el valor de
          esta propiedad. Solo una acción <em>@OnChange</em> por vista está
          permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Busqueda+de+referencia+al+cambiar">@OnChangeSearch</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChangeSearch.html"

            rel="nofollow">OX</a>): Nos permite especificar nuestra propia
          acción de búsqueda cuando el usuario teclea una clave nueva. Solo es
          posible una por vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Escoger+un+editor+%28referencia,+nuevo+in+v3.1.3%29">@Editor</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v3.1.3)</em> Nombre del
          editor a usar para visualizar la referencia en esta vista. El editor
          tiene que estar declarado en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-editors.xml"><i>openxava/src/main/resources/xava/default-editors.xml</i></a>
          o <i>src/main/resources/</i><em>xava/editores.xml</em> de nuestro
          proyecto. Antes de v7 eran <em>OpenXava/xava/default-editors.xml</em>
          y <em>xava/editores.xml</em> de nuestro proyecto.</li>
        <li><strong>@LabelStyle</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/LabelStyle.html"

            rel="nofollow">OX</a>): (<em>Nuevo en v4m4</em>): Estilo de la
          etiqueta de la referencia. Solo aplica si esta referencia se ha
          anotado con <em>@DescriptionsList</em>. Funciona como en <a class="wiki_link"

            href="#Vista-Personalizacion+de+propiedad-Formato+de+etiqueta">el
            caso de las propiedades</a>.</li>
        <li><strong>@Collapsed</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Collapsed.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v5.0)</em> La referencia se
          mostrará contraída para las vistas indicadas. Visualmente significa
          que el marco que rodea a la vista de la referencia se iniciará
          cerrado. Más tarde el usuario podrá establecer sus preferencias
          haciendo clic en el icono de expansión.</li>
        <li><strong><a class="wiki_link" href="#escoger-tab-para-accion-de-busqueda-referencias">@SearchListTab</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListTab.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4)</em> Definimos el tab a
          mostrar en la lista cuando se hace una busqueda. Si omitimos esta
          anotación, al realizar una búsqueda se mostrará el tab por defecto.</li>
        <li><strong><a class="wiki_link" href="#vista-para-editar-referencia">@NewView</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewView.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7) </em>Vista del objeto 
          referenciado a usar cuando se crea uno nuevo desde esta referencia.</li>
        <li><strong><a class="wiki_link" href="#vista-para-editar-referencia">@EditView</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditView.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7) </em>Vista del objeto 
          referenciado a usar cuando se modifica desde esta referencia.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Accion+de+creacion+propia">@NewAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7) </em>Permite definir tu 
          propia acción para empezar a crear un nuevo elemento para esta referencia.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+referencia-Accion+de+modificacion+propia">@EditAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7) </em>Permite definir tu 
          propia acción para ver/editar el elemento actual de esta referencia.</li>
      </ol>
      Si no usamos ninguna de estas anotaciones OpenXava dibuja la referencia
      usando su vista por defecto. Por ejemplo si tenemos una referencia así:<br>
      <pre><code class="language-java">@ManyToOne
private Familia familia;</code></pre>
      La interfaz gráfica tendrá el siguiente aspecto:<br>
      <img src="files/view_es120.jpg" alt="view_es120.jpg" title="view_es120.jpg"><br>
      <h3 id="toc15"><a name="Vista-Personalizacion+de+referencia-Escoger+vista"></a>Escoger
        vista</h3>
      La modificación más sencilla sería especificar que vista del objeto
      referenciado queremos usar. Esto se hace mediante <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReferenceView.html"

          rel="nofollow">@ReferenceView</a></em>:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@ReferenceView("Simple")
private Factura factura;</code></pre>
      Para esto en el componente <em>Factura</em> tenemos que tener una vista
      llamada simple:<br>
      <pre><code class="language-java">@Entity
@Views({
 ...
 @View(name="Simple", members="año, numero, fecha, descuentoAño;"),
 ...
})
public class Factura {</code></pre>
      Y así en lugar de usar la vista de la <em>Factura</em> por defecto, que
      supuestamente sacará toda la información, visualizará ésta:<br>
      <img src="files/view_es130.jpg" alt="view_es130.jpg" title="view_es130.jpg"><br>
      <h3 id="toc16"><a name="Vista-Personalizacion+de+referencia-Personalizar+el+enmarcado"></a>Personalizar
        el enmarcado</h3>
      Si combinamos <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoFrame.html"

          rel="nofollow">@NoFrame</a></em> con un grupo podemos agrupar
      visualmente una propiedad que no forma parte de la referencia, por
      ejemplo:<br>
      <pre><code class="language-java">@View( members=
 ...
 "comercial [" +
 " comercial; " +
 " relacionConComercial;" +
 "]" +
 ...
)
public class Cliente {
 ...
 @ManyToOne(fetch=FetchType.LAZY)
 @NoFrame
 private Comercial comercial;
 ...
}</code></pre>
      Así obtendríamos:<br>
      <img src="files/view_es140.jpg" alt="view_es140.jpg" title="view_es140.jpg"><br>
      <h3 id="toc17"><a name="Vista-Personalizacion+de+referencia-Accion+de+busqueda+propia"></a>Acción
        de búsqueda propia</h3>
      El usuario puede buscar un nuevo valor para la referencia simplemente
      tecleando el código y al salir del editor recupera el valor
      correspondiente; por ejemplo, si el usuario teclea "1" en el campo del
      código de comercial, el nombre (y demás datos) del comercial "1" serán
      automaticamente rellenados. También podemos pulsar la linternita, en ese
      caso vamos a una lista en donde podemos filtrar, ordenar, etc, y marcar el
      objeto deseado.<br>
      Para definir nuestra propia rutina de búsqueda podemos usar <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchAction.html"

          rel="nofollow">@SearchAction</a></em>, como sigue:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY) @SearchAction("MiReferencia.buscar")
private Comercial comercial;</code></pre>
      Ahora al pulsar la linternita ejecuta nuestra acción, la cual tenemos que
      tener definida en <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;controlador nombre="MiReferencia"&gt;
 &lt;accion nombre="buscar" oculta="true"
 clase="org.openxava.test.acciones.MiAccionBuscar"
 imagen="images/search.gif"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;usa-objeto nombre="xava_referenceSubview"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;usa-objeto nombre="xava_tab"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;usa-objeto nombre="xava_currentReferenceLabel"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Lo que hagamos en <em>MiAccionBuscar</em> ya es cosa nuestra. Podemos,
      por ejemplo, refinar la acción por defecto de busqueda para filtrar la
      lista usada para buscar, como sigue:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 * @author Javier Paniza
 */

public class MiAccionBuscar extends ReferenceSearchAction {

 public void execute() throws Exception {
 super.execute(); // El comportamiento por defecto para buscar
 getTab().setBaseCondition("${codigo} &lt; 3"); // Añadir un filtro a la lista
 }

}</code></pre>
      Veremos más acerca de las acciones en el <a class="wiki_link" href="controllers_es.html">capítulo
        7</a>.<br>
      <h3 id="toc18"><a name="Vista-Personalizacion+de+referencia-Condicion+para+la+lista+de+busqueda+(referencia,+nuevo+en+v4m4)"></a><a

          name="search-list-condition-reference"></a>Condición para la lista de
        búsqueda (referencia, <em>nuevo en v4m4</em>)</h3>
      Cuando el usuario pulsa la linternita va a una lista donde puede filtrar,
      ordenar, etc, y marca el objeto deseado. Puedes usar <em>@SearchAction</em>
      para sobreescribir completamente este comportamiento, aunque si solo
      quieres establecer una condición propia, es más práctico usar <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListCondition.html"

          rel="nofollow">@SearchListCondition</a></em>. Desde <em>v7.4</em> la
      condición soporta el uso de <em>${this.}</em> para referenciar una
      propiedad de la entidad misma. El ejemplo anterior se puede reescribir
      como sigue:<br>
      <pre><code class="language-java">private int numero;

@ManyToOne(fetch=FetchType.LAZY)
@SearchListCondition("${codigo} &lt; 3")
@SearchListCondition("${codigo} &lt; ${this.numero}", forViews="SearchListCondition") // ${this.} Nuevo en v7.4
private Comercial comercial;
</code></pre> Fíjate como no necesitas crear ninguna acción.<br>
      <h3 id="toc19"><a name="Vista-Personalizacion+de+referencia-Accion+de+creacion+propia"></a>Acción
        de creación propia</h3>
      Si no hemos puesto <em><a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoCreate.html">@NoCreate</a></em>
      el usuario tendrá un vínculo para poder crear un nuevo objeto desde la
      referencia. Es el icono con un + que hemos marcado en rojo:</div>
    <div class="wiki" style="display: block;"><img src="files/view_es143.png" alt="view_es143.png"

        title="view_es143.png"></div>
    <div class="wiki" style="display: block;">OpenXava sacará un diálogo
      con la vista por defecto del componente referenciado y permitirá
      introducir valores y pulsar un botón para crearlo. Así:</div>
    <div class="wiki" style="display: block;"><img src="files/view_es147.png" alt="view_es147.png"

        title="view_es147.png"></div>
    <div class="wiki" style="display: block;">Pero sí que podemos personalizar
      como funciona este diálogo de creación, para todas las referencia a <i>Almacen</i>
      en nuestra aplicación. Para esto hemos de crear un controlador llamado
      como la entidad con el sufijo <i>Creation</i> (<i>AlmacenCreation,
        ClienteCreation, ProductoCreation</i>, etc). Si OpenXava ve que existe
      un controlador así lo usa en vez del de por defecto para permitir crear un
      nuevo objeto desde una referencia. Por ejemplo, podemos poner en nuestro <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;!--
Dado que su nombre es AlmacenCreation (nombre modelo + Creation) es usado
por defecto para crear desde referencia, en lugar de NewCreation.
La acción 'new' se ejecuta automáticamente.
--&gt;
&lt;controlador nombre="AlmacenCreation"&gt;
    &lt;hereda-de controlador="NewCreation"/&gt;
    &lt;accion nombre="new" oculta="true"
        clase="org.openxava.test.acciones.CrearNuevoAlmacenDesdeReferencia"/&gt;
    &lt;accion nombre="saveNew" por-defecto="casi-siempre"
        clase="org.openxava.test.acciones.GuardarNuevoAlmacenDesdeReferencia"/&gt;	
&lt;/controlador&gt;
</code></pre> En este caso cuando en una referencia a <em>Almacen</em> pulsemos
      el icono para crear, se mostrará un diálogo para crear un <em>Almacen</em>
      como el de arriba, pero en lugar de usar las acciones por defecto usará
      las acciones en <em>AlmacenCreation</em>.<br>
      Sí tenemos una acción <em>new</em>, ésta se ejecuta automáticamente justo
      después de abrir el diálogo, la podemos usar para iniciar la vista si lo
      necesitamos. La definimos como oculta, para que no se muestre como un
      botón al usuario. Este sería un ejemplo de implementación:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

public class CrearNuevoAlmacenDesdeReferencia extends NewAction {

    @Override
    public void execute() throws Exception {		
        super.execute();
        getView().setValue("nombre", "NUEVO ALMACEN");
    }

}</code></pre>
    </div>
    <div class="wiki" style="display: block;">En este caso, lo que hace es poner
      un valor por defecto al nombre, pero podemos hacer cosas más complejas
      como ocultar campos, usar otra vista diferente para el diálogo, etc.
      Fíjate en el detalle de que no llama a <i>showDialog()</i> porque cuando
      se ejecuta la acción <i>new</i> OpenXava ya ha abierto el diálogo.</div>
    <div class="wiki" style="display: block;">En nuestro ejemplo también hemos
      sobreescrito la acción <i>saveNew</i>, que es la que se ejecuta al pulsar
      el botón <i>Crear</i> del diálogo. Esto sería un ejemplo de
      implementación:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

public class GuardarNuevoAlmacenDesdeReferencia extends SaveNewAction {
	
    @Override
    public void execute() throws Exception {
        String nombre = getView().getValueString("nombre"); // Obtener nombre antes de cerrar el diálogo
        super.execute(); // Guarda el almacén y cierra el diálogo (si no hay errores de validación)
        if (!getErrors().contains() &amp;&amp; nombre.equals("NUEVO ALMACEN")) {
            addWarning("almacen_creado_usando_nombre_por_defecto"); // Mensaje en archivo de mensajes i18n  
        }
    }

}</code></pre>
    </div>
    <div class="wiki" style="display: block;">Es también una lógica muy simple.
      Si detecta que hemos grabado usando el valor por defecto para el nombre,
      visualiza un mensaje de advertencia.</div>
    <div class="wiki" style="display: block;">No es necesario sobreescribir las
      dos, podemos implementar solo <i>new</i> o solo <i>saveNew</i>. También
      podemos sobreescribir la acción <i>cancel</i> si lo necesitamos. Además,
      si ponemos acciones extra en nuestro controlador <i>AlmacenCreation</i>,
      estas acciones aparecerán como botones adicionales en el diálogo de
      creación. </div>
    <div class="wiki" style="display: block;">Desde v7.7 puedes usar la anotación <i><a class="wiki_link_ext" 
      href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewAction.html"
      rel="nofollow">@NewAction</a></i>
      para definir un comportamiento propio para la acción de creación en una
      referencia concreta. Por ejemplo:</div>
    <pre><code class="language-java">@NewAction("Artist.createNewLevel")
@ManyToOne
ActingLevel level;
</code></pre>
    <div class="wiki" style="display: block;">En este caso, cuando el usuario pulse en el icono de crear para la 
      referencia <i>level</i> en <i>Artist</i>, se ejecutará la acción <i>Artist.createNewLevel</i> 
      en lugar de la de por defecto. Esto solo afecta a esta referencia concreta; 
      otras referencias a <i>ActingLevel</i> en la aplicación usarán el comportamiento estándar.</div>
    <div class="wiki" style="display: block;">Necesitas definir la acción en <i>controllers.xml</i>:</div>
    <pre><code class="language-xml">&lt;controller name="Artist"&gt;
    &lt;extends controller="Typical"/&gt;
    &lt;action name="createNewLevel" hidden="true"
        icon="plus-box-multiple"
        class="org.openxava.test.actions.CreateNewLevelFromArtistAction"/&gt;
&lt;/controller&gt;
</code></pre>
    <div class="wiki" style="display: block;">Y la clase de la acción:</div>
    <pre><code class="language-java">package org.openxava.test.actions;

import org.openxava.actions.*;

public class CreateNewLevelFromArtistAction extends CreateNewFromReferenceAction {
	
    @Override
    public void execute() throws Exception {
        super.execute();
        getView().setValue("description", "NEW ACTING LEVEL");
    }

}
</code></pre>
    <div class="wiki" style="display: block;">Fíjate que la acción extiende <i>CreateNewFromReferenceAction</i>, 
      que se encarga de abrir el diálogo y configurar la vista. Solo necesitas añadir tu lógica propia.</div>
    <div class="wiki" style="display: block;">
      <h3 id="toc20"><a name="Vista-Personalizacion+de+referencia-Accion+de+modificacion+propia"></a>Acción
        de modificación propia</h3></div>
    <div class="wiki" style="display: block;">Si no hemos puesto <em> <a href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoModify.html">@NoModify</a>
      </em>el usuario tendrá un vínculo para poder modificar el objeto
      actualmente visualizado en la referencia. Es el icono con un lápiz que
      hemos marcado en rojo:
      <div class="wiki" style="display: block;"><img src="files/view_es148.png"

          alt="view_es148.png" title="view_es148.png"></div>
      <div class="wiki" style="display: block;">OpenXava sacará un
        diálogo con la vista por defecto del componente referenciado y permitirá
        introducir valores y pulsar un botón para modificar los valores
        actuales. Así:</div>
      <div class="wiki" style="display: block;"><img src="files/view_es149.png"

          alt="view_es149.png" title="view_es149.png"></div>
      <div class="wiki" style="display: block;">Pero sí que podemos personalizar
        como funciona este diálogo de modificación, para todas las referencia a
        <i>Almacen</i> en nuestra aplicación. Para esto hemos de crear un
        controlador llamado como la entidad con el sufijo <i>Modification</i> (<i>Almacen</i><i><i>Modification</i>,
          Cliente</i><i><i>Modification</i>, Producto</i><i>Modification</i>,
        etc). Si OpenXava ve que existe un controlador así lo usa en vez del de
        por defecto para permitir modificar un objeto existente desde una
        referencia. Por ejemplo, podemos poner en nuestro <em>controladores.xml</em>:<br>
        <pre><code class="language-xml">&lt;!-- 
Dado que su nombre es AlmacenModification (nombre modelo + Modification) es usado
por defecto para modificar desde referencia, en lugar de Modification.
La acción 'search' se ejecuta automáticamente.
--&gt;
&lt;controlador nombre="WarehouseModification"&gt;
    &lt;hereda-de controlador="Modification"/&gt;
    &lt;accion nombre="search" oculta="true"
        clase="org.openxava.test.acciones.ModificarAlmacenDesdeReferencia"/&gt;
    &lt;accion nombre="update" por-defecto="casi-siempre"
        clase="org.openxava.test.acciones.ActualizarAlmacenDesdeReferencia"/&gt;			
&lt;/controlador&gt;
</code></pre> En este caso cuando en una referencia a <em>Almacen</em> pulsemos
        el icono para modificar, se mostrará un diálogo para modificar un <em>Almacen</em>
        como el de arriba, pero en lugar de usar las acciones por defecto usará
        las acciones en <em>AlmacenModification</em>.<br>
        Sí tenemos una acción <em>search</em>, ésta se ejecuta automáticamente
        justo después de abrir el diálogo, la podemos usar para iniciar la vista
        si lo necesitamos. La definimos como oculta, para que no se muestre como
        un botón al usuario. Este sería un ejemplo de implementación:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

public class ModificarAlmacenDesdeReferencia extends SearchByViewKeyAction {
		
    public void execute() throws Exception {		
        super.execute();		
        getView().setValue("nombre", "ALMACÉN MODIFICADO");
    }

}</code></pre>
      </div>
      <div class="wiki" style="display: block;">En este caso, lo que hace es
        poner un valor por defecto al nombre, pero podemos hacer cosas más
        complejas como ocultar campos, usar otra vista diferente para el
        diálogo, etc. Fíjate en el detalle de que no llama a <i>showDialog()</i>
        porque cuando se ejecuta la acción <i>search</i> OpenXava ya ha abierto el
        diálogo.</div>
      <div class="wiki" style="display: block;">En nuestro ejemplo también hemos
        sobreescrito la acción <i>update</i>, que es la que se ejecuta al
        pulsar el botón <i>Actualizar</i> del diálogo. Esto sería un ejemplo de
        implementación:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

public class ActualizarAlmacenDesdeReferencia extends UpdateAction {
	
    @Override
    public void execute() throws Exception {
        String nombre = getView().getValueString("nombre"); // Obtiene el nombre antes de cerrar el diálogo
        super.execute(); // Actualiza el almacén y cierra el diálogo (si no hay errores de validación)
        if (!getErrors().contains() && nombre.equals("ALMACÉN MODIFICADO")) {
            addWarning("almacen_modificado_usando_nombre_por_defecto"); // Mensaje en archivo de mensajes i18n  
        }
    }

}</code></pre>
      </div>
      <div class="wiki" style="display: block;">Es también una lógica muy
        simple. Si detecta que hemos grabado usando el valor por defecto para el
        nombre, visualiza un mensaje de advertencia.</div>
      No es necesario sobreescribir las dos, podemos implementar solo <i>search</i>
      o solo <i>update</i>. También podemos sobreescribir la acción <i>cancel</i>
      si lo necesitamos. Además, si ponemos acciones extra en nuestro
      controlador <i>AlmacenModification</i>, estas acciones aparecerán como
      botones adicionales en el diálogo de modificación.</div>
      <div class="wiki" style="display: block;">Desde v7.7 puedes usar la anotación <i><a class="wiki_link_ext" 
        href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditAction.html"
        rel="nofollow">@EditAction</a></i>
        para definir un comportamiento propio para la acción de
        modificación en una referencia concreta. Por ejemplo:</div>
      <pre><code class="language-java">@EditAction("Artist.modifyLevel")
@ManyToOne
ActingLevel level;
</code></pre>
      <div class="wiki" style="display: block;">En este caso, cuando el usuario pulse en el icono de modificar para la 
        referencia <i>level</i> en <i>Artist</i>, se ejecutará la acción <i>Artist.modifyLevel</i> 
        en lugar de la de por defecto. Esto solo afecta a esta referencia concreta; 
        otras referencias a <i>ActingLevel</i> en la aplicación usarán el comportamiento estándar.</div>
      <div class="wiki" style="display: block;">Necesitas definir la acción en <i>controllers.xml</i>:</div>
      <pre><code class="language-xml">&lt;controller name="Artist"&gt;
    &lt;extends controller="Typical"/&gt;
    &lt;action name="modifyLevel" hidden="true"
        icon="border-color"
        class="org.openxava.test.actions.ModifyLevelFromArtistAction"/&gt;
&lt;/controller&gt;
</code></pre>
      <div class="wiki" style="display: block;">Y la clase de la acción:</div>
      <pre><code class="language-java">package org.openxava.test.actions;

import org.openxava.actions.*;

public class ModifyLevelFromArtistAction extends ModifyFromReferenceAction {
	
    @Override
    public void execute() throws Exception {
        super.execute();
        String description = getView().getValueString("description").trim();
        getView().setValue("description", description + " (MODIFIED)");
    }
	
}
</code></pre>
      <div class="wiki" style="display: block;">Fíjate que la acción extiende <i>ModifyFromReferenceAction</i>, 
        que se encarga de abrir el diálogo y cargar los datos actuales. Solo necesitas añadir tu lógica propia.</div>
    </div>
    <div class="wiki" style="display: block;">
      <h3 id="toc21"><a name="Vista-Personalizacion+de+referencia-Lista+descripciones+(combos)"></a>Lista
        descripciones (combos)</h3>
      Con <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DescriptionsList.html"

          rel="nofollow">@DescriptionsList</a></em> podemos instruir a OpenXava
      para que visualice la referencia como una lista de descripciones
      (actualmente como un combo). Esto puede ser práctico cuando haya un nombre o descripción significativo. 
      Tradicionalmente ha funcionado bien con pocos valores, sin embargo a partir de la versión 7.6 su
      implementación permite conjuntos de datos muy grandes, incluso de millones de registros con
      un buen rendimiento.<br>
      La sintaxis es:<br>
      <pre><code class="language-java">@DescriptionsList(
  descriptionProperties="propiedades",  // 1
  depends="depende de",                 // 2
  condition="condición",                // 3
  orderByKey="true|false",              // 4
  order="orden"                         // 5
  filtro="clase del filtro"             // 6 Nuevo en v6.4
 showReferenceView="true|false",       // 7 Nuevo en v5.5
  forTabs="tab1,tab2,...",              // 8 Nuevo en v4m4
  notForTabs="tab1,tab2,..."            // 9 Nuevo en v4m4
)</code></pre>
      <ol>
        <li><strong>descriptionProperties</strong> (opcional): Indica que
          propiedad o propiedades tienen que aparecer en la lista, si no se
          especifica asume la propiedad <em><em>name</em>, <em>nombre, title,
              titulo, </em>description</em> o <em>descripcion</em> (desde v7.1
          puedes especificar tus propias propiedades por defecto añadiendo la
          entrada <i>defaultDescriptionPropertiesValueForDescriptionsList</i>
          en <i>xava.properties</i>) (hasta v7.3.3 los valores por defecto eran
          <em>description</em>, <em>descripcion</em>, <em>name</em> o <em>nombre</em>).
          Si el objeto referencia no tiene ninguna propiedad llamada así
          entonces es obligado especificar aquí un nombre de propiedad. Permite
          poner una lista de propiedades separadas por comas. Al usuario le
          aparecen concatenadas.</li>
        <li><strong>depends</strong> (opcional): Se usa junto con <em>condition</em>
          para hacer que el contenido de la lista dependa de los valores de
          otros miembros visualizados en la vista principal (si simplemente
          ponemos los nombres de los miembro) o en la misma vista (si ponemos <em>this.</em>
          delante de los nombres de los miembros). Para usar más de un miembro
          sepáralos con comas.</li>
        <li><strong>condition</strong> (opcional): Permite poner una condición
          (al estilo SQL) para filtrar los valores que aparecen en la lista de
          descripciones.</li>
        <li><strong>orderByKey</strong> (opcional): Por defecto los datos salen
          ordenados por descripción, pero si ponemos está propiedad a <em>true</em>
          saldrán ordenados por clave.</li>
        <li><strong>order</strong> (opcional): Permite poner un orden (al estilo
          SQL) para los valores que aparecen en la lista de descripciones.</li>
        <li><strong>filter</strong> (opcional): <i>(Nuevo en v6.4)</i> Permite
          definir la lógica para rellenar los valores de los parametros usados
          en la condición (los ?). Tiene que implementar <a href="https://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/filters/IFilter.html"><i>IFilter</i></a>
          y puedes usar aquí <a href="tab_es.html#Datos+tabulares-Filtros+y+condicion+base">los
            mismos filtros usadado para <i>@Tab</i></a>.</li>
        <li><strong>showReferenceView</strong> (opcional): <em>(Nuevo en v5.5)</em>
          Muestra un combo y una vista detalle de la referencia al mismo tiempo.
          La vista de la referencia es de solo lectura y sus valores cambian
          cuando el usuario cambia el combo. La vista usada es la que se
          especifica en <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReferenceView.html"

              rel="nofollow">@ReferenceView</a></em>. El valor por defecto es <em>false</em>.</li>
        <li><strong>forTabs</strong> (opcional): <em>(Nuevo en v4m4)</em>
          Permite poner una lista de nombres de tabs entre comas. Si alguna de
          las propiedades de <em>descriptionProperties</em> se pone en alguno
          de esos tabs la propiedad se visualizará como una lista de
          descripciones para seleccionar en la parte del filtro.
          A partir de <i>v7.6</i> solo se cargan hasta 200 elementos en los combos
          para las <i>@DescriptionsList</i> usados en los filtros de las listas
          para evitar colapsos con grandes conjuntos de datos.</li>
        <li><strong>notForTabs</strong> (opcional): <em>(Nuevo en v4m4)</em>
          Permite poner una lista de nombres de tabs entre comas. Si alguna de
          las propiedades de <em>descriptionProperties</em> se pone en alguno
          de esos tabs la propiedad continuará visualizarándose como una
          propiedad plana en la parte del filtro.</li>
      </ol>
      El uso más simple es:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@DescriptionsList
private Almacen almacen;</code></pre>
      Que haría que una referencia a <em>Almacen</em> se representara así:<br>
      <img src="files/view_es150.jpg" alt="view_es150.jpg" title="view_es150.jpg"><br>
      En un principio saca todos los almacenes, aunque en realidad usa la <em>baseCondition</em>
      y <em>filter</em> especificados en el <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Tab.html"

          rel="nofollow">@Tab</a></em> por defecto de <em>Almacen</em>. Veremos
      como funcionan los <a class="wiki_link" href="tab_es.html">tabs</a>.<br>
      Si queremos, por ejemplo, que se visualice un combo con las familias de
      productos y según la familia que se escoja se rellene el combo de las
      subfamilias, podemos hacer algo así:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@DescriptionsList(orderByKey=true) // 1
private Familia familia;

@ManyToOne(fetch=FetchType.LAZY) @NoCreate // 2
@DescriptionsList(
 descriptionProperties="descripcion", // 3
 depends="familia", // 4
 condition="${familia.codigo} = ?" // 5
 order="${descripcion} desc" // 6
 )
private Subfamilia subfamilia;</code></pre>
      Se visualizarán 2 combos uno con todas las familias y otro vacío, y al
      seleccionar una familia el otro combo se rellenará con todas las
      subfamilias de esa familia.<br>
      En el caso de <em>Familia</em> (1) se visualiza la propiedad <em>descripcion</em>
      de <em>Familia</em>, ya que si no lo indicamos por defecto visualiza una
      propiedad llamada <em>'descripcion'</em> o <em>'nombre'</em>. En este
      caso los datos aparecen ordenados por clave y no por descripción. En el
      caso de <em>Subfamilia</em> indicamos que no muestre el vínculo para
      crear una nueva subfamilia (2) y que la propiedad a visualizar es <em>descripcion</em>
      (aunque esto lo podríamos haber omitido). Con <em>depends</em> (4)
      hacemos que este combo dependa de la referencia <em>familia</em>, cuando
      cambia <em>familia</em> en la interfaz gráfica, rellenará esta lista de
      descripciones aplicando la condición de <em>condition</em> (5) y enviando
      como argumento (para rellenar el interrogante) el nuevo valor de familia.
      Y las entradas están ordenadas descendentemente por <em>descripcion</em>
      (6).<br>
      En <em>condition</em> y <em>order</em> ponemos los nombres de las
      propiedades entre <em>${}</em> y los argumentos como <em>?</em>, los
      operadores de comparación son los de SQL.<br>
      <div class="wiki" style="display: block;">En las referencias donde el <i>@DescriptionsList</i>
        depende de otro <i>@DescriptionsList</i> con clave múltiple, puedes
        poner un ? por cada valor de la clave. Es decir, si tienes una entidad <i>Almacen</i>
        como esta:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">@Entity @Getter @Setter
@IdClass(AlmacenKey.class)
public class Almacen {

    @Id 
    int codigoZona;

    @Id 
    int codigo;

    @Column(length=40) @Required
    String nombre;

}
</code></pre> </div>
      <div class="wiki" style="display: block;">Con una clave compuesta que
        incluye <i>codigoZona</i> y <i>codigo</i>. Y en otra entidad tienes
        dos <i>@DescriptionsLists</i> como estos:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">@ManyToOne
@DescriptionsList
Warehouse almacenPrincipal;
	
@ManyToOne
@DescriptionsList(
    depends="almacenPrincipal", 
    condition="${almacen.codigoZona} = ? and ${almacen.codigo} = ?") <br>    // condition="${almacen} = ?" // A partir de v6.6.3
Carrier transportistaDefecto;
</code></pre> </div>
      <div class="wiki" style="display: block;">Donde <i>transportistaDefecto</i>
        depende de <i>almacenPrincipal</i> (con su clave compuesta). El truco
        está en usar dos ? y comparar los dos valores de la clave, <i>codigoZona</i>
        y <i>codigo</i> en <i>condition</i>.</div>
      <div class="wiki" style="display: block;"><i>Nuevo en v6.6.3</i>: También
        es posible indicar sólo el nombre de la referencia en la condición, en
        lugar de las propiedades calificadas de esa referencia. Es decir, puedes
        usar simplemente <i>${almacen} = ?</i> en lugar de <i>${almacen.codigoZona}
          = ? and ${almacen.codigo} = ?</i> en <i>condition</i>. Esto no es
        sólo para clave múltiples, sino también para referencias con clave
        simple, mira:</div>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">@DescriptionsList(
    depends="familia", 
    // condition="${familia.codigo} = ?" // Forma clásica
    condition="${familia} = ?" // A partir de v6.6.3
)
</code></pre> </div>
      <div class="wiki" style="display: block;">Fíjate, <i>${familia}</i> en
        lugar de <i>${familia.codigo}</i>, aunque esto último todavía está
        soportado.</div>
    </div>
    <div class="wiki" style="display: block;"> <em>Nuevo en v3.0.3:</em> Se
      pueden usar propiedades calificadas en <em>condition</em> y <em>order</em>
      incluso si no están incluidas en <em>descriptionProperties</em>. Es
      decir, podemos escribir una condición como esta:<br>
      <pre><code class="language-java">@DescriptionsList( descriptionProperties="nombre",
 condition="${familia.nivel.descripcion} = 'TOPE'"
)
private Subfamilia subfamilia;</code></pre>
      Podemos definir condiciones complejas usando <a class="wiki_link_ext" href="http://en.wikipedia.org/wiki/Java_Persistence_Query_Language"

        rel="nofollow">JPQL</a> (<em>nuevo en v4.5</em>, antes de v4.5 se usaba
      SQL):<br>
      <pre><code class="language-java">@DescriptionsList(
 condition="e.cosa.codigo = (SELECT c.codigo FROM Cosa c WHERE c.nombre = 'COCHE')"
)
private Subfamilia subfamilia;</code></pre>
      Como puedes ver en el ejemplo de arriba, con JPQL <em>(nuevo en v4.5)</em>
      podemos usar <em>e.nombrePropiedad</em> como alternativa a <em>${nombrePropiedad}</em>.<br>
      Podemos especificar una lista de propiedades para que aparezca como
      descripción:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@ReadOnly
@DescriptionsList(descriptionProperties="nivel.descripcion, nombre")
private Comercial comercialAlternativo;
</code></pre>
      En este caso en el combo se visualizará una concatenación de la
      descripción del nivel y el nombre. Además vemos como podemos usar
      propiedades calificadas (<em>nivel.descripcion</em>) también.<br>
      En el caso de poner una referencia lista descripciones (<em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DescriptionsList.html"

          rel="nofollow">@DescriptionsList</a></em>) como solo lectura (<em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

          rel="nofollow">@ReadOnly</a></em>) se visualizará la descripción (en
      este caso <em>nivel.descripcion + nombre</em>) como si fuera una
      propiedad simple de texto y no como un combo.<br>
      A partir de v5.5 es posible mostrar el combo y la vista normal al mismo
      tiempo usando el atributo <em>showReferenceView</em>. Si escribes este
      código:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@DescriptionsList(showReferenceView=true) // Combo y vista al mismo tiempo
@ReferenceView("Simple") // Esta será la vista usada
private Comercial comercial;</code></pre>
      Obtienes:<br>
      <img src="files/view_es155.png" alt="view_es155.png" title="view_es155.png"><br>
      La vista usada es la que se especifica <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReferenceView.html"

          rel="nofollow">@ReferenceView</a></em> o la de por defecto si no se
      especifica ninguna.<br>
      A partir de v5.8 podremos modificar la condición del combo en tiempo de
      ejecución. Por ejemplo, si queremos modificar los valores a mostrar en un
      combo dependiendo de un valor que nos diga el cliente, podemos implementar
      esta acción al cambiar:<br>
      <pre><code class="language-java">public class OnChangeStateConditionInCity extends OnChangePropertyBaseAction {
    public void execute() throws Exception{
        String value = (String)getNewValue();
        String condition = "";
        if ( Is.empty(value)) condition = "1=1";
        else condition = "upper(name) like '%" + value + "%'";
        getView().setDescriptionsListCondition("state", condition);    // modificamos la condición del combo 'state'
    }
}</code></pre>
      Dependiendo de este valor que nos diga el cliente, mediante el método <em>setDescriptionsListCondition()</em>,
      modificaremos la condición del combo 'state' y por tanto los valores que
      se estén mostrando cambiarán.<br>
      <h3 id="toc22"><a name="Vista-Personalizacion+de+referencia-Evento+de+cambio+de+valor+de+referencia"></a>Evento
        de cambio de valor de referencia</h3>
      Si queremos reaccionar al evento de cambio de valor de una propiedad
      podemos poner:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@OnChange(AlCambiarTransportistaEnAlbaran.class)
private Transportista transportista;
</code></pre>
      En este caso nuestra acción escucha al cambio del código de transportista.<br>
      El código a ejecutar es:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 * @author Javier Paniza
 */
public class AlCambiarTransportistaEnAlbaran
 extends OnChangePropertyBaseAction { // 1

 public void execute() throws Exception {
 if (getNewValue() == null) return;
 getView().setValue("observaciones",
 "El transportista es " + getNewValue());
 addMessage("transportista_cambiado");
 }

}</code></pre>
      La acción implementa <em>IOnChangePropertyAction</em>, mediante <em>OnChangePropertyBaseAction</em>
      (1), aunque es una referencia. Recibimos el cambio de la propiedad clave
      de la referencia; en este caso <em>transportista.codigo</em>. El resto es
      como en <a class="wiki_link" href="#Vista-Personalizacion+de+propiedad-Evento+de+cambio+de+valor+de+propiedad">el
        caso de una propiedad</a>.<br>
      <h3 id="toc23"><a name="Vista-Personalizacion+de+referencia-Busqueda+de+referencia+al+cambiar"></a>Búsqueda
        de referencia al cambiar</h3>
      El usuario puede buscar el valor de una referencia simplemente tecleando
      su clave. Por ejemplo, si hay una referencia a <em>Subfamilia</em>, el
      usuario puede teclear el código de subfamilia y automáticamente se cargará
      la información de la subfamilia en la vista. Esto se hace usando una
      acción "al cambiar" que hace la búsqueda. Podemos especificar nuestra
      propia acción para buscar cuando la clave cambia usando la anotación <em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Actions.html"

          rel="nofollow">@OnChangeSearch</a></em>, justo así:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@OnChangeSearch(BuscarAlCambiarSubfamilia.class)
private Subfamilia subfamilia;</code></pre>
      Esta acción se ejecuta para realizar la búsqueda, en vez de la acción por
      defecto, cuando el usuario cambia el código de subfamilia.<br>
      El código a ejecutar es:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;

import org.openxava.actions.*;

/**
 *
 * @author Javier Paniza
 */
public class BuscarAlCambiarSubfamilia
 extends OnChangeSearchAction { // 1

 public void execute() throws Exception {
 if (getView().getValueInt("codigo") == 0) {
 getView().setValue("codigo", new Integer("1"));
 }
 super.execute();
 }

}
</code></pre>
      La acción implementa <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/IOnChangePropertyAction.html"

          rel="nofollow">IOnChangePropertyAction</a></em>, mediante <em>OnChangeSearchAction</em>
      (1), aunque es una referencia. Recibe el cambio de la propiedad clave de
      la referencia; en este caso <em>subfamilia.codigo</em>.<br>
      Este caso es un ejemplo de refinamiento del comportamiento de la búsqueda
      al cambiar, porque extiende de <em>OnChangeSearchAction</em>, que es la
      acción por defecto para buscar, y llama a <em>super.execute()</em>.
      También es posible hacer una acción al cambiar convencional (extendiendo
      de <em>OnChangePropertyBaseAction</em> por ejemplo) anulando
      completamente la lógica de búsqueda.<br>
      <h3 id="toc24"><a name="Vista-Personalizacion+de+referencia-Escoger+un+editor+(referencia,+nuevo+in+v3.1.3)"></a>Escoger
        un editor (referencia, <em>nuevo en v3.1.3</em>)</h3>
      Un editor visualiza la referencia al usuario y le permite editar su valor.
      Por defecto, el editor que OpenXava usa para las referencias una vista de
      detalle dentro de un marco (la forma estándar) o un a combo (si usas <em>@DescriptionsList)</em>,
      pero puedes especificar tu propio editor para una referencia concreta
      usando <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

          rel="nofollow">@Editor</a></em>.<br>
      Por ejemplo, si tienes una referencia a una entidad <em>Color</em> y la
      quieres visualizar en alguna entidad o vista particular usando una
      interfaz de usuario personalizada, como un grupo de botones radiales
      (radio buttons) con los colores disponibles. Puedes hacerlo de esta forma:<br>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@Editor("ColorBotonesRadiales")
private Color color;</code></pre>
      En este caso se usará el editor <em>ColorBotonesRadiales</em> para
      visualizar y editar, en vez de la de por defecto. Tienes que definir el
      editor <em>Color</em><em>RadioButton</em> en el archivo <em>editores.xml</em>
      en <i>src/main/resources/xava</i> (o <i>xava</i> para v6 o anterior) de
      tu proyecto:<br>
      <pre><code class="language-xml">&lt;editor nombre="ColorBotonesRadiales" url="colorBotonesRadialesEditor.jsp"/&gt;</code></pre>
      Además has de escribir el código JSP para tu editor en <em>colorBotonesRadialesEditor.jsp</em>.<br>
      Esta característica es para cambiar el editor para una referencia concreta
      en una entidad concreta, o incluso solo en una vista de esa entidad
      (usando <em>@Editor(forViews=)</em>). Si lo que quieres es cambiar un
      editor para todas las referencias a cierto tipo de entidad a nivel de
      aplicación entonces es mejor configurarlo usando el archivo <em>editores.xml</em>.<br>
      Veáse más en la sección de <a class="wiki_link" href="customizing_es.html#Personalizacion-Editores-Editores+para+referencias+%28nuevo+en+v3.1.3%29">Editores
        para referencias</a>.</div>
    <div class="wiki" style="display: block;">
      <h3 id="toc25"><a name="escoger-tab-para-accion-de-busqueda-referencias"></a>Escoger
        tab para la acción de busqueda (referencia, <em>nuevo en v7.4</em>)</h3>
      <p>Con <a href="https://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListTab.html"><em>@SearchListTab</em></a>
        podemos indicar que tab mostrar en el dialogo al realizar la acción de
        busqueda.</p>
      <pre><code class="language-java">@ManyToOne(fetch=FetchType.LAZY)
@SearchListTab("ZonaA")
private Almacen almacen;</code></pre>
      Para esto en el <em>Almacen</em> debemos tener un tab llamado <em>ZonaA</em>:<br>
      <div class="wiki">
        <pre><code class="language-java">@Entity
@Tab(name="ZonaA", properties="numero, nombre, zona", defaultOrder="${numero} desc", baseCondition="${zona} = 'A'")
public class Almacen {</code></pre>
        Además, los atributos <em>forViews</em> y <em>notForViews</em> están
        disponibles en <i>@SearchListTab</i>. </div>
      <h3><a name="vista-para-editar-referencia"></a>Vista para editar (referencia, <em>nuevo en v7.7</em>)</h3>
      Por defecto, cuando el usuario crea un nuevo objeto desde una referencia o 
      modifica uno existente, se usa la vista por defecto del objeto referenciado. Con 
      <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewView.html"
        rel="nofollow">@NewView</a></em> y 
      <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditView.html"
        rel="nofollow">@EditView</a></em> podemos especificar vistas diferentes para 
      la creación y la modificación respectivamente:<br>
      <pre><code class="language-java">@ManyToOne
@NewView("CreacionSimple")
@EditView("EdicionSimple")
private Cliente cliente;</code></pre>
      Cuando el usuario pulsa en el botón para crear un nuevo cliente, se usará la 
      vista <em>CreacionSimple</em> de <em>Cliente</em>. Cuando el usuario pulsa en 
      el botón para modificar el cliente actual, se usará la vista <em>EdicionSimple</em>.<br>
      <br>
      Podemos usar solo una de estas anotaciones si solo necesitamos personalizar 
      la creación o la modificación. Por ejemplo, si solo usamos <em>@NewView</em>, 
      la vista por defecto se seguirá usando para la modificación.<br>
      <h2 id="toc25"><a name="Vista-Personalizacion+de+coleccion"></a>Personalización
        de colección</h2>
      Podemos refinar la forma de visualización y comportamiento de una
      colección <em>@OneToMany/@ManyToMany</em> o <a href="model_es.html#colecciones-calculadas">calculada</a>
      en la vista usando las siguientes anotaciones:<br>
      <pre><code class="language-java">@CollectionView         //  1
@ReadOnly               //  2
@EditOnly               //  3
@NoCreate               //  4
@NoModify               //  5
@AsEmbedded             //  6
@ListProperties         //  7
@RowStyle               //  8
@EditAction             //  9
@ViewAction             // 10
@NewAction              // 11
@AddAction              // 12 Nuevo en v5.7
@SaveAction             // 13
@HideDetailAction       // 14
@RemoveAction           // 15
@RemoveSelectedAction   // 16
@DeleteSelectedAction   // 17 Nuevo en v7.4
@ListAction             // 18
@RowAction              // 19 Nuevo en v4.6
@DetailAction           // 20
@OnSelectElementAction  // 21 Nuevo en v3.1.2
@Editor                 // 22 Nuevo en v3.1.3
@SearchListCondition    // 23 Nuevo en v4m4
@Tree                   // 24 Nuevo en v4m4
@Collapsed              // 25 Nuevo en v5.0
@ListSubcontroller      // 26 Nuevo en v5.7
@Chart                  // 27 Nuevo en v7.4
@SimpleList             // 28 Nuevo en v7.4
@SearchListTab          // 29 Nuevo en v7.4
@NoDefaultActions       // 30 Nuevo en v7.4
@NewView                // 31 Nuevo en v7.7
@EditView               // 32 Nuevo en v7.7
@OneToMany/@ManyToMany  // No para colecciones calculadas
private Collection nombreColeccion; // O un getter para colecciones calculadas</code></pre>
      Y las siguientes anotaciones para una <em>@ElementCollection (nuevo en
        v5.0)</em>:<br>
      <pre><code class="language-java">@ReadOnly               //  2 Nuevo en v5.1
@EditOnly               //  3 Nuevo en v5.1
@ListProperties         //  7
@RemoveSelectedAction   // 15 Nuevo en v5.3
@Editor                 // 20
@Collapsed              // 23
@Chart                  // 27 Nuevo en v7.4
@SimpleList             // 28 Nuevo en v7.4
@ElementCollection
private Collection nombreColleccion;</code></pre>
      Todas estas anotaciones siguen las <a class="wiki_link" href="#Vista-Normas%20para%20las%20anotaciones%20de%20vista">normas
        para anotaciones de vista</a> y todas ellas son opcionales. OpenXava
      siempre asume valores por defecto correcto si se omiten.<br>
      <ol>
        <li><strong>@CollectionView</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/CollectionView.html"

            rel="nofollow">OX</a>): La vista del objeto referenciado que se ha
          de usar para representar el detalle. Por defecto usa la vista por
          defecto.</li>
        <li><strong>@ReadOnly</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

            rel="nofollow">OX</a>): Si la ponemos solo podremos visualizar los
          elementos de la colección, no podremos ni añadir, ni borrar, ni
          modificar los elementos.</li>
        <li><strong>@EditOnly</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditOnly.html"

            rel="nofollow">OX</a>): Si la ponemos podemos modificar los
          elementos existentes, pero no podemos añadir nuevos ni eliminar.</li>
        <li><strong>@NoCreate</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoCreate.html"

            rel="nofollow">OX</a>): Si la ponemos el usuario final no tendrá el
          vínculo que le permite crear o añadir objetos del tipo del objeto
          referenciado.</li>
        <li><strong>@NoModify</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoModify.html"

            rel="nofollow">OX</a>): Si la ponemos el usuario final no tendrá el
          vínculo que le permite modificar objetos del tipo del objeto
          referenciado. Sólo aplica a <a class="wiki_link" href="model_es.html#Modelo-Colecciones-Colecciones%20incrustadas">colecciones
            incrustadas</a>.</li>
        <li><strong>@AsEmbedded</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/AsEmbedded.html"

            rel="nofollow">OX</a>): Por defecto las <a class="wiki_link" href="model_es.html#Modelo-Colecciones-Colecciones%20incrustadas">colecciones
            incrustadas</a> permiten al usuario crear y añadir elementos,
          mientras que las colecciones convencionales permiten solo escoger
          entidades existentes para añadir (o quitar) de la colección. Si
          ponemos <em>@AsEmbedded</em> entonces la colección de entidades se
          comportan como una colección de agregados, permitiendo al usuario
          añadir objetos y editarlos directamente. No tiene efecto en el caso de
          una <a class="wiki_link" href="model_es.html#Modelo-Colecciones-Colecciones%20incrustadas">colección
            incrustada</a>.</li>
        <li><strong>@ListProperties</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ListProperties.html"

            rel="nofollow">OX</a>): Indica las propiedades que han de salir en
          la lista al visualizar la colección. Podemos calificar las
          propiedades. Por defecto saca todas las propiedades persistentes del
          objeto referenciado (sin incluir referencias ni calculadas). Solo una
          <em>@ListProperties</em> por vista está permitida. El sufijo + <em>(nuevo
            en v4.1)</em> se puede añadir a una propiedad para mostrar la <a class="wiki_link"

            href="tab_es.html#Datos%20tabulares-Sumatorio%20de%20columna%20%28nuevo%20en%20v4.1%29">suma
            de la columna, como en los tabs</a>. Antes de v5.9 el sumatorio de
          columnas no funcionaba en las colecciones calculadas, en las
          colecciones de elementos ni en las listas <em>@OrderColumn</em>. El
          sumatorio (+) no funciona con propiedades calculadas en colecciones
          convencionales (<em>@OneToMany</em> sin <em>@OrderColumn</em>). En el
          caso de las colecciones de elementos se puede poner el nombre de una
          referencia <em>(nuevo en v5.1)</em> si ésta está anotada con <em>@DescriptionsList</em>
          en la clase incrustable.</li>
        <li><strong>@RowStyle</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowStyle.html"

            rel="nofollow">OX</a>): Para dar un estilo especial a algunas filas.
          Se comporta igual que en <a class="wiki_link" href="tab_es.html#Datos%20tabulares-Propiedades%20iniciales%20y%20resaltar%20filas">el
            caso del Tab</a>. No funciona para colecciones calculadas. Es
          posible definir varias <em>@RowStyle</em> por cada vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Accion+de+editar/ver+detalle+propia">@EditAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditAction.html"

            rel="nofollow">OX</a>): Permite sobreescribir la acción que inicia
          la edición de un elemento de la colección. Esta es la acción mostrada
          en cada fila cuando la colección es editable. Solo una <em>@EditAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Accion+de+editar/ver+detalle+propia">@ViewAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ViewAction.html"

            rel="nofollow">OX</a>): Permite sobreescribir la acción para
          visualizar un elemento de la colección. Esta es la acción mostrada en
          cada fila cuando la colección es de solo lectura. Solo una <em>@ViewAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@NewAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewAction.html"

            rel="nofollow">OX</a>): Permite definir nuestra propia acción para
          empezar a crear un nuevo elemento y añadirlo en la colección. Ésta es
          la acción que se ejecuta al pulsar en el vínculo 'Nuevo'. Solo una <em>@NewAction</em>
          por vista está permitida. Antes de v5.7 esta anotación también se
          usaba para sobrescribir la acción 'Añadir', porque entonces no
          coexistían.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@AddAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotationsAddAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v5.7)</em> Permite definir
          nuestra propia acción para empezar a añadir un nuevo elemento a la
          colección escogiendo uno preexistente. Ésta es la acción que se
          ejecuta al pulsar en el vínculo 'Añadir'. Solo una <em>@AddAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@SaveAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SaveAction.html"

            rel="nofollow">OX</a>): Permite definir nuestra propia acción para
          grabar el elemento de la colección. Ésta es la acción que se ejecuta
          al pulsar el vínculo 'Grabar detalle'. Solo una <em>@SaveAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@HideDetailAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/HideDetailAction.html"

            rel="nofollow">OX</a>): Permite definir nuestra propia acción para
          ocultar la vista de detalle. Ésta es la acción que se ejecuta al
          pulsar el bóton 'Cerrar' o al cerrar el diálogo. Solo una <em>@HideDetailAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@RemoveAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RemoveAction.html"

            rel="nofollow">OX</a>): Permite definir nuestra propia acción para
          borrar un elemento de la colección. Ésta es la acción que se ejecuta
          al pulsar en el botón 'Quitar' en el detalle del elemento. Solo una <em>@RemoveAction</em>
          por vista está permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@RemoveSelectedAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RemoveSelectedAction.html"

            rel="nofollow">OX</a>): Permite definir nuestra propia acción para
          quitar los elementos seleccionados de la colección. Ésta es la acción
          que se ejecuta al seleccionar algunas filas y pulsar en el botón
          'Quitar seleccionados', o pulsar directamente el icono de quitar en la
          fila deseada. Solo una <em>@RemoveSelectedAction</em> por vista está
          permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion">@DeleteSelectedAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DeleteSelectedAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4) </em>Permite definir
          nuestra propia acción para eliminar los elementos seleccionados de la
          colección y de la base de datos. Ésta es la acción que se ejecuta al
          seleccionar algunas filas y pulsar en el botón 'Eliminar
          seleccionados', o pulsar directamente el icono de eliminar en la fila
          deseada. Solo una <em>@DeleteSelectedAction</em> por vista está
          permitida.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias">@ListAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ListAction.html"

            rel="nofollow">OX</a>): Para poder añadir acciones en el modo lista;
          normalmente acciones cuyo alcance es la colección entera. Es posible
          definir varias <em>@ListAction</em> por cada vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias">@RowAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v4.6)</em> Para poder añadir
          acciones en el modo lista asociadas a cada fila; estas acciones no
          están presente en la barra de botones de la colección sino sólo en
          cada fila. Es posible definir varias <em>@RowAction</em> por cada
          vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Acciones+de+detalle+propias">@DetailAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DetailAction.html"

            rel="nofollow">OX</a>): Para poder añadir acciones en detalle,
          normalmente acciones cuyo alcance es el detalle que se está editando.
          Es posible definir varias <em>@DetailAction</em> por cada vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Accion+cuando+un+elemento+de+la+coleccion+es+seleccionado+%28nuevo+en+v3.1.2%29">@OnSelectElementAction</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnSelectElementAction.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v3.1.2)</em> Para poder
          definir una acción a ser ejecutada cuando un elemento de la colección
          se selecciona o se deselecciona. Es posible definir varias <em>@OnSelectElementAction</em>
          por cada vista.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Escoger+un+editor+%28colecciones,+nuevo+in+v3.1.3%29">@Editor</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v3.1.3)</em> Nombre del
          editor a usar para visualizar la colección en esta vista. El editor
          tiene que estar declarado en <a href="https://github.com/openxava/openxava/blob/master/openxava/src/main/resources/xava/default-editors.xml"><i>openxava/src/main/resources/xava/default-editors.xml</i></a>
          o <i>src/main/resources/</i><em>xava/editores.xml</em> de nuestro
          proyecto. Antes de v7 eran <em>OpenXava/xava/default-editors.xml</em>
          y <em>xava/editores.xml</em> de nuestro proyecto.</li>
        <li><strong><span class="wiki_link_ext"><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Condicion+para+lista+de+busqueda+%28coleccion,+nuevo+en+v4m4%29">@SearchListCondition</a></span></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListCondition.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v4m4)</em> Condición a usar
          para la lista de elementos seleccionable susceptibles de ser añadidos
          a la colección. No aplica a colección embebidas.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Visualizar+colecciones+en+formato+arbol+%28nuevo+en+v4m4%29">@Tree</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Tree.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v4m4)</em> Para indicar que
          esta colección se visualizará usando un árbol en vez de una lista.</li>
        <li><strong>@Collapsed</strong> (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Collapsed.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v5.0)</em> La collección se
          mostrará contraída para las vistas indicadas. Visualmente significa
          que el marco que rodea a la vista de la collección se iniciará
          cerrado. Más tarde el usuario podrá establecer sus preferencias
          haciendo clic en el icono de expansión.</li>
        <li><strong><a class="wiki_link" href="view_es.html#subcontrolador-coleccion">@ListSubcontroller</a></strong><strong></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ListSubcontroller.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v5.7)</em> Permite agrupar
          varias acciones y verlas mediante un único botón desplegable.</li>
        <li><strong><a class="wiki_link" href="view_es.html#grafico-desde-coleccion">@Chart</a></strong><strong></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Chart.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4)</em> Para visualizar
          los valores de una colección como un gráfico.</li>
        <li><strong><a class="wiki_link" href="view_es.html#lista-simple">@SimpleList</a></strong><strong></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SimpleList.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4)</em> La colección se
          visualizará como una lista simple de solo lectura, sin acciones,
          filtros, paginación, ordenación, etc.</li>
        <li><strong><span class="wiki_link_ext"><a class="wiki_link" href="#escoger-tab-para-accion-de-busqueda-colecciones">@SearchListTab</a></span></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListTab.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4)</em> Definimos el tab a
          mostrar en la lista cuando se hace una busqueda. Si omitimos esta
          anotación, al realizar una búsqueda se mostrará el tab por defecto.</li>
        <li><strong><span class="wiki_link_ext"><a class="wiki_link" href="#no-default-actions">@NoDefaultActions</a></span></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoDefaultActions.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.4)</em> Usando esta
          anotación, no se mostrarán las acciones de los controladores <i>DefaultListActionsForCollections</i>
          y ´<i></i>.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Vista+para+editar">@NewView</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewView.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7)</em> Vista del elemento 
          de la colección a usar cuando se crea uno nuevo. Sobreescribe 
          <em>@CollectionView</em> para la creación.</li>
        <li><strong><a class="wiki_link" href="#Vista-Personalizacion+de+coleccion-Vista+para+editar">@EditView</a></strong>
          (<a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditView.html"

            rel="nofollow">OX</a>): <em>(Nuevo en v7.7)</em> Vista del elemento 
          de la colección a usar cuando se edita uno existente. Sobreescribe 
          <em>@CollectionView</em> para la edición.</li>
      </ol>
      <h3 id="toc26"><a name="Vista-Personalizacion+de+coleccion-Propiedades+en+lista"></a>Propiedades
        en lista</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany, @ElementCollection </em><em>
        y calculadas</em><br>
      Si no usamos ninguna de estas anotaciones una colección se visualiza
      usando las propiedades persistentes en el modo lista; aunque lo más normal
      es indicar que propiedades salen en la lista:<br>
      <pre><code class="language-java">@ListProperties("codigo, nombre, observaciones, relacionConComercial, comercial.nivel.descripcion, tipo")
@OneToMany(mappedBy="comercial")
private Collection&lt;Cliente&gt; clientes;</code></pre>
      De esta forma la colección se visualiza así:<br>
      <img src="files/view_es160.jpg" alt="view_es160.jpg" title="view_es160.jpg"><br>
      Podemos ver como en la lista de propiedades podemos poner propiedades
      calificadas (como <em>comercial.nivel.descripcion</em>).<br>
      <h3 id="toc27"><a name="Vista-Personalizacion+de+coleccion-Vista+para+editar"></a>Vista
        para editar</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany y calculadas</em><br>
      Si no usamos ninguna anotación se usa la vista por defecto para editar la
      entidad en cada línea; aunque lo más normal es indicar que vista se ha de
      usar para representar el detalle:<br>
      <pre><code class="language-java">@CollectionView("Simple"),
@OneToMany(mappedBy="comercial")
private Collection&lt;Cliente&gt; clientes;</code></pre>
      Al pulsar <img src="files/edit.gif" alt="edit.gif" title="edit.gif">
      ('Editar') se visualizará el detalle usando la vista <em>Simple</em> de <em>Cliente</em>;
      para eso<br>
      hemos de tener una vista llamada <em>Simple</em> en la entidad <em>Cliente</em>
      (el modelo de los elementos de la colección).<br>
      Este vista se usa también cuando el usuario pulsa en <img src="files/create_new.gif"

        alt="create_new.gif" title="create_new.gif"> 'Añadir' en una <a class="wiki_link"

        href="model_es.html#Modelo-Colecciones-Colecciones%20incrustadas">colección
        incrustada</a>, en caso contrario OpenXava no muestra esta vista, en su
      lugar muestra una lista de entidades a añadir.<br>
      Si la vista <em>Simple</em> de <em>Cliente</em> es así:<br>
      <pre><code class="language-java">@View(name="Simple", members="codigo; tipo; nombre; direccion")</code></pre>
      Al pulsar detalle aparecerá el diálogo:<br>
      <img src="files/view_es171.jpg" alt="view_es171.jpg" title="view_es171.jpg"><br>
      <br>
      <em>(Nuevo en v7.7)</em> Podemos usar 
      <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewView.html"
        rel="nofollow">@NewView</a></em> y 
      <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditView.html"
        rel="nofollow">@EditView</a></em> para especificar vistas diferentes para 
      crear y editar elementos de la colección respectivamente. Estas anotaciones 
      sobreescriben <em>@CollectionView</em> para su operación específica:<br>
      <pre><code class="language-java">@CollectionView("Simple")
@NewView("CreacionSimple")  // Sobreescribe @CollectionView para la creación
@EditView("EdicionSimple")  // Sobreescribe @CollectionView para la edición
@OneToMany(mappedBy="factura")
private Collection&lt;LineaFactura&gt; lineas;</code></pre>
      Usar <em>@CollectionView("Simple")</em> solo es equivalente a usar tanto 
      <em>@NewView("Simple")</em> como <em>@EditView("Simple")</em>. Podemos usar 
      <em>@NewView</em> y <em>@EditView</em> para sobreescribir <em>@CollectionView</em> 
      para la creación o la edición, o usarlas sin <em>@CollectionView</em> para 
      especificar vistas solo para la creación o la edición mientras se mantiene 
      la vista por defecto para la otra operación.<br>
      <h3 id="toc28"><a name="Vista-Personalizacion+de+coleccion-Coleccion+de+elementos"></a>Colección
        de elementos</h3>
      En el caso de una <em>@ElementCollection</em> <em>(nuevo en v5.0)</em>
      no se usa <em>@CollectionView</em> porque los datos son editables
      directamente en la colección, como en una hoja de cálculo. Sin embargo, la
      mayoría del comportamiento en modo detalle también está disponbile en las
      colecciones de elementos, incluyendo el soporte de las siguiente
      anotaciones en los miembro de la clase incrustable: <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

          rel="nofollow">@ReadOnly</a>, <a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

          rel="nofollow">@Editor</a>, <a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListCondition.html"

          rel="nofollow">@SearchListCondition</a> (nuevo en v5.1), <a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchAction.html"

          rel="nofollow">@SearchAction</a> (nuevo en v5.1), <a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DefaultValueCalculator.html"

          rel="nofollow">@DefaultValueCalculator</a> (nuevo en v5.1), <a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

          rel="nofollow">@OnChange</a> (nuevo en v5.1), <a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChangeSearch.html"

          rel="nofollow">@OnChangeSearch</a> (nuevo en v5.1), <a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoSearch.html"

          rel="nofollow">@NoSearch</a> (nuevo en v5.1)</em> y <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DescriptionsList.html"

          rel="nofollow">@DescriptionsList</a> (nuevo en v5.1)</em>.<br>
      Se puede usar <em>@ListProperties</em> en una colección de elementos, de
      esta manera:<br>
      <pre><code class="language-java">@ElementCollection
@ListProperties("producto.codigo, producto.descripcion, precioUnitario, cantidad, importe")
private Collection&lt;LineaPresupuesto&gt; lineas;</code></pre>
      Obtenemos la siguiente interfaz de usuario:<br>
      <img src="files/view_es175.jpg" alt="view_es175.jpg" title="view_es175.jpg"

        style="height: 194px; width: 800px;"><br>
      En el caso de las colecciones de elementos se puede poner el nombre de una
      referencia <em>(nuevo en v5.1)</em> en <em>@ListProperties</em> si está
      anotada con <em>@DescriptionsList</em> en la clase incrustable. Es decir,
      podemos escribir:<br>
      <pre><code class="language-java">@ElementCollection
@ListProperties("factura.ano, factura.numero, factura.importe, estado, recepcionista") // recepcionista es una referencia
private Collection&lt;GastorServicio&gt; gastos;</code></pre>
      Donde <em>recepcionista</em> es no es una propiedad sino una referencia,
      una referencia anotada con <em>@DescriptionsList</em>, de esta forma:<br>
      <pre><code class="language-java">@Embeddable
public class GastoServicio {

    @ManyToOne(fetch=FetchType.LAZY)
    @DescriptionsList
    private Recepcionista recepcionista;

    ...

}</code></pre>
      A partir del código de arriba se obtiene:<br>
      <img src="files/view_es177.jpg" alt="view_es177.jpg" title="view_es177.jpg"><br>
      <em>@DescriptionsList</em> con <em>showReferenceView=true</em> no está
      soportado en las colecciones de elementos.<br>
      <h3 id="toc29"><a name="Vista-Personalizacion+de+coleccion-Accion+de+editar/ver+detalle+propia"></a>Acción
        de editar/ver detalle propia</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany </em><em> y calculadas</em><br>
      Podemos refinar fácilmente el comportamiento cuando se pulse el vínculo <img

        src="files/edit.gif" alt="edit.gif" title="edit.gif"> ('Editar') usando
      <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditAction.html"

          rel="nofollow">@EditAction</a></em>:<br>
      <pre><code class="language-java">@EditAction("Factura.editarLinea")
@OneToMany (mappedBy="factura", cascade=CascadeType.REMOVE)
private Collection&lt;LineaFactura&gt; lineas;</code></pre>
      Hemos de definir <em>Factura.editarLinea</em> en <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;controlador nombre="Factura"&gt;
 ...
 &lt;accion nombre="editarLinea" oculta="true"
 imagen="images/edit.gif"
 clase="org.openxava.test.acciones.EditarLineaFactura"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Y nuestra acción puede ser así:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;
import java.text.*;
import org.openxava.actions.*;
/**
 * @author Javier Paniza
 */
public class EditarLineaFactura extends EditElementInCollectionAction { // 1
 public void execute() throws Exception {
 super.execute();
 DateFormat df = new SimpleDateFormat("dd/MM/yyyy");
 getCollectionElementView().setValue( // 2
 "observaciones", "Editado el " + df.format(new java.util.Date()));
 }
}</code></pre>
      En este caso queremos solamente refinar y por eso nuestra acción desciende
      de (1) <em>EditElementInCollectionAction</em>. Nos limitamos a poner un
      valor por defecto en la propiedad <em>remarks</em>. Es de notar que para
      acceder a la vista que visualiza el detalle podemos usar el método <em>getCollectionElementView()</em>
      (2).<br>
      También es posible eliminar la acción para editar de la interfaz de
      usuario, de esta manera:<br>
      <pre><code class="language-java">@EditAction("")
@OneToMany (mappedBy="factura", cascade=CascadeType.REMOVE)
private Collection&lt;LineaFactura&gt; lineas;</code></pre>
      Sólo necesitamos poner una cadena vacía como valor para la acción. Aunque
      en la mayoría de los casos es suficiente declarar la colección como de
      solo lectura (<em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ReadOnly.html"

          rel="nofollow">@ReadOnly</a></em>).<br>
      La técnica para refinar una acción 'ver' (la acción para cada fila cuando
      la colección es de solo lectura) es la misma pero usando <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ViewAction.html"

          rel="nofollow">@ViewAction</a></em> en vez de <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/EditAction.html"

          rel="nofollow">@EditAction</a></em>.<br>
      <h3 id="toc30"><a name="Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias"></a>Acciones
        de lista y fila propias</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany </em><em> y calculadas</em><br>
      Podemos usar <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ListAction.html"

          rel="nofollow">@ListAction</a></em> para definir acciones que apliquen
      a toda la colección y <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowAction.html"

          rel="nofollow">@RowAction</a></em> <em>(nuevas en v4.6)</em> para
      definir acciones para cada fila. <em>@ListAction</em> y <em>@RowAction</em>
      son muy parecidas, de hecho se pueden programar de la misma manera, la
      diferencia está en que las <em>@ListActions</em> se muestran en la barra
      de botones de la colección, mientras que las <em>@RowActions</em>
      aparecen en cada fila. Las <em>@ListActions</em> también pueden aparecer
      en cada fila si están definidas con <em>en-cada-fila="true"</em> en <em>controladores.xml</em>.<br>
      Un ejemplo:<br>
      <pre><code class="language-java">@ListAction("Transportista.traducirNombre"),
private Collection&lt;Transportista&gt; compañeros;</code></pre>
      Ahora aparecen un nuevo vínculo al usuario:<br>
      <img src="files/view_es180.jpg" alt="view_es180.jpg" title="view_es180.jpg"><br>
      Falta definir la acción en <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;controlador nombre="Transportista"&gt;
 ...
 &lt;accion nombre="traducirNombre" oculta="true"
 clase="org.openxava.test.actiones.TraducirNombreTransportista"&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Y el código de nuestra acción:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;
import java.util.*;
import org.openxava.actions.*;
import org.openxava.test.modelo.*;
/**
 * @author Javier Paniza
 */
public class TraducirNombreTransportista extends CollectionBaseAction { // 1
 public void execute() throws Exception {
 Iterator it = getSelectedObjects().iterator(); // 2
 while (it.hasNext()) {
 Transportista transportista = (Transportista) it.next();
 transportista.traducir();
 }
 }
}</code></pre>
      La acción desciende de <em>CollectionBaseAction</em> (1), de esta forma
      tenemos a nuestra disposición métodos como <em>getSelectedObjects()</em>
      (2) que ofrece una colección de los objetos seleccionados por el usuario.
      Hay disponible otros métodos como <em>getObjects()</em> (todos los
      objetos de la colección), <em>getMapValues()</em> (los valores de la
      colección en formato de mapa) y <em>getMapsSelectedValues()</em> (los
      valores seleccionados de la colección en formato de mapa). En el caso de <em>@RowAction,</em>
      <em>getSelectedObjects()</em> y <em>getMapsSelectedValues()</em>
      devuelven un único elemento, el correspondiente a la fila de la acción,
      incluso si la fila no está seleccionada.<br>
      Como en el caso de la acciones de detalle (ver la siguiente sección)
      puedes usar <em>getCollectionElementView()</em>.<br>
      También es posible usar <a class="wiki_link" href="controllers_es.html#Controladores-Acciones%20en%20modo%20lista">acciones
        para el modo lista</a> como acciones de lista para colecciones con <i>@OneToMany</i>
      y <i>@Condition</i>, pero no para colecciones calculadas, <i>@ManyToMany</i>
      o listas con <i>@OrderColumn</i>.<br>
      A partir de v5.9 las acciones de fila pueden aparecer de forma selectiva
      en cada fila <a href="controllers_es.html#Controladores-Acciones%20opcionales">usando
        <i>IAvailableAction</i> igual que con las acciones de modo lista</a>.
      <h3 id="toc31"><a name="Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+por+defecto"></a>Acciones
        de lista y fila por defecto</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany </em><em> y calculadas</em><br>
      Si queremos añadir alguna acciones de lista a todas las colecciones de
      nuestra aplicación hemos de crear un controlador llamado <em>DefaultListActionsForCollections</em>
      en nuestro propio <em>controladores.xml</em> en <i>src/main/resources/xava</i>
      (o <i>xava</i> para v6 o anterior) como sigue:<br>
      <pre><code class="language-xml">&lt;controlador nombre="DefaultListActionsForCollections"&gt;
    &lt;hereda-de controlador="CollectionCopyPaste"/&gt; &lt;!-- New in v5.9 --&gt;
    &lt;hereda-de controlador="Print"/&gt;
    &lt;accion nombre="exportarComoXML"
        clase="org.openxava.test.acciones.ExportarComoXML"&gt;
    &lt;/accion&gt;
&lt;/controlador&gt;</code></pre>
      De esta forma todas las colecciones tendrán las acciones del controlador <em>CollectionCopyPaste
        (nuevo en v5.9)</em> y del controlador <em>Print</em> (para exportar a
      Excel y generar informes PDF) y nuestra propia acción <em>ExportarComoXML</em>.
      Esto tiene el mismo efecto que el elemento <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/ListAction.html"

          rel="nofollow">@ListAction</a></em> (ver la sección <em><a class="wiki_link"

          href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias">acciones
          de lista propias</a></em>) pero aplica a todas las colecciones a la
      vez.<br>
      Si queremos añadir alguna acciones a todas las filas de las colecciones de
      nuestra aplicación hemos de crear un controlador llamado <em>DefaultRowActionsForCollections</em>
      <i>(nuevo en v4.6)</i> en nuestro propio <em>controladores.xml</em> en <i>src/main/resources/xava</i>
      (o <i>xava</i> para v6 o anterior) como sigue:<br>
      <div class="wiki">
        <pre><code class="language-xml">&lt;controlador nombre="DefaultRowActionsForCollections"&gt;
    &lt;hereda-de controlador="CollectionOpenInNewTab"/&gt; &lt;!-- Nuevo en v7.4 --&gt;
    &lt;accion nombre="abrirComoPDF"
        clase="org.openxava.test.acciones.AbrirComoPDF"&gt;
    &lt;/accion&gt;
&lt;/controlador&gt;</code></pre>
      </div>
      De esta forma, las acciones del controlador <em>CollectionOpenInNewTab</em>
      (Nuevo en v7.4) y nuestra propia acción <em>AbrirComoPDF</em> estarán
      presentes en cada fila de las colecciones. Este tiene el mismo efecto que
      el elemento <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RowAction.html"

          rel="nofollow">@RowAction </a></em>(ver la sección <em><a class="wiki_link"

          href="#Vista-Personalizacion+de+coleccion-Acciones+de+lista+y+fila+propias">acciones
          de lista y fila propias</a></em>)&nbsp; pero se aplica a todas las
      colecciones a la vez.<br>
      A partir de v5.9 esta característica aplica tanto a las colecciones
      calculadas como a las persistentes. Antes las propiedades calculadas no
      soportaban acciones por defecto para lista y fila.</div>
    <div class="wiki" style="display: block;">A partir de v7.4 puedes usar <em><a

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoDefaultActions.html">@NoDefaultActions</a></em>
      para que las acciones de lista y fila por defecto no se muestren para una
      colección concreta.<br>
      <h3 id="toc32"><a name="Vista-Personalizacion+de+coleccion-Acciones+de+detalle+propias"></a>Acciones
        de detalle propias</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany </em><em> y calculadas</em><br>
      También podemos añadir nuestras propias acciones a la vista de detalle
      usada para editar cada elemento. Esto se consigue mediante la anotación <em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DetailAction.html"

          rel="nofollow">@DetailAction</a></em>. Estas sería acciones que
      aplican a un solo elemento de la colección. Por ejemplo:<br>
      <pre><code class="language-java">@DetailAction("Factura.verProducto")
@OneToMany (mappedBy="factura", cascade=CascadeType.REMOVE)
private Collection&lt;InvoiceDetail&gt; lineas;</code></pre>
      Esto haría que el usuario tuviese a su disposición otro vínculo al editar
      el detalle:<br>
      <img src="files/view_es190.jpg" alt="view_es190.jpg" title="view_es190.jpg"><br>
      Debemos definir la acción en <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;controlador nombre="Facturas"&gt;
 ...
 &lt;accion nombre="verProducto" oculta="true"
 clase="org.openxava.test.acciones.VerProductoDesdeLineaFactura"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;usa-objeto nombre="xavatest_valoresFactura"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Y el código de nuestra acción:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;
import java.util.*;
import javax.ejb.*;
import org.openxava.actions.*;
/**
 * @author Javier Paniza
 */
public class VerProductoDesdeLineaFactura
 extends CollectionElementViewBaseAction // 1
 implements INavigationAction {
 @Inject // A partir de v4m2
 private Map valoresFactura;
 public void execute() throws Exception {
 try {
 setValoresFactura(getView().getValues());
 Object codigo =
 getCollectionElementView().getValue("producto.codigo"); // 2
 Map clave = new HashMap();
 clave.put("codigo", codigo);
 getView().setModelName("Producto"); // 3
 getView().setValues(clave); // Desde v4m5 puedes user getParentView()
 getView().findObject(); // como alternativa a getView()
 getView().setKeyEditable(false);
 getView().setEditable(false);
 }
 catch (ObjectNotFoundException ex) {
 getView().clear();
 addError("object_not_found");
 }
 catch (Exception ex) {
 ex.printStackTrace();
 addError("system_error");
 }
 }
 public String[] getNextControllers() {
 return new String [] { "ProductoDesdeFactura" };
 }
 public String getCustomView() {
 return SAME_VIEW;
 }
 public Map getValoresFactura() {
 return valoresFactura;
 }
 public void setValoresFactura(Map map) {
 valoresFactura = map;
 }
}</code></pre>
      Vemos como desciende de <em>CollectionElementViewBaseAction</em> (1) y
      así tiene disponible la vista que visualiza el elemento de la colección
      mediante <em>getCollectionElementView()</em> (2). También podemos acceder
      a la vista principal mediante <em>getView()</em> (3) o la vista padre
      mediante <em>getParentView()</em> (<em>a partir de v4m5</em>),
      normalmente <em>getView()</em> y <em>getParentView()</em> devuelven el
      mismo valor. En el <a class="wiki_link" href="controllers_es.html">capítulo
        7</a> se ven más detalles acerca de como escribir acciones.<br>
      Además, usando la vista devuelta por <em>getCollectionElementView()</em>
      podemos añadir y borrar programaticamente acciones de detalle y de lista
      con <em>addDetailAction()</em>, <em>removeDetailAction()</em>, <em>addListAction()</em>
      y <em>removeListAction()</em>, ver API doc para <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/view/View.html"

          rel="nofollow">org.openxava.view.View</a></em>.<br>
      <h3 id="toc33"><a name="Vista-Personalizacion+de+coleccion-Refinar+comportamiento+por+defecto+para+la+vista+de+coleccion"></a>Refinar
        comportamiento por defecto para la vista de colección</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany&nbsp;</em><em><em> y
          calculadas</em> (a partir de v5.3 @RemoveSelectedAction también se
        puede aplicar a @ElementCollection)</em><br>
      Usando <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NewAction.html"

          rel="nofollow">@NewAction</a></em>, <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/AddAction.html"

          rel="nofollow">@AddAction</a> (nuevo en v5.7)</em>, <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SaveAction.html"

          rel="nofollow">@SaveAction</a></em>, <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/HideDetailAction.html"

          rel="nofollow">@HideDetailAction</a></em>, <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RemoveAction.html"

          rel="nofollow">@RemoveAction</a></em>, <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/RemoveSelectedAction.html"

          rel="nofollow">@RemoveSelectedAction</a></em> y <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DeleteSelectedAction.html"

          rel="nofollow">@DeleteSelectedAction</a>(nuevo en v7.4)</em> podemos
      refinar el comportamiento por defecto para una vista de colección. Por
      ejemplo, si queremos refinar el comportamiento de la acción de grabar un
      detalle podemos definir nuestra vista de esta forma:<br>
      <pre><code class="language-java">@SaveAction("LineaAlbaran.grabar")
@OneToMany (mappedBy="albaran", cascade=CascadeType.REMOVE)
private Collection&lt;LineaAlbaran&gt; lineas;</code></pre>
      Debemos tener la acción <em>LineaAlbaran.grabar</em> en <em>controladores.xml</em>:<br>
      <pre><code class="language-xml">&lt;controlador nombre="LineaAlbaran"&gt;
 ...
 &lt;accion nombre="grabar"
 clase="org.openxava.test.acciones.GrabarLineaAlbaran"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Y definir la clase acción para grabar:<br>
      <pre><code class="language-java">package org.openxava.test.acciones;
import org.openxava.actions.*;
/**
 * @author Javier Paniza
 */
public class GrabarDetalleAlbaran extends SaveElementInCollectionAction { // 1
 public void execute() throws Exception {
 super.execute();
 // Aquí nuestro código // 2
 }
}</code></pre>
      El caso más común es extender el comportamiento por defecto, para eso
      hemos de extender la clase original para grabar un detalle de una
      colección (1), esto es la acción <em>SaveElementInCollection</em>,
      entonces llamamos a <em>super</em> desde el método <em>execute()</em>
      (2), y después escribimos nuestro propio propio código.<br>
      También es posible eliminar cualquiera de estas acciones de la interfaz
      gráfica, por ejemplo, podemos definir una colección de esta manera:<br>
      <pre><code class="language-java">@RemoveSelectedAction("")
@OneToMany (mappedBy="albaran", cascade=CascadeType.REMOVE)
private Collection&lt;LineaAlbaran&gt; lineas;</code></pre>
      En este caso la acción para quitar los elementos seleccionadas no
      aparecerá en la interfaz de usuario. Como se ve, sólo es necesario
      declarar una cadena vacía como nombre de la acción.<br>
      <em>Nuevo en v5.3: @RemoveSelectedAction</em> también se puede usar con <em>@ElementCollection</em>.
      Por defecto, no se usa ninguna acción Java para eliminar una fila de una
      colección de elementos, se hace mediante JavaScript en el navegador. Sin
      embargo, con <em>@RemoveSelectedAction</em> se puede indicar que se use
      una acción Java, de esta manera se puede refinar el comportamiento.
      Podemos extender <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/RemoveSelectedInElementCollectionAction.html"

          rel="nofollow">RemoveSelectedInElementCollectionAction</a> <span style="line-height: 1.5;">(nuevo
          en v5.3.2)</span></em><span style="line-height: 1.5;"> para hacerlo.<br>
        <em>Nuevo en v7.4: @DeleteSelectedAction</em>. Podemos extender de </span><em><a

          class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/DeleteSelectedInCollectionAction.html"

          rel="nofollow">DeleteSelectedInCollectionAction</a><span style="line-height: 1.5;"></span></em><span

        style="line-height: 1.5;">para refinar el comportamiento.&nbsp;</span>
      <h3 id="toc34"><a name="Vista-Personalizacion+de+coleccion-Accion+cuando+un+elemento+de+la+coleccion+es+seleccionado+(nuevo+en+v3.1.2)"></a>Acción
        cuando un elemento de la colección es seleccionado <em>(nuevo en
          v3.1.2)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany </em><em> y calculadas</em><br>
      Podemos definir una acción que se ejecute cuando un elemento de una
      colección se seleccione o deseleccione. Esto se consigue usando la
      anotación <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnSelectElementAction.html"

          rel="nofollow">@OnSelectElementAction</a></em>. Por ejemplo,
      supongamos que tenemos una colección como esta:<br>
      <img src="files/view_es195.jpg" alt="view_es195.jpg" title="view_es195.jpg"><br>
      Y queremos que al seleccionar una fila el valor de el campo <em>cantidadIngredientesSeleccionados</em>
      se actualice en la interfaz de usuario. Vamos a ver como hacerlo.<br>
      Primero hemos de anotar nuestra colección:<br>
      <pre><code class="language-java">@OnSelectElementAction("Formula.alSeleccionarIngrediente") // 1
@OneToMany(mappedBy="formula", cascade=CascadeType.REMOVE)
private Collection&lt;IngredienteFormula&gt; ingredientes;</code></pre>
      De esta manera tan sencilla (1), y gracias a la anotación <em>@OnSelectElementAction</em>,
      estamos diciendo que cuando el usuario haga click en la casilla de chequeo
      (checkbox) de la fila, la acción <em>Formula.alSeleccionarIngrediente</em>
      se ejecutará. Esta acción se declara en <em>controladores.xml</em>, de
      esta manera:<br>
      <pre><code class="language-xml">&lt;controlador nombre="Formula"&gt;
 ...
 &lt;accion nombre="alSeleccionarIngredientes" oculta="true"
 clase="org.openxava.test.acciones.AlSeleccionarIngrediente"&gt;
 &lt;usa-objeto nombre="xava_view"/&gt; &lt;!-- No obligatorio desde v4m2 --&gt;
 &lt;/accion&gt;
 ...
&lt;/controlador&gt;</code></pre>
      Ahora, solo nos queda el código de la clase <em>AlSeleccionarIngrediente</em>:<br>
      <pre><code class="language-java">public class AlSeleccionarIngrediente extends OnSelectElementBaseAction { // 1
 public void execute() throws Exception {
 int size = getView().getValueInt("cantidadIngredientesSeleccionados");
 size = isSelected() ? size + 1 : size - 1; // 2
 getView().setValue("cantidadIngredientesSeleccionados", new Integer(size));
 }
}</code></pre>
      La forma más fácil de implementar la acción es extendiendo de <em><a class="wiki_link_ext"

          href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/actions/OnSelectElementBaseAction.html"

          rel="nofollow">OnSelectElementBaseAction</a></em>, esto nos permite
      acceder a la propiedad <em>selected</em> (por medio de <em>isSelected()</em>,
      2) que indica si el usuario ha seleccionado o deseleccionado la fila; y <em>row</em>
      (usando <em>getRow()</em>) que indica el número de fila del elemento de
      la colección afectado.<br>
      <h3 id="toc35"><a name="Vista-Personalizacion+de+coleccion-Escoger+un+editor+(colecciones,+nuevo+in+v3.1.3)"></a>Escoger
        un editor (colecciones, <em>nuevo in v3.1.3</em>)</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany, @ElementCollection</em><em>
        y calculadas</em><br>
      Un editor visualiza la colección al usuario y le permite editar su valor.
      Por defecto, el editor que OpenXava usa para las colecciones es una lista
      con los datos en formato tabular, que permite filtrar, ordenar, paginar,
      etc., pero puedes especificar tu propio editor para una colección concreta
      usando <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Editor.html"

          rel="nofollow">@Editor</a></em>.<br>
      Por ejemplo, si tienes una colección de entidades <em>Cliente</em> y la
      quieres visualizar en alguna entidad o vista particular usando una
      interfaz de usuario personalizada, como una lista simple de nombres.
      Puedes hacerlo de esta forma:<br>
      <pre><code class="language-java">@OneToMany(mappedBy="comercial")
@Editor("NombresClientes")
private Collection&lt;Cliente&gt; clientes;</code></pre>
      En este caso se usará el editor <em>NombresClientes</em> para visualizar
      y editar, en vez de la de por defecto. Tienes que definir el editor <em>NombresClientes</em>
      en el archivo <em>editores.xml</em> en <i>src/main/resources/xava</i> (o
      <i>xava</i> para v6 o anterior) de tu proyecto:<br>
      <pre><code class="language-xml">&lt;editor nombre="NombresClientes" url="nombresClientesEditor.jsp"/&gt;</code></pre>
      Además has de escribir el código JSP para tu editor en <em>nombresClientesEditor.jsp</em>.<br>
      Esta característica es para cambiar el editor para una colección concreta
      en una entidad concreta, o incluso solo en una vista de esa entidad
      (usando <em>@Editor(forViews=)</em>). Si lo que quieres es cambiar un
      editor para todas las colecciones a cierto tipo de entidad a nivel de
      aplicación entonces es mejor configurarlo usando el archivo <em>editores.xml</em>.<br>
      Veáse la sección <a class="wiki_link" href="customizing_es.html#Personalizacion-Editores-Editores+para+colecciones+%28nuevo+en+v3.1.3%29">Editores
        para colecciones</a> para más detalles.<br>
      <h3 id="toc36"><a name="Vista-Personalizacion+de+coleccion-Condicion+para+lista+de+busqueda+(coleccion,+nuevo+en+v4m4)"></a><a

          name="search-list-condition-collection"></a>Condición para lista de
        búsqueda (colección, <em>nuevo en v4m4</em>)</h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany</em><em> y calculadas</em><br>
      Puedes especificar una condición para ser aplicada a la lista de elementos
      disponible para seleccionar. Usando <em>@SearchListCondition</em> puedes
      definir una condición aplicable a la lista para seccionar, además puedes
      usarlo junto con <em>forViews</em> y <em>notForViews</em> para definir
      criterios diferentes para cada vista (1). Desde la v7.4 la condición
      soporta el uso de <em>${this.}</em> para referenciar una propiedad de la
      entidad misma (2), como muestra el siguiente fragmento de código:<br>
      <pre><code class="language-java">private int numero;

@OneToMany(mappedBy="comercial")
@SearchListCondition(value="${codigo} &lt; 5", forViews="SearchListCondition, SearchListConditionBlank") // 1
@SearchListCondition(value="${codigo} &lt; ${this.numero}", forViews="SearchListConditionNumber") // 2
private Collection&lt;Cliente&gt; clientes;</code></pre>
      <h3 id="toc37"><a name="Vista-Personalizacion+de+coleccion-Visualizar+colecciones+en+formato+arbol+(nuevo+en+v4m4)"></a><a

          name="tree"></a>Visualizar colecciones en formato árbol <em>(nuevo en
          v4m4)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany</em><em> y calculadas</em>
    </div>
    <div class="wiki" style="display: block;">Es posible visualizar una
      colección con un árbol:<br>
      <pre><code class="language-java">@OneToMany(mappedBy="padre", cascade = CascadeType.REMOVE)
@Tree                              // 1
@ListProperties("descripcion")     // 2
@OrderBy("carpeta, ordenElement")  // 3
// @Editor(value="TreeView")       // 4  No es ncecesario desde v7.5
private Collection&lt;ElementoArbolTreeItem&gt; elementos;</code></pre>
      Anotando la colección con <i>@Tree </i>(1) indicas que quieres
      visualizar la colección como un árbol. Con la anotación <em>@ListProperties</em>
      (2) puedes definir las propiedades a visualizar en cada rama. Los
      elementos se visualizan en el orden natural de la colección definido por <em>@OrderBy</em>
      (3). Debes tener una propidad <em>String</em> llamada <i>path</i> para
      que sea usado como la ruta de las ramas, también puedes llamarlo por otro
      nombre, para esto has de usar la anotación <em>@Tree</em> (1) indicando <i>pathProperty</i>.
      En versiones anteriores a la v7.5 es necesario usar <i>@Editor("TreeView")</i>
      para que se muestre el editor del árbol.<br>
      <img src="files/tree_view_es000.jpg" alt="tree_view_es000.jpg" title="tree_view_es000.jpg"></div>
    <div class="wiki" style="display: block;"> Como se ve en la tabla, el arbol
      se hace concatenando el id separado por "/". Los elementos hermanos tienen
      que tener el mismo path. El editor se encarga de crear y modificar la
      propiedad path. Una colección vista como un árbol podría desplegarse así:<br>
      <img src="files/tree_view_es010.jpg" alt="tree_view_es010.jpg" title="tree_view_es010.jpg"></div>
    <div class="wiki" style="display: block;">El usuario puede arrastrar y
      soltar para mover elementos de una rama a otra (desde v7.2, antes se hacía
      usando unos botones).</div>
    <div class="wiki" style="display: block;"> La sintaxis completa para @Tree
      es:<br>
      <pre><code class="language-java">@Tree(
  forViews="",                // 1
  notForViews="",             // 2
  pathProperty="path",        // 3
  idProperties="",            // 4
  initialExpandedState=true,  // 5
  orderIncrement=2,           // 6  Obsoleto desde la versión 7.2
  pathSeparator="/"           // 7
  allowMoveNodes=true         // 8  Nuevo en v7.5
)</code></pre>
      <ol>
        <li><span style="background-color: #ffffff;"><strong>forViews</strong>:
            Indica las vistas para la que aplica.</span></li>
        <li><span style="background-color: #ffffff;"><strong>notForViews</strong>:
            Indica las vistas a las que no debe aplicar.</span></li>
        <li><span style="background-color: #ffffff;"><strong>pathProperty</strong>:
            Nombre de la propiedad a ser usada como ruta para el árbol, de
            manera predeterminada utiliza la propiedad "path" (que debe estar
            presente en la clase). También puedes indicarle otro nombre.<br>
          </span></li>
        <li><span style="background-color: #ffffff;"><strong>idProperties</strong>:
            Cada elemento del árbol debe estar identificado de manera única.
            Esto normalmente esta asociado con los campos anotados con @Id, por
            lo tanto la implementación de @Tree utiliza estos campos. No
            obstante, usted puede preferir utilizar cualquier otro campo para
            que represente el identificador único del elemento del árbol. Las
            propiedades definidas aqui deben estar separadas por coma.</span></li>
        <li><span style="background-color: #ffffff;"><strong>initialExpandedState</strong>:
            Si tiene el valor verdadero (true) el árbol es desplegado de modo
            expandido.</span></li>
        <li><span style="background-color: #ffffff;"><strong>orderIncrement</strong>:
            Si utilizar la anotación @OrderBy, la misma hace referencia a un
            campo tipo entero, entonces la implementación de @Tree permite el
            reordenamiento del árbol. De manera predeterminada utiliza valores
            de incremento de 2, y es el mínimo aceptado. (obsoleto desde la
            versión 7.2).<br>
          </span></li>
        <li><span style="background-color: #ffffff;"><strong>pathSeparator</strong>:
            Separador utilizado en la ruta que define cada uno de los elementos
            del árbol y su ubicación.</span></li>
        <li><strong>allowMoveNodes</strong>:<span>&nbsp;</span><em>(Nuevo en
            v7.5)</em><span> Indica si el usuario puede mover nodos en el árbol.
            Si se establece en <i>false</i>, los usuarios no podrán mover nodos
            mediante arrastrar y soltar. El valor predeterminado es <i>true</i></span>.</li>
      </ol>
      <h3 id="toc38"><a name="Vista-Personalizacion+de+coleccion-Propiedades+de+total+(nuevo+en+v4.3)"></a>Propiedades
        de total <em>(nuevo en v4.3)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany, @ElementCollection</em><em>
        y calculadas</em><br>
      Dentro de <em>@ListProperties</em> podemos definir, entre corchetes, un
      conjunto de propiedades de la entidad padre para se mostradas en el pie de
      la colección como valores totales. Es decir, si definimos una de esta
      manera:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@ListProperties("fechaEntrega[factura.fechaEntrega], cantidad, importe[factura.sumaImportes, factura.iva, factura.total]")
</code></pre> </div>
    <div class="wiki" style="display: block;">Que incluyendo el código de las
      propiedades de total sería:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">public class Factura {

    ...
	
    @OneToMany (mappedBy="factura", cascade=CascadeType.REMOVE)
    @ListProperties("fechaEntrega[factura.fechaEntrega], cantidad, importe[factura.sumaImportes, factura.iva, factura.total]")
    private Collection&lt;DetalleFactura&gt; detalles;	

    public Date getFechaEntrega() { 
        Date resultado = null;		
        for (DetalleFactura detalle: getDetalles()) {
            resultado = (Date) ObjectUtils.min(resultado, detalle.getFechaEntrega());
        }		
        return resultado;
    }

    @Money
    public BigDecimal getSumaImportes() {		
        BigDecimal resultado = BigDecimal.ZERO;		
        for (DetalleFactura detalle: getDetalles()) { 			
            resultado = resultado.add(detalle.getImporte());
        }		
        return resultado;		
    }
	
    @Money @Depends("porcentajeIva, sumaImportes")
    public BigDecimal getIva() {		
        return getSumaImportes().multiply(getPorcentajeIva()).divide(CIEN, 2, BigDecimal.ROUND_HALF_UP);
    }
	
    @Money @Depends("iva") 
    public BigDecimal getTotal() {
        return getIva().add(getSumaImportes());
    }
    
}    
</code></pre> </div>
    <div class="wiki" style="display: block;">Obtendremos:<br>
      <img src="files/view_es220.jpg" alt="view_es220.jpg" title="view_es220.jpg"><br>
      Las propiedades de total pueden usarse para todo tipo de colecciones, es
      decir para <i>@OneToMany, @ManyToMany, @ElementCollection</i> o
      colecciones calculadas (simplemente un getter que devuelve una colección).
      Podemos añadir propiedades de total a cualquier propiedad del <em>@ListProperties</em>
      y pueden ser de cualquier tipo, no sólo número. Estas propiedades de total
      se obtienen de la entidad contenedora por tanto hemos de usar la
      referencia a la entidad contenedora como prefijo, es decir, el prefijo de
      las propiedades de total ha de coincidir con la referencia de <em>mappedBy</em>
      en el caso de las colecciones persistentes.<br>
      A partir de v5.9 las propiedades de total pueden ser persistente, por lo
      tanto editables, no sólo calculadas (con sólo un getter). También desde
      5.9 puedes anotar una propiedad de total con <em>@Calculation</em>.
      Además, a partir de v5.9 es posible combinar el sumatorio de las columnas
      (el + en la propiedad) con las propiedades de total. Todo est te permite
      escribir una <em>@ListProperties</em> como esta:<br>
      <pre><code class="language-java">@ListProperties("porcentajeIVA, total+[costeTrabajo.porcentajeBeneficio, costeTrabajo.beneficio, costeTrabajo.total]")</code></pre>
      Fíjate en el + después de <em>total</em> y a continuación las propiedades
      de total entre corchetes. En este caso <i>porcentajeBeneficio</i> es una
      propiedad persistente, por tanto editable. El <i>beneficio</i> y el <i>total</i>
      también son persistente pero con <i>@Calculation</i> y <i>@ReadOnly</i>
      (no editable). Este es el código completo:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">public class CosteTrabajo  {

    ...
    
    @OneToMany (mappedBy="costeTrabajo")
    @ListProperties("numero, porcentajeIVA, total+[costeTrabajo.porcentajeBeneficio, costeTrabajo.beneficio, costeTrabajo.total]")
    private Collection&lt;FacturaTrabajo&gt; facturas;	    

    @DefaultValueCalculator(value=IntegerCalculator.class,
        properties=@PropertyValue(name="value", value="13") 
    )
    private int porcentajeBeneficio; // Persistente con getter y setters, editable
	
    @Calculation("sum(facturas.total) * porcentajeBeneficio / 100")
    @ReadOnly
    private BigDecimal beneficio; // Persistente con getter y setters, no editable por el @ReadOnly
	
    @Calculation("sum(facturas.total) + beneficio")
    @ReadOnly
    private BigDecimal total; // Persistente con getter y setters, no editable por el @ReadOnly
	
}
</code></pre> </div>
    <div class="wiki" style="display: block;">Esto produce el siguiente efecto:<br>
      <img src="files/view_es240.png" alt="view_es240.png" title="view_es240.png"><br>
      Donde el 131,08 es el sumatorio de la columna, por causa del <em>total+.</em>
      Debajo tienes <em>porcentajeBeneficio</em>, <em>beneficio</em> y <em>total</em>,
      las propiedades de total convencionales. Se puede referenciar el sumatorio
      de la columna (es decir <em>total+</em>, el 131,08) desde una propiedad <em>@Calculation</em>
      usando <em>sum(nombreColumna)</em>. Por ejemplo, en este caso podrías
      definir la propiedad <em>beneficio</em> de esta manera:<br>
      <pre><code class="language-java">@Calculation("sum(facturas.total) * porcentajeBeneficio / 100")
@ReadOnly
private BigDecimal beneficio;</code></pre>
      En este caso el <em>sum(facturas.total)</em> dentro de <em>@Calculation</em>
      es la suma de las propiedades <em>total</em> de todos los elementos de la
      colección <em>facturas</em>, es decir lo mismo que <em>total+</em> en <em>@ListProperties</em>,
      es decir el 131,08 que ves en la imagen.<br>
      <h3 id="toc39"><a name="Vista-Personalizacion+de+coleccion-Subcontrolador+en+una+coleccion+(nuevo+en+v5.7)"></a><a

          name="subcontrolador-coleccion"></a>Subcontrolador en una colección <em>(nuevo
          en v5.7)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany</em><em> y calculadas</em><br>
      Mediante <em>@ListSubcontroller</em> podremos agrupar varias acciones
      para visualizarlas en un único botón desplegable. Si definimos una
      colección como la siguiente:<br>
      <pre><code class="language-java">@OneToMany(mappedBy="equipo", cascade=CascadeType.ALL)
@ListSubcontroller("Cosas")
private Collection&lt;MiembroEquipo&gt; miembros;</code></pre>
      Obtendremos:<br>
      <img src="files/subcontroller-coleccion-esp-2.png" alt="subcontroller-coleccion-esp-2.png"

        title="subcontroller-coleccion-esp-2.png"><br>
      En <em>@ListSubcontroller</em> definiremos el nombre del controlador al
      que hacemos referencia, además están disponibles los atributos <em>forViews</em>
      y <em>notForViews</em>.<br>
      Si queremos que nuestro nuevo subcontrolador muestre una imagen, deberemos
      definir el controlador con el atributo <em>icono</em> o <em>imagen</em>:<br>
      <pre><code class="language-java">&lt;controlador nombre="Cosas" icono="exclamation"&gt;
    &lt;accion nombre="verNombres" clase="org.openxava.test.acciones.VerNombreORolDesdeMiembroEquipo" icono="message-outline"/&gt;
    &lt;accion nombre="verRoles" clase="org.openxava.test.acciones.VerNombreORolDesdeMiembroEquipo" icono="message"&gt;
        &lt;poner valor="true" propiedad="roles"/&gt;
    &lt;/accion&gt;
&lt;/controlador&gt;</code></pre>
      <h3 id="grafico-desde-coleccion">Gráfico a partir de una colección <em>(nuevo
          en v7.4)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany, @ElementCollection</em><em>
        y calculadas</em><br>
      Se puede hacer que para visualizar una colección se use un gráfico, para
      ellos hay que anotar la colección con <a href="https://openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Chart.html"><i>@Chart</i></a>,
      de esta manera:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@OneToMany(mappedBy="empresa")
@Chart
Collection&lt;Empleado&gt; empleados;
</code></pre> </div>
    <div class="wiki" style="display: block;">Por ejemplo, en este caso en lugar
      de la típica lista se visualizaría un gráfico usando los datos de los
      elementos de la colección, así:</div>
    <img src="files/view_es250.png" alt="view_es250.png" title="view_es250.png">
    <div class="wiki" style="display: block;">Habría un grupo de barras por cada
      elemento de la colección, en este caso, si hay 3 empleados en la colección
      aparecen 3 grupos de barras.</div>
    <div class="wiki" style="display: block;">OpenXava determina por defecto que
      propiedades usar para la etiqueta que aparece en cada grupo de barras y
      que propiedades usar para obtener los valores de las barras. Mira la <a href="https://openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/Chart.html">JavaDoc
        de <i>@Chart</i></a> para aprender más sobre los valores por defecto.
      Sin embargo, el programador siempre tiene la opción de definir sus propias
      propiedades usando los atributos <i>labelProperties</i> y <i>dataProperties</i>
      de <i>@Chart</i>, de esta forma:</div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@OneToMany(mappedBy="empresa")
@Chart(labelProperties="nombre, apellidos", dataProperties="salario")
Collection&lt;Empleado&gt; empleados;
</code></pre> </div>
    <div class="wiki" style="display: block;">Lo que generaría un gráfico como
      este:</div>
    <img src="files/view_es260.png" alt="view_es260.png" title="view_es260.png">
    <div class="wiki" style="display: block;">Dado que hemos puesto <i>labelProperties="nombre,
        apellidos"</i> la etiqueta usada en cada columna del gráfico es la
      concatenación del nombre y los apellidos del empleado, como MIGUEL SMITH
      HERRERO por ejemplo. Fíjate también en que sólo sale una columna por
      empleado, con el valor del salario, porque hemos puesto <i>dataProperties="salario"</i>.
      Por supuesto, se pueden poner más propiedades en <i>dataProperties</i>
      separadas por comas.</div>
    <div class="wiki" style="display: block;">A partir de la versión 7.5, está
      disponible un nuevo atributo <i>type</i> en <i>@Chart</i>. Este atributo
      permite especificar el tipo de gráfico que se mostrará. Los valores
      posibles son:
      <ul>
        <li><i>BAR</i>: Muestra un gráfico de barras (este es el valor por
          defecto)</li>
        <li><i>LINE</i>: Muestra un gráfico de líneas</li>
        <li><i>PIE</i>: Muestra un gráfico de tarta</li>
      </ul>
      Por ejemplo: </div>
    <div class="wiki" style="display: block;"> En el caso de los gráficos de
      tarta, al igual que con otros tipos de gráficos, es común mostrar datos
      agregados. Raramente querríamos un gráfico de tarta que muestre todos (o
      muchos) los registros de una tabla (lo que sería una colección de
      entidades). Por lo tanto, normalmente es mejor usar una clase auxiliar
      para mostrar datos agregados o de resumen. Aquí hay un ejemplo: </div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@Chart(type = ChartType.PIE)
public Collection&lt;Proporcion&gt; getProporcionEmpleadosExternos() { 
    EntityManager em = XPersistence.getManager();
    
    // Consulta para contar empleados internos (email contiene el nombre de la corporación)
    Query consultaInternos = em.createQuery(
        "SELECT COUNT(e) FROM EmpleadoCorporacion e " +
        "WHERE e.corporacion.id = :idCorporacion AND LOWER(e.email) LIKE :patron");
    consultaInternos.setParameter("idCorporacion", getId());
    consultaInternos.setParameter("patron", "%" + nombre.toLowerCase() + "%");
    Long cantidadInternos = (Long) consultaInternos.getSingleResult();
    
    // Consulta para contar empleados externos (email no contiene el nombre de la corporación)
    Query consultaExternos = em.createQuery(
        "SELECT COUNT(e) FROM EmpleadoCorporacion e " +
        "WHERE e.corporacion.id = :idCorporacion AND LOWER(e.email) NOT LIKE :patron");
    consultaExternos.setParameter("idCorporacion", getId());
    consultaExternos.setParameter("patron", "%" + nombre.toLowerCase() + "%");
    Long cantidadExternos = (Long) consultaExternos.getSingleResult();
    
    // Crear y devolver la colección de proporciones
    Collection&lt;Proporcion&gt; proporciones = new ArrayList&lt;&gt;();
    proporciones.add(new Proporcion("Internos", cantidadInternos.intValue()));
    proporciones.add(new Proporcion("Externos", cantidadExternos.intValue()));

    return proporciones;
}</code></pre>
    </div>
    <div class="wiki" style="display: block;"> Donde <i>Proporcion</i> es una
      clase simple que representa una proporción con una descripción y un valor:
    </div>
    <div class="wiki" style="display: block;">
      <pre><code class="language-java">@Data
@NoArgsConstructor
@AllArgsConstructor
public class Proporcion {
    
    String descripcion;
    int valor;
}</code></pre>
    </div>
    <div class="wiki" style="display: block;"> Esto generaría un gráfico de
      tarta como este: </div>
    <img src="files/view_es265.png" alt="view_es265.png" title="view_es265.png">
    <div class="wiki" style="display: block;">Además, los atributos <em>forViews</em>
      y <em>notForViews</em> están disponibles en <i>@Chart</i>.</div>
    <div class="wiki" style="display: block;">
      <h3 id="lista-simple">Lista simple <em>(nuevo en v7.4)</em></h3>
      <em>Aplica a colecciones @OneToMany/@ManyToMany, @ElementCollection</em><em>
        y calculadas</em><br>
      Con la anotación <a href="https://openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SimpleList.html"><i>@SimpleList</i></a>
      la lista se visualiza de solo lectura, sin acciones, sin filtros, sin
      paginación, sin ordenación, etc. Es decir, si anotamos nuestra colección
      con <i>@SimpleList</i>, de esta manera:<br>
      <div class="wiki" style="display: block;">
        <pre><code class="language-java">@OneToMany(mappedBy="padre")
@SimpleList
Collection&lt;RotacionPersonal&gt; rotacionPorAnyo;
</code></pre> </div>
      <div class="wiki" style="display: block;">Se visualizaría así:</div>
      <img src="files/view_es270.png" alt="view_es270.png" title="view_es270.png">
      <div class="wiki" style="display: block;">Útil cuando el usuario necesite
        ver los datos de forma simple y clara, y no tenga que interactuar con
        ellos, como en un cuadro de mandos, por ejemplo.</div>
      <div class="wiki" style="display: block;">Además, los atributos <em>forViews</em>
        y <em>notForViews</em> están disponibles en <i>@SimpleList.</i></div>
      <div class="wiki" style="display: block;">Como ocurre con todos los
        elementos visuales de OpenXava, puedes cambiar el estilo de la lista
        simple (<i>@SimpleList</i>) usando CSS. La clase CSS disponible es <i>.ox-simple-list</i>.
        El código CSS lo puedes incluir en <i>custom.css</i> o en tu propio
        estilo como se explica en la <a href="custom-style_es.html">documentación
        sobre el estilo visual personalizado</a>.<br>
        <h3 id="escoger-tab-para-accion-de-busqueda-colecciones">Escoger tab
          para la acción de busqueda (colecciones<em>, nuevo en v7.4</em>)</h3>
        <p> <em>Aplica a colecciones @OneToMany/@ManyToMany</em><em> y
            calculadas</em></p>
        <p>Con <a href="https://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/SearchListTab.html"><em>@SearchListTab</em></a>
          podemos indicar que tab mostrar en el dialogo al realizar la acción de
          añadir.</p>
        <pre><code class="language-java">@OneToMany(mappedBy="vendedor")
@SearchListTab("Demo")
private Collection&lt;Cliente&gt; clientes;</code></pre>
        Para esto en <em>Cliente</em> debemos tener un tab llamado <em>Demo</em>:<br>
        <div class="wiki">
          <pre><code class="language-java">@Entity
@Tab(name="Demo", properties="nombre, tipo, vendedor.nombre", defaultOrder="${nombre} desc", baseCondition="${tipo} = 'R'")
public class Cliente {</code></pre>
          Además, los atributos <em>forViews</em> y <em>notForViews</em> están
          disponibles en <i>@SearchListTab</i>. </div>
        <div class="wiki">
          <h3 id="no-default-actions">Ocultar acciones por defecto de lista y
            fila (<em>nuevo en v7.4</em>)</h3>
          <p><em>Aplica a colecciones @OneToMany/@ManyToMany</em><em> y
              calculadas</em></p>
          <p>Con <a href="https://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/NoDefaultActions.html"><em>@NoDefaultActions</em></a>
            podemos ocultar las acciones de los controladores <em>DefaultListActionsForCollections
              </em>y <em>DefaultRowActionsForCollections.</em></p>
          <pre><code class="language-java">@OneToMany(mappedBy="vendedor")
@NoDefaultActions
private Collection&lt;Carrier&gt; carriers;</code></pre>
        </div>
        <div class="wiki"><img src="files/view_es280.png" alt="view_es270.png" title="view_es270.png"></div>
        <div class="wiki">Además, los atributos <em>forViews</em> y <em>notForViews</em>
          están disponibles en <i>@NoDefaultActions</i>. </div>
      </div>
      <h2 id="toc40"><a name="Vista-Propiedades+transitorias+para+controles+graficos"></a>Propiedades
        transitorias para controles gráficos</h2>
      Con <em><a class="wiki_link_ext" href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Transient.html"

          rel="nofollow">@Transient (JPA)</a></em> podemos usar una propiedad
      que no se guarde en la base de datos, pero que sí nos interesa que se
      visualice al usuario. Podemos usarlas para proporcionar controles al
      usuario para manejar la interfaz gráfica.<br>
      Un ejemplo:<br>
      <pre><code class="language-java">@Transient
@DefaultValueCalculator(value=EnumCalculator.class,
 properties={
 @PropertyValue(name="enumType", value="org.openxava.test.modelo.Albaran$EntregadoPor")
 @PropertyValue(name="value", value="TRANSPORTISTA")
 }
)
@OnChange(AlCambiarEntradoPor.class)
private EntragadoPor entregadoPor;
public enum EntregadoPor { TRABAJADOR, TRANSPORTISTA }</code></pre>
      Podemos observar como la sintaxis es exactamente igual que en el caso de
      definir una propiedad en la parte del modelo, podemos incluso hacer que
      sea un <em>enum</em> y que tenga un <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/DefaultValueCalculator.html"

          rel="nofollow">@DefaultValueCalculator</a></em>. Después de haber
      definido la propiedad podemos usarla en la vista como una propiedad más,
      asignandole una acción <em><a class="wiki_link_ext" href="http://www.openxava.org/OpenXavaDoc/apidocs/org/openxava/annotations/OnChange.html"

          rel="nofollow">@OnChange</a></em> por ejemplo y por supuesto
      poniendola como miembro de una vista.<br>
      <h2 id="toc41"><a name="Vista-Acciones de la vista"></a>Acciones de la
        vista</h2>
      Además de poder asociar acciones a una propiedad, referencia o colección,
      podemos tambien definir acciones arbitrarias en cualquier parte de nuestra
      vista. Para poder hacer esto se ponemos el nombre calificado de la acción
      seguido de paréntesis (), de esta manera:<br>
      <pre><code class="language-java">@View( members=
 "codigo;" +
 "tipo;" +
 "nombre, Cliente.cambiarEtiquetaDeNombre();" +
 ...</code></pre>
      El efecto visual sería:<br>
      <img src="files/view_es200.jpg" alt="view_es200.jpg" title="view_es200.jpg"><br>
      Podemos ver el vínculo 'Cambiar nombre de etiqueta' que ejecutará la
      acción <em>Clientes.cambiarEtiquetaDeNombre</em> al pulsarlo.<br>
      Si la vista contenedora de la acción no es editable, la acción no estará
      presente. Si queremos que la acción esté siempre activa, incluso si la
      vista no está editable, hemos de usar poner la palabra ALWAYS entre los
      paréntesis, como sigue:<br>
      <pre><code class="language-java">@View( members=
 "codigo;" +
 "tipo;" +
 "nombre, Cliente.cambiarEtiquetaDeNombre(ALWAYS);" +
 ...</code></pre>
      La forma normal de exponer las acciones al usuario es mediante los
      controladores (acciones en la barra), lo controladores son reutilizables
      entre vistas, pero puede que a veces necesitemos una acción específica a
      una vista, y queramos visualizarla dentro de la misma (no en la barra de
      botones), para estos casos el elemento accion puede ser útil.<br>
      Podemos ver más acerca de las acciones en el <a class="wiki_link" href="controllers_es.html">capítulo
        7</a>.<br>
      <h2 id="toc42"><a name="Vista-Clase transitoria: Solo para crear vistas"></a>Clase
        transitoria: Solo para crear vistas</h2>
      En OpenXava no se puede tener vistas que no estén asociadas a un modelo.
      Así que si queremos dibujar una interfaz gráfica arbitraria, lo que hemos
      de hacer es crear una clase, no marcarla como entidad y a partir de ésta
      definir una vista.<br>
      Una clase transitoria no está asociada a ninguna tabla de la base de
      datos, normalmente se usa solo para visualizar interfaces de usuario no
      relacionadas con ninguna tabla de la base de datos.<br>
      Un ejemplo puede ser:<br>
      <pre><code class="language-java">package org.openxava.test.model;
import javax.persistence.*;
import org.openxava.annotations.*;
/**
 * Ejemplo de una clase OpenXava transitoria (no persistente) del modelo. &lt;p&gt;
 *
 * Esto se puede usar, por ejemplo, para visualizar un diálogo,
 * o cualquier otro interfaz gráfica.&lt;p&gt;
 *
 * Notemos como no está marcada con @Entity &lt;br&gt;
 *
 * @author Javier Paniza
 */
@Views({
 @View(name="Familia1", members="subfamilia"),
 @View(name="Familia2", members="subfamilia"),
 @View(name="ConFormularioSubfamilia", members="subfamilia"),
 @View(name="Rango", members="subfamilia; subfamiliaHasta")
})
public class FiltroPorSubfamilia {
 @ManyToOne(fetch=FetchType.LAZY) @Required
 @NoCreate(forViews="Familia1, Familia2")
 @NoModify(forViews="Familia2, ConFormularioSubfamilia")
 @NoSearch(forViews="ConFormularioSubfamilia")
 @DescriptionsLists({
 @DescriptionsList(forViews="Familia1",
 condition="${familia.codigo} = 1", order="${codigo} desc"
 ),
 @DescriptionsList(forViews="Familia2",
 condition="${familia.codigo} = 2"
 )
 })
 private Subfamilia subfamilia;
 @ManyToOne(fetch=FetchType.LAZY)
 private Subfamilia subfamiliaHasta;
 public Subfamilia getSubfamilia() {
 return subfamilia;
 }
 public void setSubfamilia(Subfamilia subfamilia) {
 this.subfamilia = subfamilia;
 }
 public Subfamilia getSubfamiliaHasta() {
 return subfamiliaHasta;
 }
 public void setSubfamiliaHasta(Subfamilia subfamiliaHasta) {
 this.subfamiliaHasta = subfamiliaHasta;
 }
}</code></pre>
      Para definir una clase del modelo como transitorio solo necesitamos
      definir una clase convencional sin <em><a class="wiki_link_ext" href="http://java.sun.com/javaee/5/docs/api/javax/persistence/Entity.html"

          rel="nofollow">@Entity</a></em>. No hemos de poner el mapeo ni
      declarar propiedades como clave.<br>
      De esta forma podemos hacer un diálogo que puede servir, por ejemplo, para
      lanzar un listado de familias o productos filtrado por subfamilias.<br>
      Las clases transitorias se usan con <a class="wiki_link" href="application_es.html#Aplicacion-Modulo+con+solo+detalle">módulos
        con solo detalle</a>. A partir de v5.0 hemos de <a class="wiki_link" href="application_es.html">definir
        el módulo explícitamente en aplicacion.xml</a> para cada clase
      transitoria. Hasta v4.9.1 se podía usar una clase transitoria sin definir
      un módulo dado que se generaba uno por defecto, sólo era necesario si
      queriamos generar el portlet.<br>
      Hasta v7.3.3 el paquete para las clases transitorias del modelo tenía que
      ser el mismo que el de las clases persistentes. Sin embargo, a partir de
      v7.4 las clases transitorias también pueden estar en los paquetes hermanos
      del paquete modelo, es decir si tu paquete modelo es <i>com.tuempresa.tuaplicacion.modelo</i>
      puedes poner tu clases transitorias en <i>com.tuempresa.tuaplicacion.</i><i>cuadrosmando</i>
      o&nbsp;<i><i>com.tuempresa.tuaplicacion.</i>dialogos</i>, por ejemplo,
      aunque estos paquetes no contengan ninguna clase persistente.<br>
      Podemos así tener un generador de cualquier tipo de interfaz gráficas
      sencillo y bastante flexible, aunque no queramos que la información
      visualizada sea persistente.<br>
      <span style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 19013.5px; width: 1px;"><br>
        <pre><code class="language-java">@ListSubcontroller</code></pre>
      </span><span style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 19334.5px; width: 1px;"><span

          style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 19334.5px; width: 1px;">&lt;controller
          name="TeamMemberSub" icon="exclamation"&gt; &lt;action
          name="viewNames"
          class="org.openxava.test.actions.ViewNamesOrRolesNamesFromTeamMember"
          icon="message-outline"/&gt; &lt;action name="viewRoles"
          class="org.openxava.test.actions.ViewNamesOrRolesNamesFromTeamMember"
          icon="message"&gt; &lt;set value="true" property="roles"/&gt;
          &lt;/action&gt; &lt;/controller&gt;</span></span><span style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 20425.5px; width: 1px;"><span

          style="display: block; height: 1px; left: 0px; overflow: hidden; position: absolute; top: 20425.5px; width: 1px;">public
          void execute() throws Exception { String value =
          (String)getNewValue(); String condition = ""; if (Is.empty(value))
          condition = "1=1"; else condition = "upper(name) like '%" + value +
          "%'"; getView().setDescriptionsListCondition("state", condition);
          getView().refreshDescriptionsLists(); }</span></span> </div>
  </body>
</html>
